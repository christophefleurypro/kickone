{"code":"!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=54)}([function(e,t,n){\"use strict\";const i=e=>null!==e&&void 0!==e?e.constructor:null,r=(e,t)=>Boolean(e&&t&&e instanceof t),a=e=>null===e||void 0===e,s=e=>i(e)===Object,o=e=>i(e)===String,l=e=>Array.isArray(e),c=e=>r(e,NodeList),u=e=>a(e)||(o(e)||l(e)||c(e))&&!e.length||s(e)&&!Object.keys(e).length;t.a={nullOrUndefined:a,object:s,number:e=>i(e)===Number&&!Number.isNaN(e),string:o,boolean:e=>i(e)===Boolean,function:e=>i(e)===Function,array:l,weakMap:e=>r(e,WeakMap),nodeList:c,element:e=>r(e,Element),textNode:e=>i(e)===Text,event:e=>r(e,Event),keyboardEvent:e=>r(e,KeyboardEvent),cue:e=>r(e,window.TextTrackCue)||r(e,window.VTTCue),track:e=>r(e,TextTrack)||!a(e)&&o(e.kind),promise:e=>r(e,Promise),url:e=>{if(r(e,window.URL))return!0;if(!o(e))return!1;let t=e;e.startsWith(\"http://\")&&e.startsWith(\"https://\")||(t=`http://${e}`);try{return!u(new URL(t).hostname)}catch(e){return!1}},empty:u}},function(e,t,n){\"use strict\";n.d(t,\"q\",function(){return wrap}),n.d(t,\"l\",function(){return setAttributes}),n.d(t,\"a\",function(){return createElement}),n.d(t,\"g\",function(){return insertAfter}),n.d(t,\"h\",function(){return insertElement}),n.d(t,\"j\",function(){return removeElement}),n.d(t,\"b\",function(){return emptyElement}),n.d(t,\"k\",function(){return replaceElement}),n.d(t,\"c\",function(){return getAttributesFromSelector}),n.d(t,\"o\",function(){return toggleHidden}),n.d(t,\"n\",function(){return toggleClass}),n.d(t,\"f\",function(){return hasClass}),n.d(t,\"i\",function(){return matches}),n.d(t,\"e\",function(){return getElements}),n.d(t,\"d\",function(){return getElement}),n.d(t,\"p\",function(){return trapFocus}),n.d(t,\"m\",function(){return setFocus});var i=n(2),r=n(0),a=n(4);function wrap(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach((e,n)=>{const i=n>0?t.cloneNode(!0):t,r=e.parentNode,a=e.nextSibling;i.appendChild(e),a?r.insertBefore(i,a):r.appendChild(i)})}function setAttributes(e,t){r.a.element(e)&&!r.a.empty(t)&&Object.entries(t).filter(([,e])=>!r.a.nullOrUndefined(e)).forEach(([t,n])=>e.setAttribute(t,n))}function createElement(e,t,n){const i=document.createElement(e);return r.a.object(t)&&setAttributes(i,t),r.a.string(n)&&(i.innerText=n),i}function insertAfter(e,t){r.a.element(e)&&r.a.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}function insertElement(e,t,n,i){r.a.element(t)&&t.appendChild(createElement(e,n,i))}function removeElement(e){r.a.nodeList(e)||r.a.array(e)?Array.from(e).forEach(removeElement):r.a.element(e)&&r.a.element(e.parentNode)&&e.parentNode.removeChild(e)}function emptyElement(e){if(!r.a.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function replaceElement(e,t){return r.a.element(t)&&r.a.element(t.parentNode)&&r.a.element(e)?(t.parentNode.replaceChild(e,t),e):null}function getAttributesFromSelector(e,t){if(!r.a.string(e)||r.a.empty(e))return{};const n={},i=Object(a.b)({},t);return e.split(\",\").forEach(e=>{const t=e.trim(),a=t.replace(\".\",\"\"),s=t.replace(/[[\\]]/g,\"\").split(\"=\"),[o]=s,l=s.length>1?s[1].replace(/[\"']/g,\"\"):\"\";switch(t.charAt(0)){case\".\":r.a.string(i.class)?n.class=`${i.class} ${a}`:n.class=a;break;case\"#\":n.id=t.replace(\"#\",\"\");break;case\"[\":n[o]=l}}),Object(a.b)(i,n)}function toggleHidden(e,t){if(!r.a.element(e))return;let n=t;r.a.boolean(n)||(n=!e.hidden),e.hidden=n}function toggleClass(e,t,n){if(r.a.nodeList(e))return Array.from(e).map(e=>toggleClass(e,t,n));if(r.a.element(e)){let i=\"toggle\";return void 0!==n&&(i=n?\"add\":\"remove\"),e.classList[i](t),e.classList.contains(t)}return!1}function hasClass(e,t){return r.a.element(e)&&e.classList.contains(t)}function matches(e,t){const n={Element:Element};return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function match(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function getElements(e){return this.elements.container.querySelectorAll(e)}function getElement(e){return this.elements.container.querySelector(e)}function trapFocus(e=null,t=!1){if(!r.a.element(e))return;const n=getElements.call(this,\"button:not(:disabled), input:not(:disabled), [tabindex]\"),a=n[0],s=n[n.length-1];i.e.call(this,this.elements.container,\"keydown\",e=>{if(\"Tab\"!==e.key||9!==e.keyCode)return;const t=document.activeElement;t!==s||e.shiftKey?t===a&&e.shiftKey&&(s.focus(),e.preventDefault()):(a.focus(),e.preventDefault())},t,!1)}function setFocus(e=null,t=!1){r.a.element(e)&&(e.focus({preventScroll:!0}),t&&toggleClass(e,this.config.classNames.tabFocus))}},function(e,t,n){\"use strict\";n.d(t,\"e\",function(){return toggleListener}),n.d(t,\"b\",function(){return on}),n.d(t,\"a\",function(){return off}),n.d(t,\"c\",function(){return once}),n.d(t,\"f\",function(){return triggerEvent}),n.d(t,\"g\",function(){return unbindListeners}),n.d(t,\"d\",function(){return ready});var i=n(0);const r=(()=>{let e=!1;try{const t=Object.defineProperty({},\"passive\",{get:()=>(e=!0,null)});window.addEventListener(\"test\",null,t),window.removeEventListener(\"test\",null,t)}catch(e){}return e})();function toggleListener(e,t,n,a=!1,s=!0,o=!1){if(!e||!(\"addEventListener\"in e)||i.a.empty(t)||!i.a.function(n))return;const l=t.split(\" \");let c=o;r&&(c={passive:s,capture:o}),l.forEach(t=>{this&&this.eventListeners&&a&&this.eventListeners.push({element:e,type:t,callback:n,options:c}),e[a?\"addEventListener\":\"removeEventListener\"](t,n,c)})}function on(e,t=\"\",n,i=!0,r=!1){toggleListener.call(this,e,t,n,!0,i,r)}function off(e,t=\"\",n,i=!0,r=!1){toggleListener.call(this,e,t,n,!1,i,r)}function once(e,t=\"\",n,i=!0,r=!1){const a=(...s)=>{off(e,t,a,i,r),n.apply(this,s)};toggleListener.call(this,e,t,a,!0,i,r)}function triggerEvent(e,t=\"\",n=!1,r={}){if(!i.a.element(e)||i.a.empty(t))return;const a=new CustomEvent(t,{bubbles:n,detail:Object.assign({},r,{plyr:this})});e.dispatchEvent(a)}function unbindListeners(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:n,callback:i,options:r}=e;t.removeEventListener(n,i,r)}),this.eventListeners=[])}function ready(){return new Promise(e=>this.ready?setTimeout(e,0):on.call(this,this.elements.container,\"ready\",e)).then(()=>{})}},function(e,t,n){\"use strict\";var i=n(34),r=n.n(i),a=n(11),s=n(20),o=n(5),l=n(16),c=n(17),u=n(7),h=n(1),d=n(2),p=n(8),f=n(0),m=n(24),g=n(4),y=n(10),v=n(18);const b={getIconUrl(){const e=new URL(this.config.iconUrl,window.location).host!==window.location.host||u.a.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements(){try{return this.elements.controls=h.d.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:h.e.call(this,this.config.selectors.buttons.play),pause:h.d.call(this,this.config.selectors.buttons.pause),restart:h.d.call(this,this.config.selectors.buttons.restart),rewind:h.d.call(this,this.config.selectors.buttons.rewind),fastForward:h.d.call(this,this.config.selectors.buttons.fastForward),mute:h.d.call(this,this.config.selectors.buttons.mute),pip:h.d.call(this,this.config.selectors.buttons.pip),airplay:h.d.call(this,this.config.selectors.buttons.airplay),settings:h.d.call(this,this.config.selectors.buttons.settings),captions:h.d.call(this,this.config.selectors.buttons.captions),fullscreen:h.d.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=h.d.call(this,this.config.selectors.progress),this.elements.inputs={seek:h.d.call(this,this.config.selectors.inputs.seek),volume:h.d.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:h.d.call(this,this.config.selectors.display.buffer),currentTime:h.d.call(this,this.config.selectors.display.currentTime),duration:h.d.call(this,this.config.selectors.display.duration)},f.a.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn(\"It looks like there is a problem with your custom controls HTML\",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n=b.getIconUrl.call(this),i=`${n.cors?\"\":n.url}#${this.config.iconPrefix}`,r=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");Object(h.l)(r,Object(g.b)(t,{role:\"presentation\",focusable:\"false\"}));const a=document.createElementNS(\"http://www.w3.org/2000/svg\",\"use\"),s=`${i}-${e}`;return\"href\"in a&&a.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\",s),a.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",s),r.appendChild(a),r},createLabel(e,t={}){const n=p.a.get(e,this.config),i=Object.assign({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(\" \")});return Object(h.a)(\"span\",i,n)},createBadge(e){if(f.a.empty(e))return null;const t=Object(h.a)(\"span\",{class:this.config.classNames.menu.value});return t.appendChild(Object(h.a)(\"span\",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=Object(g.b)({},t);let i=Object(y.g)(e);const r={element:\"button\",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch([\"element\",\"icon\",\"label\"].forEach(e=>{Object.keys(n).includes(e)&&(r[e]=n[e],delete n[e])}),\"button\"!==r.element||Object.keys(n).includes(\"type\")||(n.type=\"button\"),Object.keys(n).includes(\"class\")?n.class.split(\" \").some(e=>e===this.config.classNames.control)||Object(g.b)(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case\"play\":r.toggle=!0,r.label=\"play\",r.labelPressed=\"pause\",r.icon=\"play\",r.iconPressed=\"pause\";break;case\"mute\":r.toggle=!0,r.label=\"mute\",r.labelPressed=\"unmute\",r.icon=\"volume\",r.iconPressed=\"muted\";break;case\"captions\":r.toggle=!0,r.label=\"enableCaptions\",r.labelPressed=\"disableCaptions\",r.icon=\"captions-off\",r.iconPressed=\"captions-on\";break;case\"fullscreen\":r.toggle=!0,r.label=\"enterFullscreen\",r.labelPressed=\"exitFullscreen\",r.icon=\"enter-fullscreen\",r.iconPressed=\"exit-fullscreen\";break;case\"play-large\":n.class+=` ${this.config.classNames.control}--overlaid`,i=\"play\",r.label=\"play\",r.icon=\"play\";break;default:f.a.empty(r.label)&&(r.label=i),f.a.empty(r.icon)&&(r.icon=e)}const a=Object(h.a)(r.element);return r.toggle?(a.appendChild(b.createIcon.call(this,r.iconPressed,{class:\"icon--pressed\"})),a.appendChild(b.createIcon.call(this,r.icon,{class:\"icon--not-pressed\"})),a.appendChild(b.createLabel.call(this,r.labelPressed,{class:\"label--pressed\"})),a.appendChild(b.createLabel.call(this,r.label,{class:\"label--not-pressed\"}))):(a.appendChild(b.createIcon.call(this,r.icon)),a.appendChild(b.createLabel.call(this,r.label))),Object(g.b)(n,Object(h.c)(this.config.selectors.buttons[i],n)),Object(h.l)(a,n),\"play\"===i?(f.a.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(a)):this.elements.buttons[i]=a,a},createRange(e,t){const n=Object(h.a)(\"input\",Object(g.b)(Object(h.c)(this.config.selectors.inputs[e]),{type:\"range\",min:0,max:100,step:.01,value:0,autocomplete:\"off\",role:\"slider\",\"aria-label\":p.a.get(e,this.config),\"aria-valuemin\":0,\"aria-valuemax\":100,\"aria-valuenow\":0},t));return this.elements.inputs[e]=n,b.updateRangeFill.call(this,n),r.a.setup(n),n},createProgress(e,t){const n=Object(h.a)(\"progress\",Object(g.b)(Object(h.c)(this.config.selectors.display[e]),{min:0,max:100,value:0,role:\"progressbar\",\"aria-hidden\":!0},t));if(\"volume\"!==e){n.appendChild(Object(h.a)(\"span\",null,\"0\"));const t={played:\"played\",buffer:\"buffered\"}[e],i=t?p.a.get(t,this.config):\"\";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=Object(h.c)(this.config.selectors.display[e],t),i=Object(h.a)(\"div\",Object(g.b)(n,{class:`${n.class?n.class:\"\"} ${this.config.classNames.display.time} `.trim(),\"aria-label\":p.a.get(e,this.config)}),\"00:00\");return this.elements.display[e]=i,i},bindMenuItemShortcuts(e,t){Object(d.b)(e,\"keydown keyup\",n=>{if(![32,38,39,40].includes(n.which))return;if(n.preventDefault(),n.stopPropagation(),\"keydown\"===n.type)return;const i=Object(h.i)(e,'[role=\"menuitemradio\"]');if(!i&&[32,39].includes(n.which))b.showMenuPanel.call(this,t,!0);else{let t;32!==n.which&&(40===n.which||i&&39===n.which?(t=e.nextElementSibling,f.a.element(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,f.a.element(t)||(t=e.parentNode.lastElementChild)),h.m.call(this,t,!0))}},!1),Object(d.b)(e,\"keyup\",e=>{13===e.which&&b.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:n,title:i,badge:r=null,checked:a=!1}){const s=Object(h.c)(this.config.selectors.inputs[n]),o=Object(h.a)(\"button\",Object(g.b)(s,{type:\"button\",role:\"menuitemradio\",class:`${this.config.classNames.control} ${s.class?s.class:\"\"}`.trim(),\"aria-checked\":a,value:e})),l=Object(h.a)(\"span\");l.innerHTML=i,f.a.element(r)&&l.appendChild(r),o.appendChild(l),Object.defineProperty(o,\"checked\",{enumerable:!0,get:()=>\"true\"===o.getAttribute(\"aria-checked\"),set(e){e&&Array.from(o.parentNode.children).filter(e=>Object(h.i)(e,'[role=\"menuitemradio\"]')).forEach(e=>e.setAttribute(\"aria-checked\",\"false\")),o.setAttribute(\"aria-checked\",e?\"true\":\"false\")}}),this.listeners.bind(o,\"click keyup\",t=>{if(!f.a.keyboardEvent(t)||32===t.which){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,n){case\"language\":this.currentTrack=Number(e);break;case\"quality\":this.quality=e;break;case\"speed\":this.speed=parseFloat(e)}b.showMenuPanel.call(this,\"home\",f.a.keyboardEvent(t))}},n,!1),b.bindMenuItemShortcuts.call(this,o,n),t.appendChild(o)},formatTime(e=0,t=!1){if(!f.a.number(e))return e;const n=Object(v.b)(this.duration)>0;return Object(v.a)(e,n,t)},updateTimeDisplay(e=null,t=0,n=!1){f.a.element(e)&&f.a.number(t)&&(e.innerText=b.formatTime(t,n))},updateVolume(){this.supported.ui&&(f.a.element(this.elements.inputs.volume)&&b.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),f.a.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){f.a.element(e)&&(e.value=t,b.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!f.a.event(e))return;let t=0;const n=(e,t)=>{const n=f.a.number(t)?t:0,i=f.a.element(e)?e:this.elements.display.buffer;if(f.a.element(i)){i.value=n;const e=i.getElementsByTagName(\"span\")[0];f.a.element(e)&&(e.childNodes[0].nodeValue=n)}};if(e)switch(e.type){case\"timeupdate\":case\"seeking\":case\"seeked\":t=Object(y.d)(this.currentTime,this.duration),\"timeupdate\"===e.type&&b.setRange.call(this,this.elements.inputs.seek,t);break;case\"playing\":case\"progress\":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(e){const t=f.a.event(e)?e.target:e;if(f.a.element(t)&&\"range\"===t.getAttribute(\"type\")){if(Object(h.i)(t,this.config.selectors.inputs.seek)){t.setAttribute(\"aria-valuenow\",this.currentTime);const e=b.formatTime(this.currentTime),n=b.formatTime(this.duration),i=p.a.get(\"seekLabel\",this.config);t.setAttribute(\"aria-valuetext\",i.replace(\"{currentTime}\",e).replace(\"{duration}\",n))}else if(Object(h.i)(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute(\"aria-valuenow\",e),t.setAttribute(\"aria-valuetext\",`${e.toFixed(1)}%`)}else t.setAttribute(\"aria-valuenow\",t.value);u.a.isWebkit&&t.style.setProperty(\"--value\",`${t.value/t.max*100}%`)}},updateSeekTooltip(e){if(!this.config.tooltips.seek||!f.a.element(this.elements.inputs.seek)||!f.a.element(this.elements.display.seekTooltip)||0===this.duration)return;const t=`${this.config.classNames.tooltip}--visible`,n=e=>Object(h.n)(this.elements.display.seekTooltip,t,e);if(this.touch)return void n(!1);let i=0;const r=this.elements.progress.getBoundingClientRect();if(f.a.event(e))i=100/r.width*(e.pageX-r.left);else{if(!Object(h.f)(this.elements.display.seekTooltip,t))return;i=parseFloat(this.elements.display.seekTooltip.style.left,10)}i<0?i=0:i>100&&(i=100),b.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*i),this.elements.display.seekTooltip.style.left=`${i}%`,f.a.event(e)&&[\"mouseenter\",\"mouseleave\"].includes(e.type)&&n(\"mouseenter\"===e.type)},timeUpdate(e){const t=!f.a.element(this.elements.display.duration)&&this.config.invertTime;b.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&\"timeupdate\"===e.type&&this.media.seeking||b.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Object(h.o)(this.elements.display.currentTime,!0),void Object(h.o)(this.elements.progress,!0);f.a.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute(\"aria-valuemax\",this.duration);const e=f.a.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&b.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&b.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),b.updateSeekTooltip.call(this)},toggleMenuButton(e,t){Object(h.o)(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const i=this.elements.settings.panels[e];let r=null,a=t;if(\"captions\"===e)r=this.currentTrack;else{if(r=f.a.empty(n)?this[e]:n,f.a.empty(r)&&(r=this.config[e].default),!f.a.empty(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(f.a.element(a)||(a=i&&i.querySelector('[role=\"menu\"]')),!f.a.element(a))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=b.getLabel.call(this,e,r);const s=a&&a.querySelector(`[value=\"${r}\"]`);f.a.element(s)&&(s.checked=!0)},getLabel(e,t){switch(e){case\"speed\":return 1===t?p.a.get(\"normal\",this.config):`${t}&times;`;case\"quality\":if(f.a.number(t)){const e=p.a.get(`qualityLabel.${t}`,this.config);return e.length?e:`${t}p`}return Object(y.h)(t);case\"captions\":return a.a.getLabel.call(this);default:return null}},setQualityMenu(e){if(!f.a.element(this.elements.settings.panels.quality))return;const t=this.elements.settings.panels.quality.querySelector('[role=\"menu\"]');f.a.array(e)&&(this.options.quality=Object(c.b)(e).filter(e=>this.config.quality.options.includes(e)));const n=!f.a.empty(this.options.quality)&&this.options.quality.length>1;if(b.toggleMenuButton.call(this,\"quality\",n),Object(h.b)(t),b.checkMenu.call(this),!n)return;const i=e=>{const t=p.a.get(`qualityBadge.${e}`,this.config);return t.length?b.createBadge.call(this,t):null};this.options.quality.sort((e,t)=>{const n=this.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1}).forEach(e=>{b.createMenuItem.call(this,{value:e,list:t,type:\"quality\",title:b.getLabel.call(this,\"quality\",e),badge:i(e)})}),b.updateSetting.call(this,\"quality\",t)},setCaptionsMenu(){if(!f.a.element(this.elements.settings.panels.captions))return;const e=this.elements.settings.panels.captions.querySelector('[role=\"menu\"]'),t=a.a.getTracks.call(this),n=Boolean(t.length);if(b.toggleMenuButton.call(this,\"captions\",n),Object(h.b)(e),b.checkMenu.call(this),!n)return;const i=t.map((t,n)=>({value:n,checked:this.captions.toggled&&this.currentTrack===n,title:a.a.getLabel.call(this,t),badge:t.language&&b.createBadge.call(this,t.language.toUpperCase()),list:e,type:\"language\"}));i.unshift({value:-1,checked:!this.captions.toggled,title:p.a.get(\"disabled\",this.config),list:e,type:\"language\"}),i.forEach(b.createMenuItem.bind(this)),b.updateSetting.call(this,\"captions\",e)},setSpeedMenu(e){if(!f.a.element(this.elements.settings.panels.speed))return;const t=this.elements.settings.panels.speed.querySelector('[role=\"menu\"]');f.a.array(e)?this.options.speed=e:(this.isHTML5||this.isVimeo)&&(this.options.speed=[.5,.75,1,1.25,1.5,1.75,2]),this.options.speed=this.options.speed.filter(e=>this.config.speed.options.includes(e));const n=!f.a.empty(this.options.speed)&&this.options.speed.length>1;b.toggleMenuButton.call(this,\"speed\",n),Object(h.b)(t),b.checkMenu.call(this),n&&(this.options.speed.forEach(e=>{b.createMenuItem.call(this,{value:e,list:t,type:\"speed\",title:b.getLabel.call(this,\"speed\",e)})}),b.updateSetting.call(this,\"speed\",t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!f.a.empty(e)&&Object.values(e).some(e=>!e.hidden);Object(h.o)(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;f.a.element(n)||(n=Object.values(this.elements.settings.panels).find(e=>!e.hidden));const i=n.querySelector('[role^=\"menuitem\"]');h.m.call(this,i,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!f.a.element(t)||!f.a.element(n))return;const{hidden:i}=t;let r=i;if(f.a.boolean(e))r=e;else if(f.a.keyboardEvent(e)&&27===e.which)r=!1;else if(f.a.event(e)){const i=f.a.function(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(i);if(a||!a&&e.target!==n&&r)return}n.setAttribute(\"aria-expanded\",r),Object(h.o)(t,!r),Object(h.n)(this.elements.container,this.config.classNames.menu.open,r),r&&f.a.keyboardEvent(e)?b.focusFirstMenuItem.call(this,null,!0):r||i||h.m.call(this,n,f.a.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position=\"absolute\",t.style.opacity=0,t.removeAttribute(\"hidden\"),e.parentNode.appendChild(t);const n=t.scrollWidth,i=t.scrollHeight;return Object(h.j)(t),{width:n,height:i}},showMenuPanel(e=\"\",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!f.a.element(n))return;const i=n.parentNode,r=Array.from(i.children).find(e=>!e.hidden);if(o.a.transitions&&!o.a.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const e=b.getMenuSize.call(this,n),t=e=>{e.target===i&&[\"width\",\"height\"].includes(e.propertyName)&&(i.style.width=\"\",i.style.height=\"\",d.a.call(this,i,l.b,t))};d.b.call(this,i,l.b,t),i.style.width=`${e.width}px`,i.style.height=`${e.height}px`}Object(h.o)(r,!0),Object(h.o)(n,!1),b.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;f.a.element(e)&&e.setAttribute(\"href\",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:i,createRange:r,createTime:a,setQualityMenu:l,setSpeedMenu:u,showMenuPanel:m}=b;this.elements.controls=null,this.config.controls.includes(\"play-large\")&&this.elements.container.appendChild(n.call(this,\"play-large\"));const y=Object(h.a)(\"div\",Object(h.c)(this.config.selectors.controls.wrapper));this.elements.controls=y;const v={class:\"plyr__controls__item\"};return Object(c.b)(this.config.controls).forEach(s=>{if(\"restart\"===s&&y.appendChild(n.call(this,\"restart\",v)),\"rewind\"===s&&y.appendChild(n.call(this,\"rewind\",v)),\"play\"===s&&y.appendChild(n.call(this,\"play\",v)),\"fast-forward\"===s&&y.appendChild(n.call(this,\"fast-forward\",v)),\"progress\"===s){const t=Object(h.a)(\"div\",{class:`${v.class} plyr__progress__container`}),n=Object(h.a)(\"div\",Object(h.c)(this.config.selectors.progress));if(n.appendChild(r.call(this,\"seek\",{id:`plyr-seek-${e.id}`})),n.appendChild(i.call(this,\"buffer\")),this.config.tooltips.seek){const e=Object(h.a)(\"span\",{class:this.config.classNames.tooltip},\"00:00\");n.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=n,t.appendChild(this.elements.progress),y.appendChild(t)}if(\"current-time\"===s&&y.appendChild(a.call(this,\"currentTime\",v)),\"duration\"===s&&y.appendChild(a.call(this,\"duration\",v)),\"mute\"===s||\"volume\"===s){let{volume:t}=this.elements;if(f.a.element(t)&&y.contains(t)||(t=Object(h.a)(\"div\",Object(g.b)({},v,{class:`${v.class} plyr__volume`.trim()})),this.elements.volume=t,y.appendChild(t)),\"mute\"===s&&t.appendChild(n.call(this,\"mute\")),\"volume\"===s){const n={max:1,step:.05,value:this.config.volume};t.appendChild(r.call(this,\"volume\",Object(g.b)(n,{id:`plyr-volume-${e.id}`})))}}if(\"captions\"===s&&y.appendChild(n.call(this,\"captions\",v)),\"settings\"===s&&!f.a.empty(this.config.settings)){const i=Object(h.a)(\"div\",Object(g.b)({},v,{class:`${v.class} plyr__menu`.trim(),hidden:\"\"}));i.appendChild(n.call(this,\"settings\",{\"aria-haspopup\":!0,\"aria-controls\":`plyr-settings-${e.id}`,\"aria-expanded\":!1}));const r=Object(h.a)(\"div\",{class:\"plyr__menu__container\",id:`plyr-settings-${e.id}`,hidden:\"\"}),a=Object(h.a)(\"div\"),s=Object(h.a)(\"div\",{id:`plyr-settings-${e.id}-home`}),o=Object(h.a)(\"div\",{role:\"menu\"});s.appendChild(o),a.appendChild(s),this.elements.settings.panels.home=s,this.config.settings.forEach(n=>{const i=Object(h.a)(\"button\",Object(g.b)(Object(h.c)(this.config.selectors.buttons.settings),{type:\"button\",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:\"menuitem\",\"aria-haspopup\":!0,hidden:\"\"}));t.call(this,i,n),Object(d.b)(i,\"click\",()=>{m.call(this,n,!1)});const r=Object(h.a)(\"span\",null,p.a.get(n,this.config)),s=Object(h.a)(\"span\",{class:this.config.classNames.menu.value});s.innerHTML=e[n],r.appendChild(s),i.appendChild(r),o.appendChild(i);const l=Object(h.a)(\"div\",{id:`plyr-settings-${e.id}-${n}`,hidden:\"\"}),c=Object(h.a)(\"button\",{type:\"button\",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});c.appendChild(Object(h.a)(\"span\",{\"aria-hidden\":!0},p.a.get(n,this.config))),c.appendChild(Object(h.a)(\"span\",{class:this.config.classNames.hidden},p.a.get(\"menuBack\",this.config))),Object(d.b)(l,\"keydown\",e=>{37===e.which&&(e.preventDefault(),e.stopPropagation(),m.call(this,\"home\",!0))},!1),Object(d.b)(c,\"click\",()=>{m.call(this,\"home\",!1)}),l.appendChild(c),l.appendChild(Object(h.a)(\"div\",{role:\"menu\"})),a.appendChild(l),this.elements.settings.buttons[n]=i,this.elements.settings.panels[n]=l}),r.appendChild(a),i.appendChild(r),y.appendChild(i),this.elements.settings.popup=r,this.elements.settings.menu=i}if(\"pip\"===s&&o.a.pip&&y.appendChild(n.call(this,\"pip\",v)),\"airplay\"===s&&o.a.airplay&&y.appendChild(n.call(this,\"airplay\",v)),\"download\"===s){const e=Object(g.b)({},v,{element:\"a\",href:this.download,target:\"_blank\"}),{download:t}=this.config.urls;!f.a.url(t)&&this.isEmbed&&Object(g.b)(e,{icon:`logo-${this.provider}`,label:this.provider}),y.appendChild(n.call(this,\"download\",e))}\"fullscreen\"===s&&y.appendChild(n.call(this,\"fullscreen\",v))}),this.isHTML5&&l.call(this,s.a.getQualityOptions.call(this)),u.call(this),y},inject(){if(this.config.loadSprite){const e=b.getIconUrl.call(this);e.cors&&Object(m.a)(e.url,\"sprite-plyr\")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;f.a.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),f.a.element(this.config.controls)||f.a.string(this.config.controls)?e=this.config.controls:(e=b.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:a.a.getLabel.call(this)}),n=!1);const i=e=>{let n=e;return Object.entries(t).forEach(([e,t])=>{n=Object(y.e)(n,`{${e}}`,t)}),n};let r;if(n&&(f.a.string(this.config.controls)?e=i(e):f.a.element(e)&&(e.innerHTML=i(e.innerHTML))),f.a.string(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),f.a.element(r)||(r=this.elements.container),r[f.a.element(e)?\"insertAdjacentElement\":\"insertAdjacentHTML\"](\"afterbegin\",e),f.a.element(this.elements.controls)||b.findElements.call(this),!f.a.empty(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;Object.defineProperty(e,\"pressed\",{enumerable:!0,get:()=>Object(h.f)(e,t),set(n=!1){Object(h.n)(e,t,n)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(t=>{f.a.array(t)||f.a.nodeList(t)?Array.from(t).filter(Boolean).forEach(e):e(t)})}if(u.a.isEdge&&Object(l.a)(r),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,n=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,i=h.e.call(this,n);Array.from(i).forEach(e=>{Object(h.n)(e,this.config.classNames.hidden,!1),Object(h.n)(e,this.config.classNames.tooltip,!0)})}}};t.a=b},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return cloneDeep}),n.d(t,\"c\",function(){return getDeep}),n.d(t,\"b\",function(){return extend});var i=n(0);function cloneDeep(e){return JSON.parse(JSON.stringify(e))}function getDeep(e,t){return t.split(\".\").reduce((e,t)=>e&&e[t],e)}function extend(e={},...t){if(!t.length)return e;const n=t.shift();return i.a.object(n)?(Object.keys(n).forEach(t=>{i.a.object(n[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),extend(e[t],n[t])):Object.assign(e,{[t]:n[t]})}),extend(e,...t)):e}},function(e,t,n){\"use strict\";var i=n(16),r=n(7),a=n(1),s=n(0);const o={\"audio/ogg\":\"vorbis\",\"audio/wav\":\"1\",\"video/webm\":\"vp8, vorbis\",\"video/mp4\":\"avc1.42E01E, mp4a.40.2\",\"video/ogg\":\"theora\"},l={audio:\"canPlayType\"in document.createElement(\"audio\"),video:\"canPlayType\"in document.createElement(\"video\"),check(e,t,n){const i=r.a.isIPhone&&n&&l.playsinline,a=l[e]||\"html5\"!==t;return{api:a,ui:a&&l.rangeInput&&(\"video\"!==e||!r.a.isIPhone||i)}},pip:!(r.a.isIPhone||!s.a.function(Object(a.a)(\"video\").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Object(a.a)(\"video\").disablePictureInPicture)),airplay:s.a.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:\"playsInline\"in document.createElement(\"video\"),mime(e){if(s.a.empty(e))return!1;const[t]=e.split(\"/\");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(o).includes(n)&&(n+=`; codecs=\"${o[e]}\"`);try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,\"\"))}catch(e){return!1}},textTracks:\"textTracks\"in document.createElement(\"video\"),rangeInput:(()=>{const e=document.createElement(\"input\");return e.type=\"range\",\"range\"===e.type})(),touch:\"ontouchstart\"in document.documentElement,transitions:!1!==i.b,reducedMotion:\"matchMedia\"in window&&window.matchMedia(\"(prefers-reduced-motion)\").matches};t.a=l},function(e,t,n){\"use strict\";var i=n(11),r=n(3),a=n(5),s=n(7),o=n(1),l=n(2),c=n(8),u=n(0),h=n(22);const d={addStyleHook(){Object(o.n)(this.elements.container,this.config.selectors.container.replace(\".\",\"\"),!0),Object(o.n)(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute(\"controls\",\"\"):this.media.removeAttribute(\"controls\")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void d.toggleNativeControls.call(this,!0);u.a.element(this.elements.controls)||(r.a.inject.call(this),this.listeners.controls()),d.toggleNativeControls.call(this),this.isHTML5&&i.a.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,r.a.updateVolume.call(this),r.a.timeUpdate.call(this),d.checkPlaying.call(this),Object(o.n)(this.elements.container,this.config.classNames.pip.supported,a.a.pip&&this.isHTML5&&this.isVideo),Object(o.n)(this.elements.container,this.config.classNames.airplay.supported,a.a.airplay&&this.isHTML5),Object(o.n)(this.elements.container,this.config.classNames.isIos,s.a.isIos),Object(o.n)(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{l.f.call(this,this.media,\"ready\")},0),d.setTitle.call(this),this.poster&&d.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&r.a.durationUpdate.call(this)},setTitle(){let e=c.a.get(\"play\",this.config);if(u.a.string(this.config.title)&&!u.a.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute(\"aria-label\",e)}),this.isEmbed){const e=o.d.call(this,\"iframe\");if(!u.a.element(e))return;const t=u.a.empty(this.config.title)?\"video\":this.config.title,n=c.a.get(\"frameTitle\",this.config);e.setAttribute(\"title\",n.replace(\"{title}\",t))}},togglePoster(e){Object(o.n)(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error(\"Poster already set\")):(this.media.setAttribute(\"poster\",e),l.d.call(this).then(()=>Object(h.a)(e)).catch(t=>{throw e===this.poster&&d.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw new Error(\"setPoster cancelled by later call to setPoster\")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:\"\"}),d.togglePoster.call(this,!0),e)))},checkPlaying(e){Object(o.n)(this.elements.container,this.config.classNames.playing,this.playing),Object(o.n)(this.elements.container,this.config.classNames.paused,this.paused),Object(o.n)(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing})}),u.a.event(e)&&\"timeupdate\"===e.type||d.toggleControls.call(this)},checkLoading(e){this.loading=[\"stalled\",\"waiting\"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Object(o.n)(this.elements.container,this.config.classNames.loading,this.loading),d.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}}};t.a=d},function(e,t,n){\"use strict\";const i={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes(\"Edge\"),isWebkit:\"WebkitAppearance\"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};t.a=i},function(e,t,n){\"use strict\";var i=n(0),r=n(4),a=n(10);const s={pip:\"PIP\",airplay:\"AirPlay\",html5:\"HTML5\",vimeo:\"Vimeo\",youtube:\"YouTube\"},o={get(e=\"\",t={}){if(i.a.empty(e)||i.a.empty(t))return\"\";let n=Object(r.c)(t.i18n,e);if(i.a.empty(n))return Object.keys(s).includes(e)?s[e]:\"\";const o={\"{seektime}\":t.seekTime,\"{title}\":t.title};return Object.entries(o).forEach(([e,t])=>{n=Object(a.e)(n,e,t)}),n}};t.a=o},function(e,t,n){\"use strict\";n.d(t,\"d\",function(){return validateRatio}),n.d(t,\"b\",function(){return reduceAspectRatio}),n.d(t,\"a\",function(){return getAspectRatio}),n.d(t,\"c\",function(){return setAspectRatio});var i=n(0);function validateRatio(e){if(!(i.a.array(e)||i.a.string(e)&&e.includes(\":\")))return!1;return(i.a.array(e)?e:e.split(\":\")).map(Number).every(i.a.number)}function reduceAspectRatio(e){if(!i.a.array(e)||!e.every(i.a.number))return null;const[t,n]=e,r=(e,t)=>0===t?e:r(t,e%t),a=r(t,n);return[t/a,n/a]}function getAspectRatio(e){const t=e=>validateRatio(e)?e.split(\":\").map(Number):null;let n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!i.a.empty(this.embed)&&i.a.array(this.embed.ratio)&&({ratio:n}=this.embed),null===n&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;n=reduceAspectRatio([e,t])}return n}function setAspectRatio(e){if(!this.isVideo)return{};const t=getAspectRatio.call(this,e),[n,r]=i.a.array(t)?t:[0,0],a=100/n*r;if(this.elements.wrapper.style.paddingBottom=`${a}%`,this.isVimeo&&this.supported.ui){const e=240,t=(e-a)/(e/50);this.media.style.transform=`translateY(-${t}%)`}else this.isHTML5&&this.elements.wrapper.classList.toggle(this.config.classNames.videoFixedRatio,null!==t);return{padding:a,ratio:t}}},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return generateId}),n.d(t,\"a\",function(){return format}),n.d(t,\"d\",function(){return getPercentage}),n.d(t,\"e\",function(){return replaceAll}),n.d(t,\"h\",function(){return toTitleCase}),n.d(t,\"g\",function(){return toCamelCase}),n.d(t,\"f\",function(){return stripHTML}),n.d(t,\"c\",function(){return getHTML});var i=n(0);function generateId(e){return`${e}-${Math.floor(1e4*Math.random())}`}function format(e,...t){return i.a.empty(e)?e:e.toString().replace(/{(\\d+)}/g,(e,n)=>t[n].toString())}function getPercentage(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}function replaceAll(e=\"\",t=\"\",n=\"\"){return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\\]/\\\\])/g,\"\\\\$1\"),\"g\"),n.toString())}function toTitleCase(e=\"\"){return e.toString().replace(/\\w\\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}function toCamelCase(e=\"\"){let t=e.toString();return(t=function toPascalCase(e=\"\"){let t=e.toString();return replaceAll(t=toTitleCase(t=replaceAll(t=replaceAll(t,\"-\",\" \"),\"_\",\" \")),\" \",\"\")}(t)).charAt(0).toLowerCase()+t.slice(1)}function stripHTML(e){const t=document.createDocumentFragment(),n=document.createElement(\"div\");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}function getHTML(e){const t=document.createElement(\"div\");return t.appendChild(e),t.innerHTML}},function(e,t,n){\"use strict\";var i=n(3),r=n(5),a=n(17),s=n(7),o=n(1),l=n(2),c=n(14),u=n(8),h=n(0),d=n(10),p=n(15);const f={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!r.a.textTracks)return void(h.a.array(this.config.controls)&&this.config.controls.includes(\"settings\")&&this.config.settings.includes(\"captions\")&&i.a.setCaptionsMenu.call(this));if(h.a.element(this.elements.captions)||(this.elements.captions=Object(o.a)(\"div\",Object(o.c)(this.config.selectors.captions)),Object(o.g)(this.elements.captions,this.elements.wrapper)),s.a.isIE&&window.URL){const e=this.media.querySelectorAll(\"track\");Array.from(e).forEach(e=>{const t=e.getAttribute(\"src\"),n=Object(p.b)(t);null!==n&&n.hostname!==window.location.href.hostname&&[\"http:\",\"https:\"].includes(n.protocol)&&Object(c.a)(t,\"blob\").then(t=>{e.setAttribute(\"src\",window.URL.createObjectURL(t))}).catch(()=>{Object(o.j)(e)})})}const e=navigator.languages||[navigator.language||navigator.userLanguage||\"en\"],t=Object(a.b)(e.map(e=>e.split(\"-\")[0]));let n=(this.storage.get(\"language\")||this.config.captions.language||\"auto\").toLowerCase();\"auto\"===n&&([n]=t);let u=this.storage.get(\"captions\");if(h.a.boolean(u)||({active:u}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:u,language:n,languages:t}),this.isHTML5){const e=this.config.captions.update?\"addtrack removetrack\":\"removetrack\";l.b.call(this,this.media.textTracks,e,f.update.bind(this))}setTimeout(f.update.bind(this),0)},update(){const e=f.getTracks.call(this,!0),{active:t,language:n,meta:r,currentTrackNode:a}=this.captions,s=Boolean(e.find(e=>e.language===n));this.isHTML5&&this.isVideo&&e.filter(e=>!r.get(e)).forEach(e=>{this.debug.log(\"Track added\",e),r.set(e,{default:\"showing\"===e.mode}),e.mode=\"hidden\",l.b.call(this,e,\"cuechange\",()=>f.updateCues.call(this))}),(s&&this.language!==n||!e.includes(a))&&(f.setLanguage.call(this,n),f.toggle.call(this,t&&s)),Object(o.n)(this.elements.container,this.config.classNames.captions.enabled,!h.a.empty(e)),(this.config.controls||[]).includes(\"settings\")&&this.config.settings.includes(\"captions\")&&i.a.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,r=this.config.classNames.captions.active,a=h.a.nullOrUndefined(e)?!n:e;if(a!==n){if(t||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!t){const e=f.getTracks.call(this),t=f.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void f.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),Object(o.n)(this.elements.container,r,a),this.captions.toggled=a,i.a.updateSetting.call(this,\"captions\"),l.f.call(this,this.media,a?\"captionsenabled\":\"captionsdisabled\")}},set(e,t=!0){const n=f.getTracks.call(this);if(-1!==e)if(h.a.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const r=n[e],{language:a}=r||{};this.captions.currentTrackNode=r,i.a.updateSetting.call(this,\"captions\"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),l.f.call(this,this.media,\"languagechange\")}f.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&f.updateCues.call(this)}else this.debug.warn(\"Track not found\",e);else this.debug.warn(\"Invalid caption argument\",e);else f.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!h.a.string(e))return void this.debug.warn(\"Invalid language argument\",e);const n=e.toLowerCase();this.captions.language=n;const i=f.getTracks.call(this),r=f.findTrack.call(this,[n]);f.set.call(this,i.indexOf(r),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(e=>[\"captions\",\"subtitles\"].includes(e.kind))},findTrack(e,t=!1){const n=f.getTracks.call(this),i=e=>Number((this.captions.meta.get(e)||{}).default),r=Array.from(n).sort((e,t)=>i(t)-i(e));let a;return e.every(e=>!(a=r.find(t=>t.language===e))),a||(t?r[0]:void 0)},getCurrentTrack(){return f.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!h.a.track(t)&&r.a.textTracks&&this.captions.toggled&&(t=f.getCurrentTrack.call(this)),h.a.track(t)?h.a.empty(t.label)?h.a.empty(t.language)?u.a.get(\"enabled\",this.config):e.language.toUpperCase():t.label:u.a.get(\"disabled\",this.config)},updateCues(e){if(!this.supported.ui)return;if(!h.a.element(this.elements.captions))return void this.debug.warn(\"No captions element to render to\");if(!h.a.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn(\"updateCues: Invalid input\",e);let t=e;if(!t){const e=f.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map(e=>e.getCueAsHTML()).map(d.c)}const n=t.map(e=>e.trim()).join(\"\\n\");if(n!==this.elements.captions.innerHTML){Object(o.b)(this.elements.captions);const e=Object(o.a)(\"span\",Object(o.c)(this.config.selectors.caption));e.innerHTML=n,this.elements.captions.appendChild(e),l.f.call(this,this.media,\"cuechange\")}}};t.a=f},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return i}),n.d(t,\"c\",function(){return r}),n.d(t,\"a\",function(){return getProviderByUrl});const i={html5:\"html5\",youtube:\"youtube\",vimeo:\"vimeo\"},r={audio:\"audio\",video:\"video\"};function getProviderByUrl(e){return/^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtube-nocookie\\.com|youtu\\.?be)\\/.+$/.test(e)?i.youtube:/^https?:\\/\\/player.vimeo.com\\/video\\/\\d{0,9}(?=\\b|\\/)/.test(e)?i.vimeo:null}},function(e,t,n){\n/*!\n * jQuery JavaScript Library v3.6.0\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright OpenJS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2021-03-02T17:08Z\n */\n!function(t,n){\"use strict\";\"object\"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return n(e)}:n(t)}(\"undefined\"!=typeof window?window:this,function(e,t){\"use strict\";var n=[],i=Object.getPrototypeOf,r=n.slice,a=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},s=n.push,o=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,h=u.toString,d=h.call(Object),p={},f=function isFunction(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},m=function isWindow(e){return null!=e&&e===e.window},g=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function DOMEval(e,t,n){var i,r,a=(n=n||g).createElement(\"script\");if(a.text=e,t)for(i in y)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,r);n.head.appendChild(a).parentNode.removeChild(a)}function toType(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[c.call(e)]||\"object\":typeof e}var v=function(e,t){return new v.fn.init(e,t)};function isArrayLike(e){var t=!!e&&\"length\"in e&&e.length,n=toType(e);return!f(e)&&!m(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&t>0&&t-1 in e)}v.fn=v.prototype={jquery:\"3.6.0\",constructor:v,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return v.each(this,e)},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},v.extend=v.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[o]||{},o++),\"object\"==typeof s||f(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)i=e[t],\"__proto__\"!==t&&s!==i&&(c&&i&&(v.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[t],a=r&&!Array.isArray(n)?[]:r||v.isPlainObject(n)?n:{},r=!1,s[t]=v.extend(c,a,i)):void 0!==i&&(s[t]=i));return s},v.extend({expando:\"jQuery\"+(\"3.6.0\"+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==c.call(e))&&(!(t=i(e))||\"function\"==typeof(n=u.call(t,\"constructor\")&&t.constructor)&&h.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){DOMEval(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(isArrayLike(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(isArrayLike(Object(e))?v.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;r<a;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,s=0,o=[];if(isArrayLike(e))for(i=e.length;s<i;s++)null!=(r=t(e[s],s,n))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&o.push(r);return a(o)},guid:1,support:p}),\"function\"==typeof Symbol&&(v.fn[Symbol.iterator]=n[Symbol.iterator]),v.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});var b=\n/*!\n   * Sizzle CSS Selector Engine v2.3.6\n   * https://sizzlejs.com/\n   *\n   * Copyright JS Foundation and other contributors\n   * Released under the MIT license\n   * https://js.foundation/\n   *\n   * Date: 2021-02-16\n   */\nfunction(e){var t,n,i,r,a,s,o,l,c,u,h,d,p,f,m,g,y,v,b,x=\"sizzle\"+1*new Date,_=e.document,w=0,T=0,M=createCache(),S=createCache(),E=createCache(),A=createCache(),C=function(e,t){return e===t&&(h=!0),0},L={}.hasOwnProperty,P=[],R=P.pop,D=P.push,O=P.push,k=P.slice,I=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},N=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",B=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",V=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+B+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",z=\"\\\\[\"+B+\"*(\"+V+\")(?:\"+B+\"*([*^$|!~]?=)\"+B+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+V+\"))|)\"+B+\"*\\\\]\",F=\":(\"+V+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+z+\")*)|.*)\\\\)|)\",H=new RegExp(B+\"+\",\"g\"),U=new RegExp(\"^\"+B+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+B+\"+$\",\"g\"),j=new RegExp(\"^\"+B+\"*,\"+B+\"*\"),G=new RegExp(\"^\"+B+\"*([>+~]|\"+B+\")\"+B+\"*\"),W=new RegExp(B+\"|>\"),q=new RegExp(F),X=new RegExp(\"^\"+V+\"$\"),Y={ID:new RegExp(\"^#(\"+V+\")\"),CLASS:new RegExp(\"^\\\\.(\"+V+\")\"),TAG:new RegExp(\"^(\"+V+\"|[*])\"),ATTR:new RegExp(\"^\"+z),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+B+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+B+\"*(?:([+-]|)\"+B+\"*(\\\\d+)|))\"+B+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+N+\")$\",\"i\"),needsContext:new RegExp(\"^\"+B+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+B+\"*((?:-\\\\d)?\\\\d*)\"+B+\"*\\\\)|)(?=[^-]|$)\",\"i\")},$=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Q=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+B+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,re=function(e,t){return t?\"\\0\"===e?\"\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},ae=function(){d()},se=addCombinator(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{O.apply(P=k.call(_.childNodes),_.childNodes),P[_.childNodes.length].nodeType}catch(e){O={apply:P.length?function(e,t){D.apply(e,k.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function Sizzle(e,t,i,r){var a,o,c,u,h,f,y,v=t&&t.ownerDocument,_=t?t.nodeType:9;if(i=i||[],\"string\"!=typeof e||!e||1!==_&&9!==_&&11!==_)return i;if(!r&&(d(t),t=t||p,m)){if(11!==_&&(h=Q.exec(e)))if(a=h[1]){if(9===_){if(!(c=t.getElementById(a)))return i;if(c.id===a)return i.push(c),i}else if(v&&(c=v.getElementById(a))&&b(t,c)&&c.id===a)return i.push(c),i}else{if(h[2])return O.apply(i,t.getElementsByTagName(e)),i;if((a=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&!A[e+\" \"]&&(!g||!g.test(e))&&(1!==_||\"object\"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===_&&(W.test(e)||G.test(e))){for((v=ee.test(e)&&testContext(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute(\"id\"))?u=u.replace(ie,re):t.setAttribute(\"id\",u=x)),o=(f=s(e)).length;o--;)f[o]=(u?\"#\"+u:\":scope\")+\" \"+toSelector(f[o]);y=f.join(\",\")}try{return O.apply(i,v.querySelectorAll(y)),i}catch(t){A(e,!0)}finally{u===x&&t.removeAttribute(\"id\")}}}return l(e.replace(U,\"$1\"),t,i,r)}function createCache(){var e=[];return function cache(t,n){return e.push(t+\" \")>i.cacheLength&&delete cache[e.shift()],cache[t+\" \"]=n}}function markFunction(e){return e[x]=!0,e}function assert(e){var t=p.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function addHandle(e,t){for(var n=e.split(\"|\"),r=n.length;r--;)i.attrHandle[n[r]]=t}function siblingCheck(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function createInputPseudo(e){return function(t){return\"input\"===t.nodeName.toLowerCase()&&t.type===e}}function createButtonPseudo(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function createDisabledPseudo(e){return function(t){return\"form\"in t?t.parentNode&&!1===t.disabled?\"label\"in t?\"label\"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:\"label\"in t&&t.disabled===e}}function createPositionalPseudo(e){return markFunction(function(t){return t=+t,markFunction(function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))})})}function testContext(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=Sizzle.support={},a=Sizzle.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!$.test(t||n&&n.nodeName||\"HTML\")},d=Sizzle.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:_;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!a(p),_!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener(\"unload\",ae,!1):r.attachEvent&&r.attachEvent(\"onunload\",ae)),n.scope=assert(function(e){return f.appendChild(e).appendChild(p.createElement(\"div\")),void 0!==e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),n.attributes=assert(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),n.getElementsByTagName=assert(function(e){return e.appendChild(p.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),n.getElementsByClassName=K.test(p.getElementsByClassName),n.getById=assert(function(e){return f.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode(\"id\");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode(\"id\"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode(\"id\"))&&n.value===e)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if(\"*\"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(n.qsa=K.test(p.querySelectorAll))&&(assert(function(e){var t;f.appendChild(e).innerHTML=\"<a id='\"+x+\"'></a><select id='\"+x+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&g.push(\"[*^$]=\"+B+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||g.push(\"\\\\[\"+B+\"*(?:value|\"+N+\")\"),e.querySelectorAll(\"[id~=\"+x+\"-]\").length||g.push(\"~=\"),(t=p.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||g.push(\"\\\\[\"+B+\"*name\"+B+\"*=\"+B+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||g.push(\":checked\"),e.querySelectorAll(\"a#\"+x+\"+*\").length||g.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),g.push(\"[\\\\r\\\\n\\\\f]\")}),assert(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=p.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&g.push(\"name\"+B+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&g.push(\":enabled\",\":disabled\"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&g.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),g.push(\",.*:\")})),(n.matchesSelector=K.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&assert(function(e){n.disconnectedMatch=v.call(e,\"*\"),v.call(e,\"[s!='']:x\"),y.push(\"!=\",F)}),g=g.length&&new RegExp(g.join(\"|\")),y=y.length&&new RegExp(y.join(\"|\")),t=K.test(f.compareDocumentPosition),b=t||K.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return h=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==p||e.ownerDocument==_&&b(_,e)?-1:t==p||t.ownerDocument==_&&b(_,t)?1:u?I(u,e)-I(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e==p?-1:t==p?1:r?-1:a?1:u?I(u,e)-I(u,t):0;if(r===a)return siblingCheck(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?siblingCheck(s[i],o[i]):s[i]==_?-1:o[i]==_?1:0},p):p},Sizzle.matches=function(e,t){return Sizzle(e,null,null,t)},Sizzle.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&m&&!A[t+\" \"]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){A(t,!0)}return Sizzle(t,p,null,[e]).length>0},Sizzle.contains=function(e,t){return(e.ownerDocument||e)!=p&&d(e),b(e,t)},Sizzle.attr=function(e,t){(e.ownerDocument||e)!=p&&d(e);var r=i.attrHandle[t.toLowerCase()],a=r&&L.call(i.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==a?a:n.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},Sizzle.escape=function(e){return(e+\"\").replace(ie,re)},Sizzle.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},Sizzle.uniqueSort=function(e){var t,i=[],r=0,a=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(C),h){for(;t=e[a++];)t===e[a]&&(r=i.push(a));for(;r--;)e.splice(i[r],1)}return u=null,e},r=Sizzle.getText=function(e){var t,n=\"\",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:Y,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||Sizzle.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&Sizzle.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&q.test(n)&&(t=s(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=M[e+\" \"];return t||(t=new RegExp(\"(^|\"+B+\")\"+e+\"(\"+B+\"|$)\"))&&M(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(i){var r=Sizzle.attr(i,e);return null==r?\"!=\"===t:!t||(r+=\"\",\"=\"===t?r===n:\"!=\"===t?r!==n:\"^=\"===t?n&&0===r.indexOf(n):\"*=\"===t?n&&r.indexOf(n)>-1:\"$=\"===t?n&&r.slice(-n.length)===n:\"~=\"===t?(\" \"+r.replace(H,\" \")+\" \").indexOf(n)>-1:\"|=\"===t&&(r===n||r.slice(0,n.length+1)===n+\"-\"))}},CHILD:function(e,t,n,i,r){var a=\"nth\"!==e.slice(0,3),s=\"last\"!==e.slice(-4),o=\"of-type\"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,p,f,m=a!==s?\"nextSibling\":\"previousSibling\",g=t.parentNode,y=o&&t.nodeName.toLowerCase(),v=!l&&!o,b=!1;if(g){if(a){for(;m;){for(d=t;d=d[m];)if(o?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m=\"only\"===e&&!f&&\"nextSibling\"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(b=(p=(c=(u=(h=(d=g)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[w,p,b];break}}else if(v&&(b=p=(c=(u=(h=(d=t)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===b)for(;(d=++p&&d&&d[m]||(b=p=0)||f.pop())&&((o?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[w,b]),d!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||Sizzle.error(\"unsupported pseudo: \"+e);return r[x]?r(t):r.length>1?(n=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?markFunction(function(e,n){for(var i,a=r(e,t),s=a.length;s--;)e[i=I(e,a[s])]=!(n[i]=a[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:markFunction(function(e){var t=[],n=[],i=o(e.replace(U,\"$1\"));return i[x]?markFunction(function(e,t,n,r){for(var a,s=i(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}}),has:markFunction(function(e){return function(t){return Sizzle(e,t).length>0}}),contains:markFunction(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}}),lang:markFunction(function(e){return X.test(e||\"\")||Sizzle.error(\"unsupported lang: \"+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return(n=n.toLowerCase())===e||0===n.indexOf(e+\"-\")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(e,t){return[t-1]}),eq:createPositionalPseudo(function(e,t,n){return[n<0?n+t:n]}),even:createPositionalPseudo(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:createPositionalPseudo(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:createPositionalPseudo(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:createPositionalPseudo(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=createInputPseudo(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=createButtonPseudo(t);function setFilters(){}function toSelector(e){for(var t=0,n=e.length,i=\"\";t<n;t++)i+=e[t].value;return i}function addCombinator(e,t,n){var i=t.dir,r=t.next,a=r||i,s=n&&\"parentNode\"===a,o=T++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,l){var c,u,h,d=[w,o];if(l){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=(h=t[x]||(t[x]={}))[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[a])&&c[0]===w&&c[1]===o)return d[2]=c[2];if(u[a]=d,d[2]=e(t,n,l))return!0}return!1}}function elementMatcher(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function condense(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,c=null!=t;o<l;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),c&&t.push(o)));return s}function setMatcher(e,t,n,i,r,a){return i&&!i[x]&&(i=setMatcher(i)),r&&!r[x]&&(r=setMatcher(r,a)),markFunction(function(a,s,o,l){var c,u,h,d=[],p=[],f=s.length,m=a||function multipleContexts(e,t,n){for(var i=0,r=t.length;i<r;i++)Sizzle(e,t[i],n);return n}(t||\"*\",o.nodeType?[o]:o,[]),g=!e||!a&&t?m:condense(m,d,e,o,l),y=n?r||(a?e:f||i)?[]:s:g;if(n&&n(g,y,o,l),i)for(c=condense(y,p),i(c,[],o,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(g[p[u]]=h));if(a){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(g[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?I(a,h):d[u])>-1&&(a[c]=!(s[c]=h))}}else y=condense(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):O.apply(s,y)})}function matcherFromTokens(e){for(var t,n,r,a=e.length,s=i.relative[e[0].type],o=s||i.relative[\" \"],l=s?1:0,u=addCombinator(function(e){return e===t},o,!0),h=addCombinator(function(e){return I(t,e)>-1},o,!0),d=[function(e,n,i){var r=!s&&(i||n!==c)||((t=n).nodeType?u(e,n,i):h(e,n,i));return t=null,r}];l<a;l++)if(n=i.relative[e[l].type])d=[addCombinator(elementMatcher(d),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[x]){for(r=++l;r<a&&!i.relative[e[r].type];r++);return setMatcher(l>1&&elementMatcher(d),l>1&&toSelector(e.slice(0,l-1).concat({value:\" \"===e[l-2].type?\"*\":\"\"})).replace(U,\"$1\"),n,l<r&&matcherFromTokens(e.slice(l,r)),r<a&&matcherFromTokens(e=e.slice(r)),r<a&&toSelector(e))}d.push(n)}return elementMatcher(d)}return setFilters.prototype=i.filters=i.pseudos,i.setFilters=new setFilters,s=Sizzle.tokenize=function(e,t){var n,r,a,s,o,l,c,u=S[e+\" \"];if(u)return t?0:u.slice(0);for(o=e,l=[],c=i.preFilter;o;){for(s in n&&!(r=j.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=G.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(U,\" \")}),o=o.slice(n.length)),i.filter)!(r=Y[s].exec(o))||c[s]&&!(r=c[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?Sizzle.error(e):S(e,l).slice(0)},o=Sizzle.compile=function(e,t){var n,r=[],a=[],o=E[e+\" \"];if(!o){for(t||(t=s(e)),n=t.length;n--;)(o=matcherFromTokens(t[n]))[x]?r.push(o):a.push(o);(o=E(e,function matcherFromGroupMatchers(e,t){var n=t.length>0,r=e.length>0,a=function(a,s,o,l,u){var h,f,g,y=0,v=\"0\",b=a&&[],x=[],_=c,T=a||r&&i.find.TAG(\"*\",u),M=w+=null==_?1:Math.random()||.1,S=T.length;for(u&&(c=s==p||s||u);v!==S&&null!=(h=T[v]);v++){if(r&&h){for(f=0,s||h.ownerDocument==p||(d(h),o=!m);g=e[f++];)if(g(h,s||p,o)){l.push(h);break}u&&(w=M)}n&&((h=!g&&h)&&y--,a&&b.push(h))}if(y+=v,n&&v!==y){for(f=0;g=t[f++];)g(b,x,s,o);if(a){if(y>0)for(;v--;)b[v]||x[v]||(x[v]=R.call(l));x=condense(x)}O.apply(l,x),u&&!a&&x.length>0&&y+t.length>1&&Sizzle.uniqueSort(l)}return u&&(w=M,c=_),b};return n?markFunction(a):a}(a,r))).selector=e}return o},l=Sizzle.select=function(e,t,n,r){var a,l,c,u,h,d=\"function\"==typeof e&&e,p=!r&&s(e=d.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&\"ID\"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=Y.needsContext.test(e)?0:l.length;a--&&(c=l[a],!i.relative[u=c.type]);)if((h=i.find[u])&&(r=h(c.matches[0].replace(te,ne),ee.test(l[0].type)&&testContext(t.parentNode)||t))){if(l.splice(a,1),!(e=r.length&&toSelector(l)))return O.apply(n,r),n;break}}return(d||o(e,p))(r,t,!m,n,!t||ee.test(e)&&testContext(t.parentNode)||t),n},n.sortStable=x.split(\"\").sort(C).join(\"\")===x,n.detectDuplicates=!!h,d(),n.sortDetached=assert(function(e){return 1&e.compareDocumentPosition(p.createElement(\"fieldset\"))}),assert(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||addHandle(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),n.attributes&&assert(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||addHandle(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),assert(function(e){return null==e.getAttribute(\"disabled\")})||addHandle(N,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),Sizzle}(e);v.find=b,v.expr=b.selectors,v.expr[\":\"]=v.expr.pseudos,v.uniqueSort=v.unique=b.uniqueSort,v.text=b.getText,v.isXMLDoc=b.isXML,v.contains=b.contains,v.escapeSelector=b.escape;var x=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&v(e).is(n))break;i.push(e)}return i},_=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},w=v.expr.match.needsContext;function nodeName(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var T=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function winnow(e,t,n){return f(t)?v.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?v.grep(e,function(e){return e===t!==n}):\"string\"!=typeof t?v.grep(e,function(e){return o.call(t,e)>-1!==n}):v.filter(t,e,n)}v.filter=function(e,t,n){var i=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===i.nodeType?v.find.matchesSelector(i,e)?[i]:[]:v.find.matches(e,v.grep(t,function(e){return 1===e.nodeType}))},v.fn.extend({find:function(e){var t,n,i=this.length,r=this;if(\"string\"!=typeof e)return this.pushStack(v(e).filter(function(){for(t=0;t<i;t++)if(v.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)v.find(e,r[t],n);return i>1?v.uniqueSort(n):n},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,\"string\"==typeof e&&w.test(e)?v(e):e||[],!1).length}});var M,S=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(v.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||M,\"string\"==typeof e){if(!(i=\"<\"===e[0]&&\">\"===e[e.length-1]&&e.length>=3?[null,e,null]:S.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof v?t[0]:t,v.merge(this,v.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),T.test(i[1])&&v.isPlainObject(t))for(i in t)f(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=g.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==n.ready?n.ready(e):e(v):v.makeArray(e,this)}).prototype=v.fn,M=v(g);var E=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function sibling(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.fn.extend({has:function(e){var t=v(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(v.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,a=[],s=\"string\"!=typeof e&&v(e);if(!w.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&v.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?v.uniqueSort(a):a)},index:function(e){return e?\"string\"==typeof e?o.call(v(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,\"parentNode\")},parentsUntil:function(e,t,n){return x(e,\"parentNode\",n)},next:function(e){return sibling(e,\"nextSibling\")},prev:function(e){return sibling(e,\"previousSibling\")},nextAll:function(e){return x(e,\"nextSibling\")},prevAll:function(e){return x(e,\"previousSibling\")},nextUntil:function(e,t,n){return x(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return x(e,\"previousSibling\",n)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(nodeName(e,\"template\")&&(e=e.content||e),v.merge([],e.childNodes))}},function(e,t){v.fn[e]=function(n,i){var r=v.map(this,t,n);return\"Until\"!==e.slice(-5)&&(i=n),i&&\"string\"==typeof i&&(r=v.filter(i,r)),this.length>1&&(A[e]||v.uniqueSort(r),E.test(e)&&r.reverse()),this.pushStack(r)}});var C=/[^\\x20\\t\\r\\n\\f]+/g;function Identity(e){return e}function Thrower(e){throw e}function adoptValue(e,t,n,i){var r;try{e&&f(r=e.promise)?r.call(e).done(t).fail(n):e&&f(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}v.Callbacks=function(e){e=\"string\"==typeof e?function createOptions(e){var t={};return v.each(e.match(C)||[],function(e,n){t[n]=!0}),t}(e):v.extend({},e);var t,n,i,r,a=[],s=[],o=-1,l=function(){for(r=r||e.once,i=t=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:\"\")},c={add:function(){return a&&(n&&!t&&(o=a.length-1,s.push(n)),function add(t){v.each(t,function(t,n){f(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&\"string\"!==toType(n)&&add(n)})}(arguments),n&&!t&&l()),this},remove:function(){return v.each(arguments,function(e,t){for(var n;(n=v.inArray(t,a,n))>-1;)a.splice(n,1),n<=o&&o--}),this},has:function(e){return e?v.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n=\"\",this},disabled:function(){return!a},lock:function(){return r=s=[],n||t||(a=n=\"\"),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},v.extend({Deferred:function(t){var n=[[\"notify\",\"progress\",v.Callbacks(\"memory\"),v.Callbacks(\"memory\"),2],[\"resolve\",\"done\",v.Callbacks(\"once memory\"),v.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",v.Callbacks(\"once memory\"),v.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return v.Deferred(function(t){v.each(n,function(n,i){var r=f(e[i[4]])&&e[i[4]];a[i[1]](function(){var e=r&&r.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+\"With\"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){var a=0;function resolve(t,n,i,r){return function(){var s=this,o=arguments,l=function(){var e,l;if(!(t<a)){if((e=i.apply(s,o))===n.promise())throw new TypeError(\"Thenable self-resolution\");l=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,f(l)?r?l.call(e,resolve(a,n,Identity,r),resolve(a,n,Thrower,r)):(a++,l.call(e,resolve(a,n,Identity,r),resolve(a,n,Thrower,r),resolve(a,n,Identity,n.notifyWith))):(i!==Identity&&(s=void 0,o=[e]),(r||n.resolveWith)(s,o))}},c=r?l:function(){try{l()}catch(e){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(e,c.stackTrace),t+1>=a&&(i!==Thrower&&(s=void 0,o=[e]),n.rejectWith(s,o))}};t?c():(v.Deferred.getStackHook&&(c.stackTrace=v.Deferred.getStackHook()),e.setTimeout(c))}}return v.Deferred(function(e){n[0][3].add(resolve(0,e,f(r)?r:Identity,e.notifyWith)),n[1][3].add(resolve(0,e,f(t)?t:Identity)),n[2][3].add(resolve(0,e,f(i)?i:Thrower))}).promise()},promise:function(e){return null!=e?v.extend(e,r):r}},a={};return v.each(n,function(e,t){var s=t[2],o=t[5];r[t[1]]=s.add,o&&s.add(function(){i=o},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),s.add(t[3].fire),a[t[0]]=function(){return a[t[0]+\"With\"](this===a?void 0:this,arguments),this},a[t[0]+\"With\"]=s.fireWith}),r.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),a=r.call(arguments),s=v.Deferred(),o=function(e){return function(n){i[e]=this,a[e]=arguments.length>1?r.call(arguments):n,--t||s.resolveWith(i,a)}};if(t<=1&&(adoptValue(e,s.done(o(n)).resolve,s.reject,!t),\"pending\"===s.state()||f(a[n]&&a[n].then)))return s.then();for(;n--;)adoptValue(a[n],o(n),s.reject);return s.promise()}});var L=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&L.test(t.name)&&e.console.warn(\"jQuery.Deferred exception: \"+t.message,t.stack,n)},v.readyException=function(t){e.setTimeout(function(){throw t})};var P=v.Deferred();function completed(){g.removeEventListener(\"DOMContentLoaded\",completed),e.removeEventListener(\"load\",completed),v.ready()}v.fn.ready=function(e){return P.then(e).catch(function(e){v.readyException(e)}),this},v.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||P.resolveWith(g,[v]))}}),v.ready.then=P.then,\"complete\"===g.readyState||\"loading\"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(v.ready):(g.addEventListener(\"DOMContentLoaded\",completed),e.addEventListener(\"load\",completed));var R=function(e,t,n,i,r,a,s){var o=0,l=e.length,c=null==n;if(\"object\"===toType(n))for(o in r=!0,n)R(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,f(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(v(e),n)})),t))for(;o<l;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:c?t.call(e):l?t(e[0],n):a},D=/^-ms-/,O=/-([a-z])/g;function fcamelCase(e,t){return t.toUpperCase()}function camelCase(e){return e.replace(D,\"ms-\").replace(O,fcamelCase)}var k=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Data(){this.expando=v.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(e){var t=e[this.expando];return t||(t={},k(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if(\"string\"==typeof t)r[camelCase(t)]=n;else for(i in t)r[camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][camelCase(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(camelCase):(t=camelCase(t))in i?[t]:t.match(C)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||v.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!v.isEmptyObject(t)}};var I=new Data,N=new Data,B=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,V=/[A-Z]/g;function dataAttr(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i=\"data-\"+t.replace(V,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(i))){try{n=function getData(e){return\"true\"===e||\"false\"!==e&&(\"null\"===e?null:e===+e+\"\"?+e:B.test(e)?JSON.parse(e):e)}(n)}catch(e){}N.set(e,t,n)}else n=void 0;return n}v.extend({hasData:function(e){return N.hasData(e)||I.hasData(e)},data:function(e,t,n){return N.access(e,t,n)},removeData:function(e,t){N.remove(e,t)},_data:function(e,t,n){return I.access(e,t,n)},_removeData:function(e,t){I.remove(e,t)}}),v.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=N.get(a),1===a.nodeType&&!I.get(a,\"hasDataAttrs\"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf(\"data-\")&&(i=camelCase(i.slice(5)),dataAttr(a,i,r[i]));I.set(a,\"hasDataAttrs\",!0)}return r}return\"object\"==typeof e?this.each(function(){N.set(this,e)}):R(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=N.get(a,e))?n:void 0!==(n=dataAttr(a,e))?n:void 0;this.each(function(){N.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){N.remove(this,e)})}}),v.extend({queue:function(e,t,n){var i;if(e)return t=(t||\"fx\")+\"queue\",i=I.get(e,t),n&&(!i||Array.isArray(n)?i=I.access(e,t,v.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||\"fx\";var n=v.queue(e,t),i=n.length,r=n.shift(),a=v._queueHooks(e,t);\"inprogress\"===r&&(r=n.shift(),i--),r&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete a.stop,r.call(e,function(){v.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return I.get(e,n)||I.access(e,n,{empty:v.Callbacks(\"once memory\").add(function(){I.remove(e,[t+\"queue\",n])})})}}),v.fn.extend({queue:function(e,t){var n=2;return\"string\"!=typeof e&&(t=e,e=\"fx\",n--),arguments.length<n?v.queue(this[0],e):void 0===t?this:this.each(function(){var n=v.queue(this,e,t);v._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==n[0]&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,i=1,r=v.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for(\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";s--;)(n=I.get(a[s],e+\"queueHooks\"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var z=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,F=new RegExp(\"^(?:([+-])=|)(\"+z+\")([a-z%]*)$\",\"i\"),H=[\"Top\",\"Right\",\"Bottom\",\"Left\"],U=g.documentElement,j=function(e){return v.contains(e.ownerDocument,e)},G={composed:!0};U.getRootNode&&(j=function(e){return v.contains(e.ownerDocument,e)||e.getRootNode(G)===e.ownerDocument});var W=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&j(e)&&\"none\"===v.css(e,\"display\")};function adjustCSS(e,t,n,i){var r,a,s=20,o=i?function(){return i.cur()}:function(){return v.css(e,t,\"\")},l=o(),c=n&&n[3]||(v.cssNumber[t]?\"\":\"px\"),u=e.nodeType&&(v.cssNumber[t]||\"px\"!==c&&+l)&&F.exec(v.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)v.style(e,t,u+c),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),u/=a;u*=2,v.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var q={};function getDefaultDisplay(e){var t,n=e.ownerDocument,i=e.nodeName,r=q[i];return r||(t=n.body.appendChild(n.createElement(i)),r=v.css(t,\"display\"),t.parentNode.removeChild(t),\"none\"===r&&(r=\"block\"),q[i]=r,r)}function showHide(e,t){for(var n,i,r=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(n=i.style.display,t?(\"none\"===n&&(r[a]=I.get(i,\"display\")||null,r[a]||(i.style.display=\"\")),\"\"===i.style.display&&W(i)&&(r[a]=getDefaultDisplay(i))):\"none\"!==n&&(r[a]=\"none\",I.set(i,\"display\",n)));for(a=0;a<s;a++)null!=r[a]&&(e[a].style.display=r[a]);return e}v.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){W(this)?v(this).show():v(this).hide()})}});var X=/^(?:checkbox|radio)$/i,Y=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,$=/^$|^module$|\\/(?:java|ecma)script/i;!function(){var e=g.createDocumentFragment().appendChild(g.createElement(\"div\")),t=g.createElement(\"input\");t.setAttribute(\"type\",\"radio\"),t.setAttribute(\"checked\",\"checked\"),t.setAttribute(\"name\",\"t\"),e.appendChild(t),p.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML=\"<textarea>x</textarea>\",p.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML=\"<option></option>\",p.option=!!e.lastChild}();var Z={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function getAll(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):void 0!==e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&nodeName(e,t)?v.merge([e],n):n}function setGlobalEval(e,t){for(var n=0,i=e.length;n<i;n++)I.set(e[n],\"globalEval\",!t||I.get(t[n],\"globalEval\"))}Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td,p.option||(Z.optgroup=Z.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var J=/<|&#?\\w+;/;function buildFragment(e,t,n,i,r){for(var a,s,o,l,c,u,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if(\"object\"===toType(a))v.merge(d,a.nodeType?[a]:a);else if(J.test(a)){for(s=s||h.appendChild(t.createElement(\"div\")),o=(Y.exec(a)||[\"\",\"\"])[1].toLowerCase(),l=Z[o]||Z._default,s.innerHTML=l[1]+v.htmlPrefilter(a)+l[2],u=l[0];u--;)s=s.lastChild;v.merge(d,s.childNodes),(s=h.firstChild).textContent=\"\"}else d.push(t.createTextNode(a));for(h.textContent=\"\",p=0;a=d[p++];)if(i&&v.inArray(a,i)>-1)r&&r.push(a);else if(c=j(a),s=getAll(h.appendChild(a),\"script\"),c&&setGlobalEval(s),n)for(u=0;a=s[u++];)$.test(a.type||\"\")&&n.push(a);return h}var K=/^([^.]*)(?:\\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function expectSync(e,t){return e===function safeActiveElement(){try{return g.activeElement}catch(e){}}()==(\"focus\"===t)}function on(e,t,n,i,r,a){var s,o;if(\"object\"==typeof t){for(o in\"string\"!=typeof n&&(i=i||n,n=void 0),t)on(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&(\"string\"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=returnFalse;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return v().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=v.guid++)),e.each(function(){v.event.add(this,t,r,i,n)})}function leverageNative(e,t,n){n?(I.set(e,t,!1),v.event.add(e,t,{namespace:!1,handler:function(e){var i,a,s=I.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(v.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=r.call(arguments),I.set(this,t,s),i=n(this,t),this[t](),s!==(a=I.get(this,t))||i?I.set(this,t,!1):a={},s!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else s.length&&(I.set(this,t,{value:v.event.trigger(v.extend(s[0],v.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===I.get(e,t)&&v.event.add(e,t,returnTrue)}v.event={global:{},add:function(e,t,n,i,r){var a,s,o,l,c,u,h,d,p,f,m,g=I.get(e);if(k(e))for(n.handler&&(n=(a=n).handler,r=a.selector),r&&v.find.matchesSelector(U,r),n.guid||(n.guid=v.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==v&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||\"\").match(C)||[\"\"]).length;c--;)p=m=(o=K.exec(t[c])||[])[1],f=(o[2]||\"\").split(\".\").sort(),p&&(h=v.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=v.event.special[p]||{},u=v.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&v.expr.match.needsContext.test(r),namespace:f.join(\".\")},a),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),v.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,s,o,l,c,u,h,d,p,f,m,g=I.hasData(e)&&I.get(e);if(g&&(l=g.events)){for(c=(t=(t||\"\").match(C)||[\"\"]).length;c--;)if(p=m=(o=K.exec(t[c])||[])[1],f=(o[2]||\"\").split(\".\").sort(),p){for(h=v.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],o=o[2]&&new RegExp(\"(^|\\\\.)\"+f.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),s=a=d.length;a--;)u=d[a],!r&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&(\"**\"!==i||!u.selector)||(d.splice(a,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,g.handle)||v.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)v.event.remove(e,p+t[c],n,i,!0);v.isEmptyObject(l)&&I.remove(e,\"handle events\")}},dispatch:function(e){var t,n,i,r,a,s,o=new Array(arguments.length),l=v.event.fix(e),c=(I.get(this,\"events\")||Object.create(null))[l.type]||[],u=v.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=v.event.handlers.call(this,l,c),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(i=((v.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,a,s,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!(\"click\"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(\"click\"!==e.type||!0!==c.disabled)){for(a=[],s={},n=0;n<l;n++)void 0===s[r=(i=t[n]).selector+\" \"]&&(s[r]=i.needsContext?v(r,this).index(c)>-1:v.find(r,this,null,[c]).length),s[r]&&a.push(i);a.length&&o.push({elem:c,handlers:a})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(v.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[v.expando]?e:new v.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return X.test(t.type)&&t.click&&nodeName(t,\"input\")&&leverageNative(t,\"click\",returnTrue),!1},trigger:function(e){var t=this||e;return X.test(t.type)&&t.click&&nodeName(t,\"input\")&&leverageNative(t,\"click\"),!0},_default:function(e){var t=e.target;return X.test(t.type)&&t.click&&nodeName(t,\"input\")&&I.get(t,\"click\")||nodeName(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},v.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?returnTrue:returnFalse,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){v.event.special[e]={setup:function(){return leverageNative(this,e,expectSync),!1},trigger:function(){return leverageNative(this,e),!0},_default:function(){return!0},delegateType:t}}),v.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||v.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),v.fn.extend({on:function(e,t,n,i){return on(this,e,t,n,i)},one:function(e,t,n,i){return on(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=returnFalse),this.each(function(){v.event.remove(this,e,n,t)})}});var Q=/<script|<style|<link/i,ee=/checked\\s*(?:[^=]|=\\s*.checked.)/i,te=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function manipulationTarget(e,t){return nodeName(e,\"table\")&&nodeName(11!==t.nodeType?t:t.firstChild,\"tr\")&&v(e).children(\"tbody\")[0]||e}function disableScript(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function restoreScript(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function cloneCopyEvent(e,t){var n,i,r,a,s,o;if(1===t.nodeType){if(I.hasData(e)&&(o=I.get(e).events))for(r in I.remove(t,\"handle events\"),o)for(n=0,i=o[r].length;n<i;n++)v.event.add(t,r,o[r][n]);N.hasData(e)&&(a=N.access(e),s=v.extend({},a),N.set(t,s))}}function fixInput(e,t){var n=t.nodeName.toLowerCase();\"input\"===n&&X.test(e.type)?t.checked=e.checked:\"input\"!==n&&\"textarea\"!==n||(t.defaultValue=e.defaultValue)}function domManip(e,t,n,i){t=a(t);var r,s,o,l,c,u,h=0,d=e.length,m=d-1,g=t[0],y=f(g);if(y||d>1&&\"string\"==typeof g&&!p.checkClone&&ee.test(g))return e.each(function(r){var a=e.eq(r);y&&(t[0]=g.call(this,r,a.html())),domManip(a,t,n,i)});if(d&&(s=(r=buildFragment(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(l=(o=v.map(getAll(r,\"script\"),disableScript)).length;h<d;h++)c=r,h!==m&&(c=v.clone(c,!0,!0),l&&v.merge(o,getAll(c,\"script\"))),n.call(e[h],c,h);if(l)for(u=o[o.length-1].ownerDocument,v.map(o,restoreScript),h=0;h<l;h++)c=o[h],$.test(c.type||\"\")&&!I.access(c,\"globalEval\")&&v.contains(u,c)&&(c.src&&\"module\"!==(c.type||\"\").toLowerCase()?v._evalUrl&&!c.noModule&&v._evalUrl(c.src,{nonce:c.nonce||c.getAttribute(\"nonce\")},u):DOMEval(c.textContent.replace(te,\"\"),c,u))}return e}function remove(e,t,n){for(var i,r=t?v.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||v.cleanData(getAll(i)),i.parentNode&&(n&&j(i)&&setGlobalEval(getAll(i,\"script\")),i.parentNode.removeChild(i));return e}v.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(!0),l=j(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(s=getAll(o),i=0,r=(a=getAll(e)).length;i<r;i++)fixInput(a[i],s[i]);if(t)if(n)for(a=a||getAll(e),s=s||getAll(o),i=0,r=a.length;i<r;i++)cloneCopyEvent(a[i],s[i]);else cloneCopyEvent(e,o);return(s=getAll(o,\"script\")).length>0&&setGlobalEval(s,!l&&getAll(e,\"script\")),o},cleanData:function(e){for(var t,n,i,r=v.event.special,a=0;void 0!==(n=e[a]);a++)if(k(n)){if(t=n[I.expando]){if(t.events)for(i in t.events)r[i]?v.event.remove(n,i):v.removeEvent(n,i,t.handle);n[I.expando]=void 0}n[N.expando]&&(n[N.expando]=void 0)}}}),v.fn.extend({detach:function(e){return remove(this,e,!0)},remove:function(e){return remove(this,e)},text:function(e){return R(this,function(e){return void 0===e?v.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return domManip(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,e).appendChild(e)})},prepend:function(){return domManip(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return domManip(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return domManip(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(getAll(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return R(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Q.test(e)&&!Z[(Y.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=v.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(v.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return domManip(this,arguments,function(t){var n=this.parentNode;v.inArray(this,e)<0&&(v.cleanData(getAll(this)),n&&n.replaceChild(t,this))},e)}}),v.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){v.fn[e]=function(e){for(var n,i=[],r=v(e),a=r.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),v(r[o])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var ne=new RegExp(\"^(\"+z+\")(?!px)[a-z%]+$\",\"i\"),ie=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},re=function(e,t,n){var i,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=a[r];return i},ae=new RegExp(H.join(\"|\"),\"i\");function curCSS(e,t,n){var i,r,a,s,o=e.style;return(n=n||ie(e))&&(\"\"!==(s=n.getPropertyValue(t)||n[t])||j(e)||(s=v.style(e,t)),!p.pixelBoxStyles()&&ne.test(s)&&ae.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+\"\":s}function addGetHookIf(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function computeStyleTests(){if(l){o.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",U.appendChild(o).appendChild(l);var a=e.getComputedStyle(l);t=\"1%\"!==a.top,s=12===roundPixelMeasures(a.marginLeft),l.style.right=\"60%\",r=36===roundPixelMeasures(a.right),n=36===roundPixelMeasures(a.width),l.style.position=\"absolute\",i=12===roundPixelMeasures(l.offsetWidth/3),U.removeChild(o),l=null}}function roundPixelMeasures(e){return Math.round(parseFloat(e))}var t,n,i,r,a,s,o=g.createElement(\"div\"),l=g.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",p.clearCloneStyle=\"content-box\"===l.style.backgroundClip,v.extend(p,{boxSizingReliable:function(){return computeStyleTests(),n},pixelBoxStyles:function(){return computeStyleTests(),r},pixelPosition:function(){return computeStyleTests(),t},reliableMarginLeft:function(){return computeStyleTests(),s},scrollboxSize:function(){return computeStyleTests(),i},reliableTrDimensions:function(){var t,n,i,r;return null==a&&(t=g.createElement(\"table\"),n=g.createElement(\"tr\"),i=g.createElement(\"div\"),t.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",n.style.cssText=\"border:1px solid\",n.style.height=\"1px\",i.style.height=\"9px\",i.style.display=\"block\",U.appendChild(t).appendChild(n).appendChild(i),r=e.getComputedStyle(n),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,U.removeChild(t)),a}}))}();var se=[\"Webkit\",\"Moz\",\"ms\"],oe=g.createElement(\"div\").style,le={};function finalPropName(e){var t=v.cssProps[e]||le[e];return t||(e in oe?e:le[e]=function vendorPropName(e){for(var t=e[0].toUpperCase()+e.slice(1),n=se.length;n--;)if((e=se[n]+t)in oe)return e}(e)||e)}var ce=/^(none|table(?!-c[ea]).+)/,ue=/^--/,he={position:\"absolute\",visibility:\"hidden\",display:\"block\"},de={letterSpacing:\"0\",fontWeight:\"400\"};function setPositiveNumber(e,t,n){var i=F.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||\"px\"):t}function boxModelAdjustment(e,t,n,i,r,a){var s=\"width\"===t?1:0,o=0,l=0;if(n===(i?\"border\":\"content\"))return 0;for(;s<4;s+=2)\"margin\"===n&&(l+=v.css(e,n+H[s],!0,r)),i?(\"content\"===n&&(l-=v.css(e,\"padding\"+H[s],!0,r)),\"margin\"!==n&&(l-=v.css(e,\"border\"+H[s]+\"Width\",!0,r))):(l+=v.css(e,\"padding\"+H[s],!0,r),\"padding\"!==n?l+=v.css(e,\"border\"+H[s]+\"Width\",!0,r):o+=v.css(e,\"border\"+H[s]+\"Width\",!0,r));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l}function getWidthOrHeight(e,t,n){var i=ie(e),r=(!p.boxSizingReliable()||n)&&\"border-box\"===v.css(e,\"boxSizing\",!1,i),a=r,s=curCSS(e,t,i),o=\"offset\"+t[0].toUpperCase()+t.slice(1);if(ne.test(s)){if(!n)return s;s=\"auto\"}return(!p.boxSizingReliable()&&r||!p.reliableTrDimensions()&&nodeName(e,\"tr\")||\"auto\"===s||!parseFloat(s)&&\"inline\"===v.css(e,\"display\",!1,i))&&e.getClientRects().length&&(r=\"border-box\"===v.css(e,\"boxSizing\",!1,i),(a=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+boxModelAdjustment(e,t,n||(r?\"border\":\"content\"),a,i,s)+\"px\"}function Tween(e,t,n,i,r){return new Tween.prototype.init(e,t,n,i,r)}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=camelCase(t),l=ue.test(t),c=e.style;if(l||(t=finalPropName(o)),s=v.cssHooks[t]||v.cssHooks[o],void 0===n)return s&&\"get\"in s&&void 0!==(r=s.get(e,!1,i))?r:c[t];\"string\"===(a=typeof n)&&(r=F.exec(n))&&r[1]&&(n=adjustCSS(e,t,r),a=\"number\"),null!=n&&n==n&&(\"number\"!==a||l||(n+=r&&r[3]||(v.cssNumber[o]?\"\":\"px\")),p.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(c[t]=\"inherit\"),s&&\"set\"in s&&void 0===(n=s.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,a,s,o=camelCase(t);return ue.test(t)||(t=finalPropName(o)),(s=v.cssHooks[t]||v.cssHooks[o])&&\"get\"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=curCSS(e,t,i)),\"normal\"===r&&t in de&&(r=de[t]),\"\"===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),v.each([\"height\",\"width\"],function(e,t){v.cssHooks[t]={get:function(e,n,i){if(n)return!ce.test(v.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?getWidthOrHeight(e,t,i):re(e,he,function(){return getWidthOrHeight(e,t,i)})},set:function(e,n,i){var r,a=ie(e),s=!p.scrollboxSize()&&\"absolute\"===a.position,o=(s||i)&&\"border-box\"===v.css(e,\"boxSizing\",!1,a),l=i?boxModelAdjustment(e,t,i,o,a):0;return o&&s&&(l-=Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-boxModelAdjustment(e,t,\"border\",!1,a)-.5)),l&&(r=F.exec(n))&&\"px\"!==(r[3]||\"px\")&&(e.style[t]=n,n=v.css(e,t)),setPositiveNumber(0,n,l)}}}),v.cssHooks.marginLeft=addGetHookIf(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(curCSS(e,\"marginLeft\"))||e.getBoundingClientRect().left-re(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),v.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){v.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a=\"string\"==typeof n?n.split(\" \"):[n];i<4;i++)r[e+H[i]+t]=a[i]||a[i-2]||a[0];return r}},\"margin\"!==e&&(v.cssHooks[e+t].set=setPositiveNumber)}),v.fn.extend({css:function(e,t){return R(this,function(e,t,n){var i,r,a={},s=0;if(Array.isArray(t)){for(i=ie(e),r=t.length;s<r;s++)a[t[s]]=v.css(e,t[s],!1,i);return a}return void 0!==n?v.style(e,t,n):v.css(e,t)},e,t,arguments.length>1)}}),v.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||v.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(v.cssNumber[n]?\"\":\"px\")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=v.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):1!==e.elem.nodeType||!v.cssHooks[e.prop]&&null==e.elem.style[finalPropName(e.prop)]?e.elem[e.prop]=e.now:v.style(e.elem,e.prop,e.now+e.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},v.fx=Tween.prototype.init,v.fx.step={};var pe,fe,me=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function schedule(){fe&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(schedule):e.setTimeout(schedule,v.fx.interval),v.fx.tick())}function createFxNow(){return e.setTimeout(function(){pe=void 0}),pe=Date.now()}function genFx(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r[\"margin\"+(n=H[i])]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}function createTween(e,t,n){for(var i,r=(Animation.tweeners[t]||[]).concat(Animation.tweeners[\"*\"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function Animation(e,t,n){var i,r,a=0,s=Animation.prefilters.length,o=v.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=pe||createFxNow(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),a=0,s=c.tweens.length;a<s;a++)c.tweens[a].run(i);return o.notifyWith(e,[c,i,n]),i<1&&s?n:(s||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},n),originalProperties:t,originalOptions:n,startTime:pe||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var i=v.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),u=c.props;for(!function propFilter(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=camelCase(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=v.cssHooks[i])&&\"expand\"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);a<s;a++)if(i=Animation.prefilters[a].call(c,e,u,c.opts))return f(i.stop)&&(v._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return v.map(u,createTween,c),f(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),v.fx.timer(v.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}v.Animation=v.extend(Animation,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return adjustCSS(n.elem,e,F.exec(t),n),n}]},tweener:function(e,t){f(e)?(t=e,e=[\"*\"]):e=e.match(C);for(var n,i=0,r=e.length;i<r;i++)n=e[i],Animation.tweeners[n]=Animation.tweeners[n]||[],Animation.tweeners[n].unshift(t)},prefilters:[function defaultPrefilter(e,t,n){var i,r,a,s,o,l,c,u,h=\"width\"in t||\"height\"in t,d=this,p={},f=e.style,m=e.nodeType&&W(e),g=I.get(e,\"fxshow\");for(i in n.queue||(null==(s=v._queueHooks(e,\"fx\")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,v.queue(e,\"fx\").length||s.empty.fire()})})),t)if(r=t[i],me.test(r)){if(delete t[i],a=a||\"toggle\"===r,r===(m?\"hide\":\"show\")){if(\"show\"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||v.style(e,i)}if((l=!v.isEmptyObject(t))||!v.isEmptyObject(p))for(i in h&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=I.get(e,\"display\")),\"none\"===(u=v.css(e,\"display\"))&&(c?u=c:(showHide([e],!0),c=e.style.display||c,u=v.css(e,\"display\"),showHide([e]))),(\"inline\"===u||\"inline-block\"===u&&null!=c)&&\"none\"===v.css(e,\"float\")&&(l||(d.done(function(){f.display=c}),null==c&&(u=f.display,c=\"none\"===u?\"\":u)),f.display=\"inline-block\")),n.overflow&&(f.overflow=\"hidden\",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(g?\"hidden\"in g&&(m=g.hidden):g=I.access(e,\"fxshow\",{display:c}),a&&(g.hidden=!m),m&&showHide([e],!0),d.done(function(){for(i in m||showHide([e]),I.remove(e,\"fxshow\"),p)v.style(e,i,p[i])})),l=createTween(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?Animation.prefilters.unshift(e):Animation.prefilters.push(e)}}),v.speed=function(e,t,n){var i=e&&\"object\"==typeof e?v.extend({},e):{complete:n||!n&&t||f(e)&&e,duration:e,easing:n&&t||t&&!f(t)&&t};return v.fx.off?i.duration=0:\"number\"!=typeof i.duration&&(i.duration in v.fx.speeds?i.duration=v.fx.speeds[i.duration]:i.duration=v.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue=\"fx\"),i.old=i.complete,i.complete=function(){f(i.old)&&i.old.call(this),i.queue&&v.dequeue(this,i.queue)},i},v.fn.extend({fadeTo:function(e,t,n,i){return this.filter(W).css(\"opacity\",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=v.isEmptyObject(e),a=v.speed(t,n,i),s=function(){var t=Animation(this,v.extend({},e),a);(r||I.get(this,\"finish\"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return\"string\"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,r=null!=e&&e+\"queueHooks\",a=v.timers,s=I.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ge.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));!t&&n||v.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||\"fx\"),this.each(function(){var t,n=I.get(this),i=n[e+\"queue\"],r=n[e+\"queueHooks\"],a=v.timers,s=i?i.length:0;for(n.finish=!0,v.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),v.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=v.fn[t];v.fn[t]=function(e,i,r){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(genFx(t,!0),e,i,r)}}),v.each({slideDown:genFx(\"show\"),slideUp:genFx(\"hide\"),slideToggle:genFx(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){v.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),v.timers=[],v.fx.tick=function(){var e,t=0,n=v.timers;for(pe=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||v.fx.stop(),pe=void 0},v.fx.timer=function(e){v.timers.push(e),v.fx.start()},v.fx.interval=13,v.fx.start=function(){fe||(fe=!0,schedule())},v.fx.stop=function(){fe=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(t,n){return t=v.fx&&v.fx.speeds[t]||t,n=n||\"fx\",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=g.createElement(\"input\"),t=g.createElement(\"select\").appendChild(g.createElement(\"option\"));e.type=\"checkbox\",p.checkOn=\"\"!==e.value,p.optSelected=t.selected,(e=g.createElement(\"input\")).value=\"t\",e.type=\"radio\",p.radioValue=\"t\"===e.value}();var ye,ve=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return R(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})}}),v.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?v.prop(e,t,n):(1===a&&v.isXMLDoc(e)||(r=v.attrHooks[t.toLowerCase()]||(v.expr.match.bool.test(t)?ye:void 0)),void 0!==n?null===n?void v.removeAttr(e,t):r&&\"set\"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+\"\"),n):r&&\"get\"in r&&null!==(i=r.get(e,t))?i:null==(i=v.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&\"radio\"===t&&nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(C);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),ye={set:function(e,t,n){return!1===t?v.removeAttr(e,n):e.setAttribute(n,n),n}},v.each(v.expr.match.bool.source.match(/\\w+/g),function(e,t){var n=ve[t]||v.find.attr;ve[t]=function(e,t,i){var r,a,s=t.toLowerCase();return i||(a=ve[s],ve[s]=r,r=null!=n(e,t,i)?s:null,ve[s]=a),r}});var be=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;function stripAndCollapse(e){return(e.match(C)||[]).join(\" \")}function getClass(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function classesToArray(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(C)||[]}v.fn.extend({prop:function(e,t){return R(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[v.propFix[e]||e]})}}),v.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&v.isXMLDoc(e)||(t=v.propFix[t]||t,r=v.propHooks[t]),void 0!==n?r&&\"set\"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&\"get\"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=v.find.attr(e,\"tabindex\");return t?parseInt(t,10):be.test(e.nodeName)||xe.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:\"htmlFor\",class:\"className\"}}),p.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),v.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){v.propFix[this.toLowerCase()]=this}),v.fn.extend({addClass:function(e){var t,n,i,r,a,s,o,l=0;if(f(e))return this.each(function(t){v(this).addClass(e.call(this,t,getClass(this)))});if((t=classesToArray(e)).length)for(;n=this[l++];)if(r=getClass(n),i=1===n.nodeType&&\" \"+stripAndCollapse(r)+\" \"){for(s=0;a=t[s++];)i.indexOf(\" \"+a+\" \")<0&&(i+=a+\" \");r!==(o=stripAndCollapse(i))&&n.setAttribute(\"class\",o)}return this},removeClass:function(e){var t,n,i,r,a,s,o,l=0;if(f(e))return this.each(function(t){v(this).removeClass(e.call(this,t,getClass(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((t=classesToArray(e)).length)for(;n=this[l++];)if(r=getClass(n),i=1===n.nodeType&&\" \"+stripAndCollapse(r)+\" \"){for(s=0;a=t[s++];)for(;i.indexOf(\" \"+a+\" \")>-1;)i=i.replace(\" \"+a+\" \",\" \");r!==(o=stripAndCollapse(i))&&n.setAttribute(\"class\",o)}return this},toggleClass:function(e,t){var n=typeof e,i=\"string\"===n||Array.isArray(e);return\"boolean\"==typeof t&&i?t?this.addClass(e):this.removeClass(e):f(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,getClass(this),t),t)}):this.each(function(){var t,r,a,s;if(i)for(r=0,a=v(this),s=classesToArray(e);t=s[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&\"boolean\"!==n||((t=getClass(this))&&I.set(this,\"__className__\",t),this.setAttribute&&this.setAttribute(\"class\",t||!1===e?\"\":I.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,i=0;for(t=\" \"+e+\" \";n=this[i++];)if(1===n.nodeType&&(\" \"+stripAndCollapse(getClass(n))+\" \").indexOf(t)>-1)return!0;return!1}});var _e=/\\r/g;v.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=f(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,v(this).val()):e)?r=\"\":\"number\"==typeof r?r+=\"\":Array.isArray(r)&&(r=v.map(r,function(e){return null==e?\"\":e+\"\"})),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&\"set\"in t&&void 0!==t.set(this,r,\"value\")||(this.value=r))})):r?(t=v.valHooks[r.type]||v.valHooks[r.nodeName.toLowerCase()])&&\"get\"in t&&void 0!==(n=t.get(r,\"value\"))?n:\"string\"==typeof(n=r.value)?n.replace(_e,\"\"):null==n?\"\":n:void 0}}),v.extend({valHooks:{option:{get:function(e){var t=v.find.attr(e,\"value\");return null!=t?t:stripAndCollapse(v.text(e))}},select:{get:function(e){var t,n,i,r=e.options,a=e.selectedIndex,s=\"select-one\"===e.type,o=s?null:[],l=s?a+1:r.length;for(i=a<0?l:s?a:0;i<l;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!nodeName(n.parentNode,\"optgroup\"))){if(t=v(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=v.makeArray(t),s=r.length;s--;)((i=r[s]).selected=v.inArray(v.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),v.each([\"radio\",\"checkbox\"],function(){v.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=v.inArray(v(e).val(),t)>-1}},p.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),p.focusin=\"onfocusin\"in e;var we=/^(?:focusinfocus|focusoutblur)$/,Te=function(e){e.stopPropagation()};v.extend(v.event,{trigger:function(t,n,i,r){var a,s,o,l,c,h,d,p,y=[i||g],b=u.call(t,\"type\")?t.type:t,x=u.call(t,\"namespace\")?t.namespace.split(\".\"):[];if(s=p=o=i=i||g,3!==i.nodeType&&8!==i.nodeType&&!we.test(b+v.event.triggered)&&(b.indexOf(\".\")>-1&&(b=(x=b.split(\".\")).shift(),x.sort()),c=b.indexOf(\":\")<0&&\"on\"+b,(t=t[v.expando]?t:new v.Event(b,\"object\"==typeof t&&t)).isTrigger=r?2:3,t.namespace=x.join(\".\"),t.rnamespace=t.namespace?new RegExp(\"(^|\\\\.)\"+x.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:v.makeArray(n,[t]),d=v.event.special[b]||{},r||!d.trigger||!1!==d.trigger.apply(i,n))){if(!r&&!d.noBubble&&!m(i)){for(l=d.delegateType||b,we.test(l+b)||(s=s.parentNode);s;s=s.parentNode)y.push(s),o=s;o===(i.ownerDocument||g)&&y.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=y[a++])&&!t.isPropagationStopped();)p=s,t.type=a>1?l:d.bindType||b,(h=(I.get(s,\"events\")||Object.create(null))[t.type]&&I.get(s,\"handle\"))&&h.apply(s,n),(h=c&&s[c])&&h.apply&&k(s)&&(t.result=h.apply(s,n),!1===t.result&&t.preventDefault());return t.type=b,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),n)||!k(i)||c&&f(i[b])&&!m(i)&&((o=i[c])&&(i[c]=null),v.event.triggered=b,t.isPropagationStopped()&&p.addEventListener(b,Te),i[b](),t.isPropagationStopped()&&p.removeEventListener(b,Te),v.event.triggered=void 0,o&&(i[c]=o)),t.result}},simulate:function(e,t,n){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0});v.event.trigger(i,null,t)}}),v.fn.extend({trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return v.event.trigger(e,t,n,!0)}}),p.focusin||v.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=function(e){v.event.simulate(t,e.target,v.event.fix(e))};v.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=I.access(i,t);r||i.addEventListener(e,n,!0),I.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=I.access(i,t)-1;r?I.access(i,t,r):(i.removeEventListener(e,n,!0),I.remove(i,t))}}});var Me=e.location,Se={guid:Date.now()},Ee=/\\?/;v.parseXML=function(t){var n,i;if(!t||\"string\"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,\"text/xml\")}catch(e){}return i=n&&n.getElementsByTagName(\"parsererror\")[0],n&&!i||v.error(\"Invalid XML: \"+(i?v.map(i.childNodes,function(e){return e.textContent}).join(\"\\n\"):t)),n};var Ae=/\\[\\]$/,Ce=/\\r?\\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function buildParams(e,t,n,i){var r;if(Array.isArray(t))v.each(t,function(t,r){n||Ae.test(e)?i(e,r):buildParams(e+\"[\"+(\"object\"==typeof r&&null!=r?t:\"\")+\"]\",r,n,i)});else if(n||\"object\"!==toType(t))i(e,t);else for(r in t)buildParams(e+\"[\"+r+\"]\",t[r],n,i)}v.param=function(e,t){var n,i=[],r=function(e,t){var n=f(t)?t():t;i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){r(this.name,this.value)});else for(n in e)buildParams(n,e[n],t,r);return i.join(\"&\")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=v.prop(this,\"elements\");return e?v.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!v(this).is(\":disabled\")&&Pe.test(this.nodeName)&&!Le.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var n=v(this).val();return null==n?null:Array.isArray(n)?v.map(n,function(e){return{name:t.name,value:e.replace(Ce,\"\\r\\n\")}}):{name:t.name,value:n.replace(Ce,\"\\r\\n\")}}).get()}});var Re=/%20/g,De=/#.*$/,Oe=/([?&])_=[^&]*/,ke=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Ne=/^\\/\\//,Be={},Ve={},ze=\"*/\".concat(\"*\"),Fe=g.createElement(\"a\");function addToPrefiltersOrTransports(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var i,r=0,a=t.toLowerCase().match(C)||[];if(f(n))for(;i=a[r++];)\"+\"===i[0]?(i=i.slice(1)||\"*\",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,i){var r={},a=e===Ve;function inspect(s){var o;return r[s]=!0,v.each(e[s]||[],function(e,s){var l=s(t,n,i);return\"string\"!=typeof l||a||r[l]?a?!(o=l):void 0:(t.dataTypes.unshift(l),inspect(l),!1)}),o}return inspect(t.dataTypes[0])||!r[\"*\"]&&inspect(\"*\")}function ajaxExtend(e,t){var n,i,r=v.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&v.extend(!0,e,i),e}Fe.href=Me.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Me.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Me.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":ze,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,v.ajaxSettings),t):ajaxExtend(v.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(Be),ajaxTransport:addToPrefiltersOrTransports(Ve),ajax:function(t,n){\"object\"==typeof t&&(n=t,t=void 0),n=n||{};var i,r,a,s,o,l,c,u,h,d,p=v.ajaxSetup({},n),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?v(f):v.event,y=v.Deferred(),b=v.Callbacks(\"once memory\"),x=p.statusCode||{},_={},w={},T=\"canceled\",M={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=ke.exec(a);)s[t[1].toLowerCase()+\" \"]=(s[t[1].toLowerCase()+\" \"]||[]).concat(t[2]);t=s[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)M.always(e[M.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),done(0,t),this}};if(y.promise(M),p.url=((t||p.url||Me.href)+\"\").replace(Ne,Me.protocol+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||\"*\").toLowerCase().match(C)||[\"\"],null==p.crossDomain){l=g.createElement(\"a\");try{l.href=p.url,l.href=l.href,p.crossDomain=Fe.protocol+\"//\"+Fe.host!=l.protocol+\"//\"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=v.param(p.data,p.traditional)),inspectPrefiltersOrTransports(Be,p,n,M),c)return M;for(h in(u=v.event&&p.global)&&0==v.active++&&v.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Ie.test(p.type),r=p.url.replace(De,\"\"),p.hasContent?p.data&&p.processData&&0===(p.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(p.data=p.data.replace(Re,\"+\")):(d=p.url.slice(r.length),p.data&&(p.processData||\"string\"==typeof p.data)&&(r+=(Ee.test(r)?\"&\":\"?\")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Oe,\"$1\"),d=(Ee.test(r)?\"&\":\"?\")+\"_=\"+Se.guid+++d),p.url=r+d),p.ifModified&&(v.lastModified[r]&&M.setRequestHeader(\"If-Modified-Since\",v.lastModified[r]),v.etag[r]&&M.setRequestHeader(\"If-None-Match\",v.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&M.setRequestHeader(\"Content-Type\",p.contentType),M.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+ze+\"; q=0.01\":\"\"):p.accepts[\"*\"]),p.headers)M.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,M,p)||c))return M.abort();if(T=\"abort\",b.add(p.complete),M.done(p.success),M.fail(p.error),i=inspectPrefiltersOrTransports(Ve,p,n,M)){if(M.readyState=1,u&&m.trigger(\"ajaxSend\",[M,p]),c)return M;p.async&&p.timeout>0&&(o=e.setTimeout(function(){M.abort(\"timeout\")},p.timeout));try{c=!1,i.send(_,done)}catch(e){if(c)throw e;done(-1,e)}}else done(-1,\"No Transport\");function done(t,n,s,l){var h,d,g,_,w,T=n;c||(c=!0,o&&e.clearTimeout(o),i=void 0,a=l||\"\",M.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(_=function ajaxHandleResponses(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;\"*\"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+\" \"+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}(p,M,s)),!h&&v.inArray(\"script\",p.dataTypes)>-1&&v.inArray(\"json\",p.dataTypes)<0&&(p.converters[\"text script\"]=function(){}),_=function ajaxConvert(e,t,n,i){var r,a,s,o,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if(\"*\"===a)a=l;else if(\"*\"!==l&&l!==a){if(!(s=c[l+\" \"+a]||c[\"* \"+a]))for(r in c)if((o=r.split(\" \"))[1]===a&&(s=c[l+\" \"+o[0]]||c[\"* \"+o[0]])){!0===s?s=c[r]:!0!==c[r]&&(a=o[0],u.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:\"parsererror\",error:s?e:\"No conversion from \"+l+\" to \"+a}}}return{state:\"success\",data:t}}(p,_,M,h),h?(p.ifModified&&((w=M.getResponseHeader(\"Last-Modified\"))&&(v.lastModified[r]=w),(w=M.getResponseHeader(\"etag\"))&&(v.etag[r]=w)),204===t||\"HEAD\"===p.type?T=\"nocontent\":304===t?T=\"notmodified\":(T=_.state,d=_.data,h=!(g=_.error))):(g=T,!t&&T||(T=\"error\",t<0&&(t=0))),M.status=t,M.statusText=(n||T)+\"\",h?y.resolveWith(f,[d,T,M]):y.rejectWith(f,[M,T,g]),M.statusCode(x),x=void 0,u&&m.trigger(h?\"ajaxSuccess\":\"ajaxError\",[M,p,h?d:g]),b.fireWith(f,[M,T]),u&&(m.trigger(\"ajaxComplete\",[M,p]),--v.active||v.event.trigger(\"ajaxStop\")))}return M},getJSON:function(e,t,n){return v.get(e,t,n,\"json\")},getScript:function(e,t){return v.get(e,void 0,t,\"script\")}}),v.each([\"get\",\"post\"],function(e,t){v[t]=function(e,n,i,r){return f(n)&&(r=r||i,i=n,n=void 0),v.ajax(v.extend({url:e,type:t,dataType:r,data:n,success:i},v.isPlainObject(e)&&e))}}),v.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),v._evalUrl=function(e,t,n){return v.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){v.globalEval(e,t,n)}})},v.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return f(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=f(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(e){return!v.expr.pseudos.visible(e)},v.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var He={0:200,1223:204},Ue=v.ajaxSettings.xhr();p.cors=!!Ue&&\"withCredentials\"in Ue,p.ajax=Ue=!!Ue,v.ajaxTransport(function(t){var n,i;if(p.cors||Ue&&!t.crossDomain)return{send:function(r,a){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r[\"X-Requested-With\"]||(r[\"X-Requested-With\"]=\"XMLHttpRequest\"),r)o.setRequestHeader(s,r[s]);n=function(e){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,\"abort\"===e?o.abort():\"error\"===e?\"number\"!=typeof o.status?a(0,\"error\"):a(o.status,o.statusText):a(He[o.status]||o.status,o.statusText,\"text\"!==(o.responseType||\"text\")||\"string\"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n(\"error\"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){n&&i()})},n=n(\"abort\");try{o.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),v.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),v.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),v.ajaxTransport(\"script\",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=v(\"<script>\").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on(\"load error\",n=function(e){t.remove(),n=null,e&&r(\"error\"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}});var je=[],Ge=/(=)\\?(?=&|$)|\\?\\?/;v.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=je.pop()||v.expando+\"_\"+Se.guid++;return this[e]=!0,e}}),v.ajaxPrefilter(\"json jsonp\",function(t,n,i){var r,a,s,o=!1!==t.jsonp&&(Ge.test(t.url)?\"url\":\"string\"==typeof t.data&&0===(t.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Ge.test(t.data)&&\"data\");if(o||\"jsonp\"===t.dataTypes[0])return r=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ge,\"$1\"+r):!1!==t.jsonp&&(t.url+=(Ee.test(t.url)?\"&\":\"?\")+t.jsonp+\"=\"+r),t.converters[\"script json\"]=function(){return s||v.error(r+\" was not called\"),s[0]},t.dataTypes[0]=\"json\",a=e[r],e[r]=function(){s=arguments},i.always(function(){void 0===a?v(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,je.push(r)),s&&f(a)&&a(s[0]),s=a=void 0}),\"script\"}),p.createHTMLDocument=function(){var e=g.implementation.createHTMLDocument(\"\").body;return e.innerHTML=\"<form></form><form></form>\",2===e.childNodes.length}(),v.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((i=(t=g.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=g.location.href,t.head.appendChild(i)):t=g),r=T.exec(e),a=!n&&[],r?[t.createElement(r[1])]:(r=buildFragment([e],t,a),a&&a.length&&v(a).remove(),v.merge([],r.childNodes)));var i,r,a},v.fn.load=function(e,t,n){var i,r,a,s=this,o=e.indexOf(\" \");return o>-1&&(i=stripAndCollapse(e.slice(o)),e=e.slice(0,o)),f(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(r=\"POST\"),s.length>0&&v.ajax({url:e,type:r||\"GET\",dataType:\"html\",data:t}).done(function(e){a=arguments,s.html(i?v(\"<div>\").append(v.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},v.expr.pseudos.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length},v.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,c=v.css(e,\"position\"),u=v(e),h={};\"static\"===c&&(e.style.position=\"relative\"),o=u.offset(),a=v.css(e,\"top\"),l=v.css(e,\"left\"),(\"absolute\"===c||\"fixed\"===c)&&(a+l).indexOf(\"auto\")>-1?(s=(i=u.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),f(t)&&(t=t.call(e,n,v.extend({},o))),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+r),\"using\"in t?t.using.call(e,h):u.css(h)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){v.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if(\"fixed\"===v.css(i,\"position\"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&\"static\"===v.css(e,\"position\");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=v(e).offset()).top+=v.css(e,\"borderTopWidth\",!0),r.left+=v.css(e,\"borderLeftWidth\",!0))}return{top:t.top-r.top-v.css(i,\"marginTop\",!0),left:t.left-r.left-v.css(i,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&\"static\"===v.css(e,\"position\");)e=e.offsetParent;return e||U})}}),v.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,t){var n=\"pageYOffset\"===t;v.fn[e]=function(i){return R(this,function(e,i,r){var a;if(m(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):e[i]=r},e,i,arguments.length)}}),v.each([\"top\",\"left\"],function(e,t){v.cssHooks[t]=addGetHookIf(p.pixelPosition,function(e,n){if(n)return n=curCSS(e,t),ne.test(n)?v(e).position()[t]+\"px\":n})}),v.each({Height:\"height\",Width:\"width\"},function(e,t){v.each({padding:\"inner\"+e,content:t,\"\":\"outer\"+e},function(n,i){v.fn[i]=function(r,a){var s=arguments.length&&(n||\"boolean\"!=typeof r),o=n||(!0===r||!0===a?\"margin\":\"border\");return R(this,function(t,n,r){var a;return m(t)?0===i.indexOf(\"outer\")?t[\"inner\"+e]:t.document.documentElement[\"client\"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body[\"scroll\"+e],a[\"scroll\"+e],t.body[\"offset\"+e],a[\"offset\"+e],a[\"client\"+e])):void 0===r?v.css(t,n,o):v.style(t,n,r,o)},t,s?r:void 0,s)}})}),v.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,t){v.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var We=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;v.proxy=function(e,t){var n,i,a;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),f(e))return i=r.call(arguments,2),(a=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||v.guid++,a},v.holdReady=function(e){e?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=nodeName,v.isFunction=f,v.isWindow=m,v.camelCase=camelCase,v.type=toType,v.now=Date.now,v.isNumeric=function(e){var t=v.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},v.trim=function(e){return null==e?\"\":(e+\"\").replace(We,\"\")};var qe=e.jQuery,Xe=e.$;return v.noConflict=function(t){return e.$===v&&(e.$=Xe),t&&e.jQuery===v&&(e.jQuery=qe),v},void 0===t&&(e.jQuery=e.$=v),v})},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return fetch});function fetch(e,t=\"text\"){return new Promise((n,i)=>{try{const r=new XMLHttpRequest;if(!(\"withCredentials\"in r))return;r.addEventListener(\"load\",()=>{if(\"text\"===t)try{n(JSON.parse(r.responseText))}catch(e){n(r.responseText)}else n(r.response)}),r.addEventListener(\"error\",()=>{throw new Error(r.status)}),r.open(\"GET\",e,!0),r.responseType=t,r.send()}catch(e){i(e)}})}},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return parseUrl}),n.d(t,\"a\",function(){return buildUrlParams});var i=n(0);function parseUrl(e,t=!0){let n=e;if(t){const e=document.createElement(\"a\");e.href=n,n=e.href}try{return new URL(n)}catch(e){return null}}function buildUrlParams(e){const t=new URLSearchParams;return i.a.object(e)&&Object.entries(e).forEach(([e,n])=>{t.set(e,n)}),t}},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return r}),n.d(t,\"a\",function(){return repaint});var i=n(0);const r=(()=>{const e=document.createElement(\"span\"),t={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"},n=Object.keys(t).find(t=>void 0!==e.style[t]);return!!i.a.string(n)&&t[n]})();function repaint(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}},t)}},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return dedupe}),n.d(t,\"a\",function(){return closest});var i=n(0);function dedupe(e){return i.a.array(e)?e.filter((t,n)=>e.indexOf(t)===n):e}function closest(e,t){return i.a.array(e)&&e.length?e.reduce((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e):null}},function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return r}),n.d(t,\"a\",function(){return formatTime});var i=n(0);const r=e=>Math.trunc(e/60/60%60,10),a=e=>Math.trunc(e/60%60,10),s=e=>Math.trunc(e%60,10);function formatTime(e=0,t=!1,n=!1){if(!i.a.number(e))return formatTime(null,t,n);const o=e=>`0${e}`.slice(-2);let l=r(e);const c=a(e),u=s(e);return l=t||l>0?`${l}:`:\"\",`${n&&e>0?\"-\":\"\"}${l}${o(c)}:${o(u)}`}},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return ri});function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}\n/*!\n * GSAP 3.6.0\n * https://greensock.com\n *\n * @license Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/var i,r,a,s,o,l,c,u,h,d={autoSleep:120,force3D:\"auto\",nullTargetWarn:1,units:{lineHeight:\"\"}},p={duration:.5,overwrite:!1,delay:0},f=1e-8,m=2*Math.PI,g=m/4,y=0,v=Math.sqrt,b=Math.cos,x=Math.sin,_=function _isString(e){return\"string\"==typeof e},w=function _isFunction(e){return\"function\"==typeof e},T=function _isNumber(e){return\"number\"==typeof e},M=function _isUndefined(e){return void 0===e},S=function _isObject(e){return\"object\"==typeof e},E=function _isNotFalse(e){return!1!==e},A=function _windowExists(){return\"undefined\"!=typeof window},C=function _isFuncOrString(e){return w(e)||_(e)},L=\"function\"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},P=Array.isArray,R=/(?:-?\\.?\\d|\\.)+/gi,D=/[-+=.]*\\d+[.e\\-+]*\\d*[e\\-+]*\\d*/g,O=/[-+=.]*\\d+[.e-]*\\d*[a-z%]*/g,k=/[-+=.]*\\d+\\.?\\d*(?:e-|e\\+)?\\d*/gi,I=/[+-]=-?[.\\d]+/,N=/[#\\-+.]*\\b[a-z\\d-=+%.]+/gi,B=/[\\d.+\\-=]+(?:e[-+]\\d*)*/i,V={},z={},F=function _install(e){return(z=de(e,V))&&qt},H=function _missingPlugin(e,t){return console.warn(\"Invalid property\",e,\"set to\",t,\"Missing plugin? gsap.registerPlugin()\")},U=function _warn(e,t){return!t&&console.warn(e)},j=function _addGlobal(e,t){return e&&(V[e]=t)&&z&&(z[e]=t)||V},G=function _emptyFunc(){return 0},W={},q=[],X={},Y={},$={},Z=30,J=[],K=\"\",Q=function _harness(e){var t,n,i=e[0];if(S(i)||w(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=J.length;n--&&!J[n].targetTest(i););t=J[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new vt(e[n],t)))||e.splice(n,1);return e},ee=function _getCache(e){return e._gsap||Q(ze(e))[0]._gsap},te=function _getProperty(e,t,n){return(n=e[t])&&w(n)?e[t]():M(n)&&e.getAttribute&&e.getAttribute(t)||n},ne=function _forEachName(e,t){return(e=e.split(\",\")).forEach(t)||e},ie=function _round(e){return Math.round(1e5*e)/1e5||0},re=function _arrayContainsAny(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},ae=function _parseVars(e,t,n){var i,r=T(e[1]),a=(r?2:1)+(t<2?0:1),s=e[a];if(r&&(s.duration=e[1]),s.parent=n,t){for(i=s;n&&!(\"immediateRender\"in i);)i=n.vars.defaults||{},n=E(n.vars.inherit)&&n.parent;s.immediateRender=E(i.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return s},se=function _lazyRender(){var e,t,n=q.length,i=q.slice(0);for(X={},q.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},oe=function _lazySafeRender(e,t,n,i){q.length&&se(),e.render(t,n,i),q.length&&se()},le=function _numericIfPossible(e){var t=parseFloat(e);return(t||0===t)&&(e+\"\").match(N).length<2?t:_(e)?e.trim():e},ce=function _passThrough(e){return e},ue=function _setDefaults(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},he=function _setKeyframeDefaults(e,t){for(var n in t)n in e||\"duration\"===n||\"ease\"===n||(e[n]=t[n])},de=function _merge(e,t){for(var n in t)e[n]=t[n];return e},pe=function _mergeDeep(e,t){for(var n in t)\"__proto__\"!==n&&\"constructor\"!==n&&\"prototype\"!==n&&(e[n]=S(t[n])?_mergeDeep(e[n]||(e[n]={}),t[n]):t[n]);return e},fe=function _copyExcluding(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},me=function _inheritDefaults(e){var t=e.parent||r,n=e.keyframes?he:ue;if(E(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},ge=function _removeLinkedListItem(e,t,n,i){void 0===n&&(n=\"_first\"),void 0===i&&(i=\"_last\");var r=t._prev,a=t._next;r?r._next=a:e[n]===t&&(e[n]=a),a?a._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},ye=function _removeFromParent(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},ve=function _uncache(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},be=function _hasNoPausedAncestors(e){return!e||e._ts&&_hasNoPausedAncestors(e.parent)},xe=function _elapsedCycleDuration(e){return e._repeat?_e(e._tTime,e=e.duration()+e._rDelay)*e:0},_e=function _animationCycle(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},we=function _parentToChildTotalTime(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Te=function _setEnd(e){return e._end=ie(e._start+(e._tDur/Math.abs(e._ts||e._rts||f)||0))},Me=function _alignPlayhead(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ie(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Te(e),n._dirty||ve(n,e)),e},Se=function _postAddChecks(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=we(e.rawTime(),t),(!t._dur||ke(0,t.totalDuration(),n)-t._tTime>f)&&t.render(n,!0)),ve(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-f}},Ee=function _addToTimeline(e,t,n,i){return t.parent&&ye(t),t._start=ie(n+t._delay),t._end=ie(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function _addLinkedListItem(e,t,n,i,r){void 0===n&&(n=\"_first\"),void 0===i&&(i=\"_last\");var a,s=e[i];if(r)for(a=t[r];s&&s[r]>a;)s=s._prev;s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=s,t.parent=t._dp=e}(e,t,\"_first\",\"_last\",e._sort?\"_start\":0),e._recent=t,i||Se(e,t),e},Ae=function _scrollTrigger(e,t){return(V.ScrollTrigger||H(\"scrollTrigger\",t))&&V.ScrollTrigger.create(t,e)},Ce=function _attemptInitTween(e,t,n,i){return Mt(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&c!==at.frame?(q.push(e),e._lazy=[t,i],1):void 0:1},Le=function _setDuration(e,t,n,i){var r=e._repeat,a=ie(t)||0,s=e._tTime/e._tDur;return s&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:ie(a*(r+1)+e._rDelay*r):a,s&&!i?Me(e,e._tTime=e._tDur*s):e.parent&&Te(e),n||ve(e.parent,e),e},Pe=function _onUpdateTotalDuration(e){return e instanceof xt?ve(e):Le(e,e._dur)},Re={_start:0,endTime:G},De=function _parsePosition(e,t){var n,i,r=e.labels,a=e._recent||Re,s=e.duration()>=1e8?a.endTime(!1):e._dur;return _(t)&&(isNaN(t)||t in r)?\"<\"===(n=t.charAt(0))||\">\"===n?(\"<\"===n?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0):(n=t.indexOf(\"=\"))<0?(t in r||(r[t]=s),r[t]):(i=+(t.charAt(n-1)+t.substr(n+1)),n>1?_parsePosition(e,t.substr(0,n-1))+i:s+i):null==t?s:+t},Oe=function _conditionalReturn(e,t){return e||0===e?t(e):t},ke=function _clamp(e,t,n){return n<e?e:n>t?t:n},Ie=function getUnit(e){if(\"string\"!=typeof e)return\"\";var t=B.exec(e);return t?e.substr(t.index+t[0].length):\"\"},Ne=[].slice,Be=function _isArrayLike(e,t){return e&&S(e)&&\"length\"in e&&(!t&&!e.length||e.length-1 in e&&S(e[0]))&&!e.nodeType&&e!==a},Ve=function _flatten(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){var i;return _(e)&&!t||Be(e,1)?(i=n).push.apply(i,ze(e)):n.push(e)})||n},ze=function toArray(e,t){return!_(e)||t||!s&&st()?P(e)?Ve(e,t):Be(e)?Ne.call(e,0):e?[e]:[]:Ne.call(o.querySelectorAll(e),0)},Fe=function shuffle(e){return e.sort(function(){return.5-Math.random()})},He=function distribute(e){if(w(e))return e;var t=S(e)?e:{each:e},n=pt(t.ease),i=t.from||0,r=parseFloat(t.base)||0,a={},s=i>0&&i<1,o=isNaN(i)||s,l=t.axis,c=i,u=i;return _(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!s&&o&&(c=i[0],u=i[1]),function(e,s,h){var d,p,f,m,g,y,b,x,_,w=(h||t).length,T=a[w];if(!T){if(!(_=\"auto\"===t.grid?0:(t.grid||[1,1e8])[1])){for(b=-1e8;b<(b=h[_++].getBoundingClientRect().left)&&_<w;);_--}for(T=a[w]=[],d=o?Math.min(_,w)*c-.5:i%_,p=o?w*u/_-.5:i/_|0,b=0,x=1e8,y=0;y<w;y++)f=y%_-d,m=p-(y/_|0),T[y]=g=l?Math.abs(\"y\"===l?m:f):v(f*f+m*m),g>b&&(b=g),g<x&&(x=g);\"random\"===i&&Fe(T),T.max=b-x,T.min=x,T.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(_>w?w-1:l?\"y\"===l?w/_:_:Math.max(_,w/_))||0)*(\"edges\"===i?-1:1),T.b=w<0?r-w:r,T.u=Ie(t.amount||t.each)||0,n=n&&w<0?ht(n):n}return w=(T[e]-T.min)/T.max||0,ie(T.b+(n?n(w):w)*T.v)+T.u}},Ue=function _roundModifier(e){var t=e<1?Math.pow(10,(e+\"\").length-2):1;return function(n){var i=Math.round(parseFloat(n)/e)*e*t;return(i-i%1)/t+(T(n)?0:Ie(n))}},je=function snap(e,t){var n,i,r=P(e);return!r&&S(e)&&(n=r=e.radius||1e8,e.values?(e=ze(e.values),(i=!T(e[0]))&&(n*=n)):e=Ue(e.increment)),Oe(t,r?w(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,a,s=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=1e8,c=0,u=e.length;u--;)(r=i?(r=e[u].x-s)*r+(a=e[u].y-o)*a:Math.abs(e[u]-s))<l&&(l=r,c=u);return c=!n||l<=n?e[c]:t,i||c===t||T(t)?c:c+Ie(t)}:Ue(e))},Ge=function random(e,t,n,i){return Oe(P(e)?!t:!0===n?!!(n=0):!i,function(){return P(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+\"\").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*i)/i})},We=function _wrapArray(e,t,n){return Oe(n,function(n){return e[~~t(n)]})},qe=function _replaceRandom(e){for(var t,n,i,r,a=0,s=\"\";~(t=e.indexOf(\"random(\",a));)i=e.indexOf(\")\",t),r=\"[\"===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?N:R),s+=e.substr(a,t-a)+Ge(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),a=i+1;return s+e.substr(a,e.length-a)},Xe=function mapRange(e,t,n,i,r){var a=t-e,s=i-n;return Oe(r,function(t){return n+((t-e)/a*s||0)})},Ye=function _getLabelInDirection(e,t,n){var i,r,a,s=e.labels,o=1e8;for(i in s)(r=s[i]-t)<0==!!n&&r&&o>(r=Math.abs(r))&&(a=i,o=r);return a},$e=function _callback(e,t,n){var i,r,a=e.vars,s=a[t];if(s)return i=a[t+\"Params\"],r=a.callbackScope||e,n&&q.length&&se(),i?s.apply(r,i):s.call(r)},Ze=function _interrupt(e){return ye(e),e.progress()<1&&$e(e,\"onInterrupt\"),e},Je={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Ke=function _hue(e,t,n){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},Qe=function splitColor(e,t,n){var i,r,a,s,o,l,c,u,h,d,p=e?T(e)?[e>>16,e>>8&255,255&e]:0:Je.black;if(!p){if(\",\"===e.substr(-1)&&(e=e.substr(0,e.length-1)),Je[e])p=Je[e];else if(\"#\"===e.charAt(0)){if(e.length<6&&(e=\"#\"+(i=e.charAt(1))+i+(r=e.charAt(2))+r+(a=e.charAt(3))+a+(5===e.length?e.charAt(4)+e.charAt(4):\"\")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if(\"hsl\"===e.substr(0,3))if(p=d=e.match(R),t){if(~e.indexOf(\"=\"))return p=e.match(D),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,o=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=Ke(s+1/3,i,r),p[1]=Ke(s,i,r),p[2]=Ke(s-1/3,i,r);else p=e.match(R)||Je.transparent;p=p.map(Number)}return t&&!d&&(i=p[0]/255,r=p[1]/255,a=p[2]/255,l=((c=Math.max(i,r,a))+(u=Math.min(i,r,a)))/2,c===u?s=o=0:(h=c-u,o=l>.5?h/(2-c-u):h/(c+u),s=c===i?(r-a)/h+(r<a?6:0):c===r?(a-i)/h+2:(i-r)/h+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},et=function _colorOrderData(e){var t=[],n=[],i=-1;return e.split(nt).forEach(function(e){var r=e.match(O)||[];t.push.apply(t,r),n.push(i+=r.length+1)}),t.c=n,t},tt=function _formatColors(e,t,n){var i,r,a,s,o=\"\",l=(e+o).match(nt),c=t?\"hsla(\":\"rgba(\",u=0;if(!l)return e;if(l=l.map(function(e){return(e=Qe(e,t,1))&&c+(t?e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%,\"+e[3]:e.join(\",\"))+\")\"}),n&&(a=et(e),(i=n.c).join(o)!==a.c.join(o)))for(s=(r=e.replace(nt,\"1\").split(O)).length-1;u<s;u++)o+=r[u]+(~i.indexOf(u)?l.shift()||c+\"0,0,0,0)\":(a.length?a:l.length?l:n).shift());if(!r)for(s=(r=e.split(nt)).length-1;u<s;u++)o+=r[u]+l[u];return o+r[s]},nt=function(){var e,t=\"(?:\\\\b(?:(?:rgb|rgba|hsl|hsla)\\\\(.+?\\\\))|\\\\B#(?:[0-9a-f]{3,4}){1,2}\\\\b\";for(e in Je)t+=\"|\"+e+\"\\\\b\";return new RegExp(t+\")\",\"gi\")}(),it=/hsl[a]?\\(/,rt=function _colorStringFilter(e){var t,n=e.join(\" \");if(nt.lastIndex=0,nt.test(n))return t=it.test(n),e[1]=tt(e[1],t),e[0]=tt(e[0],t,et(e[1])),!0},at=function(){var e,t,n,i,r,c,u=Date.now,d=500,p=33,m=u(),g=m,y=1e3/240,v=y,b=[],x=function _tick(n){var a,s,o,l,h=u()-g,f=!0===n;if(h>d&&(m+=h-p),((a=(o=(g+=h)-m)-v)>0||f)&&(l=++i.frame,r=o-1e3*i.time,i.time=o/=1e3,v+=a+(a>=y?4:y-a),s=1),f||(e=t(_tick)),s)for(c=0;c<b.length;c++)b[c](o,r,l,n)};return i={time:0,frame:0,tick:function tick(){x(!0)},deltaRatio:function deltaRatio(e){return r/(1e3/(e||60))},wake:function wake(){l&&(!s&&A()&&(a=s=window,o=a.document||{},V.gsap=qt,(a.gsapVersions||(a.gsapVersions=[])).push(qt.version),F(z||a.GreenSockGlobals||!a.gsap&&a||{}),n=a.requestAnimationFrame),e&&i.sleep(),t=n||function(e){return setTimeout(e,v-1e3*i.time+1|0)},h=1,x(2))},sleep:function sleep(){(n?a.cancelAnimationFrame:clearTimeout)(e),h=0,t=G},lagSmoothing:function lagSmoothing(e,t){d=e||1/f,p=Math.min(t,d,0)},fps:function fps(e){y=1e3/(e||240),v=1e3*i.time+y},add:function add(e){b.indexOf(e)<0&&b.push(e),st()},remove:function remove(e){var t;~(t=b.indexOf(e))&&b.splice(t,1)&&c>=t&&c--},_listeners:b}}(),st=function _wake(){return!h&&at.wake()},ot={},lt=/^[\\d.\\-M][\\d.\\-,\\s]/,ct=/[\"']/g,ut=function _configEaseFromString(e){var t=(e+\"\").split(\"(\"),n=ot[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf(\"{\")?[function _parseObjectInString(e){for(var t,n,i,r={},a=e.substr(1,e.length-3).split(\":\"),s=a[0],o=1,l=a.length;o<l;o++)n=a[o],t=o!==l-1?n.lastIndexOf(\",\"):n.length,i=n.substr(0,t),r[s]=isNaN(i)?i.replace(ct,\"\").trim():+i,s=n.substr(t+1).trim();return r}(t[1])]:function _valueInParentheses(e){var t=e.indexOf(\"(\")+1,n=e.indexOf(\")\"),i=e.indexOf(\"(\",t);return e.substring(t,~i&&i<n?e.indexOf(\")\",n+1):n)}(e).split(\",\").map(le)):ot._CE&&lt.test(e)?ot._CE(\"\",e):n},ht=function _invertEase(e){return function(t){return 1-e(1-t)}},dt=function _propagateYoyoEase(e,t){for(var n,i=e._first;i;)i instanceof xt?_propagateYoyoEase(i,t):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===t||(i.timeline?_propagateYoyoEase(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},pt=function _parseEase(e,t){return e&&(w(e)?e:ot[e]||ut(e))||t},ft=function _insertEase(e,t,n,i){void 0===n&&(n=function easeOut(e){return 1-t(1-e)}),void 0===i&&(i=function easeInOut(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,a={easeIn:t,easeOut:n,easeInOut:i};return ne(e,function(e){for(var t in ot[e]=V[e]=a,ot[r=e.toLowerCase()]=n,a)ot[r+(\"easeIn\"===t?\".in\":\"easeOut\"===t?\".out\":\".inOut\")]=ot[e+\".\"+t]=a[t]}),a},mt=function _easeInOutFromOut(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},gt=function _configElastic(e,t,n){var i=t>=1?t:1,r=(n||(e?.3:.45))/(t<1?t:1),a=r/m*(Math.asin(1/i)||0),s=function easeOut(e){return 1===e?1:i*Math.pow(2,-10*e)*x((e-a)*r)+1},o=\"out\"===e?s:\"in\"===e?function(e){return 1-s(1-e)}:mt(s);return r=m/r,o.config=function(t,n){return _configElastic(e,t,n)},o},yt=function _configBack(e,t){void 0===t&&(t=1.70158);var n=function easeOut(e){return e?--e*e*((t+1)*e+t)+1:0},i=\"out\"===e?n:\"in\"===e?function(e){return 1-n(1-e)}:mt(n);return i.config=function(t){return _configBack(e,t)},i};ne(\"Linear,Quad,Cubic,Quart,Quint,Strong\",function(e,t){var n=t<5?t+1:t;ft(e+\",Power\"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),ot.Linear.easeNone=ot.none=ot.Linear.easeIn,ft(\"Elastic\",gt(\"in\"),gt(\"out\"),gt()),function(e,t){var n=1/t,i=function easeOut(i){return i<n?e*i*i:i<.7272727272727273?e*Math.pow(i-1.5/t,2)+.75:i<.9090909090909092?e*(i-=2.25/t)*i+.9375:e*Math.pow(i-2.625/t,2)+.984375};ft(\"Bounce\",function(e){return 1-i(1-e)},i)}(7.5625,2.75),ft(\"Expo\",function(e){return e?Math.pow(2,10*(e-1)):0}),ft(\"Circ\",function(e){return-(v(1-e*e)-1)}),ft(\"Sine\",function(e){return 1===e?1:1-b(e*g)}),ft(\"Back\",yt(\"in\"),yt(\"out\"),yt()),ot.SteppedEase=ot.steps=V.SteppedEase={config:function config(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0,a=1-f;return function(e){return((i*ke(0,a,e)|0)+r)*n}}},p.ease=ot[\"quad.out\"],ne(\"onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt\",function(e){return K+=e+\",\"+e+\"Params,\"});var vt=function GSCache(e,t){this.id=y++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:te,this.set=t?t.getSetter:Ot},bt=function(){function Animation(e,t){var n=e.parent||r;this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Le(this,+e.duration,1,1),this.data=e.data,h||at.wake(),n&&Ee(n,this,t||0===t?t:n._time,1),e.reversed&&this.reverse(),e.paused&&this.paused(!0)}var e=Animation.prototype;return e.delay=function delay(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},e.duration=function duration(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},e.totalDuration=function totalDuration(e){return arguments.length?(this._dirty=0,Le(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function totalTime(e,t){if(st(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Me(this,e),!n._dp||n.parent||Se(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Ee(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===f||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),oe(this,e,t)),this},e.time=function time(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+xe(this))%this._dur||(e?this._dur:0),t):this._time},e.totalProgress=function totalProgress(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function progress(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+xe(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function iteration(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?_e(this._tTime,n)+1:1},e.timeScale=function timeScale(e){if(!arguments.length)return this._rts===-f?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?we(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-f?0:this._rts,function _recacheAncestors(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this.totalTime(ke(-this._delay,this._tDur,t),!0))},e.paused=function paused(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(st(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=f)&&Math.abs(this._zTime)!==f))),this):this._ps},e.startTime=function startTime(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ee(t,this,e-this._delay),this}return this._start},e.endTime=function endTime(e){return this._start+(E(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function rawTime(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?we(t.rawTime(e),this):this._tTime:this._tTime},e.globalTime=function globalTime(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},e.repeat=function repeat(e){return arguments.length?(this._repeat=e===1/0?-2:e,Pe(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function repeatDelay(e){return arguments.length?(this._rDelay=e,Pe(this)):this._rDelay},e.yoyo=function yoyo(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.seek=function seek(e,t){return this.totalTime(De(this,e),E(t))},e.restart=function restart(e,t){return this.play().totalTime(e?-this._delay:0,E(t))},e.play=function play(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},e.reverse=function reverse(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},e.pause=function pause(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},e.resume=function resume(){return this.paused(!1)},e.reversed=function reversed(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-f:0)),this):this._rts<0},e.invalidate=function invalidate(){return this._initted=this._act=0,this._zTime=-f,this},e.isActive=function isActive(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-f))},e.eventCallback=function eventCallback(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+\"Params\"]=n),\"onUpdate\"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},e.then=function then(e){var t=this;return new Promise(function(n){var i=w(e)?e:ce,r=function _resolve(){var e=t.then;t.then=null,w(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r})},e.kill=function kill(){Ze(this)},Animation}();ue(bt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-f,_prom:0,_ps:!1,_rts:1});var xt=function(e){function Timeline(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t,n)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=E(t.sortChildren),i.parent&&Se(i.parent,_assertThisInitialized(i)),t.scrollTrigger&&Ae(_assertThisInitialized(i),t.scrollTrigger),i}_inheritsLoose(Timeline,e);var t=Timeline.prototype;return t.to=function to(e,t,n){return new Ct(e,ae(arguments,0,this),De(this,T(t)?arguments[3]:n)),this},t.from=function from(e,t,n){return new Ct(e,ae(arguments,1,this),De(this,T(t)?arguments[3]:n)),this},t.fromTo=function fromTo(e,t,n,i){return new Ct(e,ae(arguments,2,this),De(this,T(t)?arguments[4]:i)),this},t.set=function set(e,t,n){return t.duration=0,t.parent=this,me(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Ct(e,t,De(this,n),1),this},t.call=function call(e,t,n){return Ee(this,Ct.delayedCall(0,e,t),De(this,n))},t.staggerTo=function staggerTo(e,t,n,i,r,a,s){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=s,n.parent=this,new Ct(e,n,De(this,r)),this},t.staggerFrom=function staggerFrom(e,t,n,i,r,a,s){return n.runBackwards=1,me(n).immediateRender=E(n.immediateRender),this.staggerTo(e,t,n,i,r,a,s)},t.staggerFromTo=function staggerFromTo(e,t,n,i,r,a,s,o){return i.startAt=n,me(i).immediateRender=E(i.immediateRender),this.staggerTo(e,t,i,r,a,s,o)},t.render=function render(e,t,n){var i,a,s,o,l,c,u,h,d,p,m,g,y=this._time,v=this._dirty?this.totalDuration():this._tDur,b=this._dur,x=this!==r&&e>v-f&&e>=0?v:e<f?0:e,_=this._zTime<0!=e<0&&(this._initted||!b);if(x!==this._tTime||n||_){if(y!==this._time&&b&&(x+=this._time-y,e+=this._time-y),i=x,d=this._start,c=!(h=this._ts),_&&(b||(y=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(m=this._yoyo,l=b+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*l+e,t,n);if(i=ie(x%l),x===v?(o=this._repeat,i=b):((o=~~(x/l))&&o===x/l&&(i=b,o--),i>b&&(i=b)),p=_e(this._tTime,l),!y&&this._tTime&&p!==o&&(p=o),m&&1&o&&(i=b-i,g=1),o!==p&&!this._lock){var w=m&&1&p,T=w===(m&&1&o);if(o<p&&(w=!w),y=w?0:b,this._lock=1,this.render(y||(g?0:ie(o*l)),t,!b)._lock=0,!t&&this.parent&&$e(this,\"onRepeat\"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),y!==this._time||c!==!this._ts)return this;if(b=this._dur,v=this._tDur,T&&(this._lock=2,y=w?b:-1e-4,this.render(y,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;dt(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function _findNextPauseTween(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(!i._dur&&\"isPause\"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(!i._dur&&\"isPause\"===i.data&&i._start<t)return i;i=i._prev}}(this,ie(y),ie(i)))&&(x-=i-(i=u._start)),this._tTime=x,this._time=i,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,y=0),!y&&(i||!b&&e>=0)&&!t&&$e(this,\"onStart\"),i>=y&&e>=0)for(a=this._first;a;){if(s=a._next,(a._act||i>=a._start)&&a._ts&&u!==a){if(a.parent!==this)return this.render(e,t,n);if(a.render(a._ts>0?(i-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(i-a._start)*a._ts,t,n),i!==this._time||!this._ts&&!c){u=0,s&&(x+=this._zTime=-f);break}}a=s}else{a=this._last;for(var M=e<0?e:i;a;){if(s=a._prev,(a._act||M<=a._end)&&a._ts&&u!==a){if(a.parent!==this)return this.render(e,t,n);if(a.render(a._ts>0?(M-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(M-a._start)*a._ts,t,n),i!==this._time||!this._ts&&!c){u=0,s&&(x+=this._zTime=M?-f:f);break}}a=s}}if(u&&!t&&(this.pause(),u.render(i>=y?0:-f)._zTime=i>=y?1:-1,this._ts))return this._start=d,Te(this),this.render(e,t,n);this._onUpdate&&!t&&$e(this,\"onUpdate\",!0),(x===v&&v>=this.totalDuration()||!x&&y)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!b)&&(x===v&&this._ts>0||!x&&this._ts<0)&&ye(this,1),t||e<0&&!y||!x&&!y||($e(this,x===v?\"onComplete\":\"onReverseComplete\",!0),this._prom&&!(x<v&&this.timeScale()>0)&&this._prom())))}return this},t.add=function add(e,t){var n=this;if(T(t)||(t=De(this,t)),!(e instanceof bt)){if(P(e))return e.forEach(function(e){return n.add(e,t)}),this;if(_(e))return this.addLabel(e,t);if(!w(e))return this;e=Ct.delayedCall(0,e)}return this!==e?Ee(this,e,t):this},t.getChildren=function getChildren(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-1e8);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof Ct?t&&r.push(a):(n&&r.push(a),e&&r.push.apply(r,a.getChildren(!0,t,n)))),a=a._next;return r},t.getById=function getById(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},t.remove=function remove(e){return _(e)?this.removeLabel(e):w(e)?this.killTweensOf(e):(ge(this,e),e===this._recent&&(this._recent=this._last),ve(this))},t.totalTime=function totalTime(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ie(at.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},t.addLabel=function addLabel(e,t){return this.labels[e]=De(this,t),this},t.removeLabel=function removeLabel(e){return delete this.labels[e],this},t.addPause=function addPause(e,t,n){var i=Ct.delayedCall(0,t||G,n);return i.data=\"isPause\",this._hasPause=1,Ee(this,i,De(this,e))},t.removePause=function removePause(e){var t=this._first;for(e=De(this,e);t;)t._start===e&&\"isPause\"===t.data&&ye(t),t=t._next},t.killTweensOf=function killTweensOf(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)_t!==i[r]&&i[r].kill(e,t);return this},t.getTweensOf=function getTweensOf(e,t){for(var n,i=[],r=ze(e),a=this._first,s=T(t);a;)a instanceof Ct?re(a._targets,r)&&(s?(!_t||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&i.push(a):(n=a.getTweensOf(r,t)).length&&i.push.apply(i,n),a=a._next;return i},t.tweenTo=function tweenTo(e,t){t=t||{};var n=this,i=De(n,e),r=t,a=r.startAt,s=r.onStart,o=r.onStartParams,l=r.immediateRender,c=Ct.to(n,ue({ease:\"none\",lazy:!1,immediateRender:!1,time:i,overwrite:\"auto\",duration:t.duration||Math.abs((i-(a&&\"time\"in a?a.time:n._time))/n.timeScale())||f,onStart:function onStart(){n.pause();var e=t.duration||Math.abs((i-n._time)/n.timeScale());c._dur!==e&&Le(c,e,0,1).render(c._time,!0,!0),s&&s.apply(c,o||[])}},t));return l?c.render(0):c},t.tweenFromTo=function tweenFromTo(e,t,n){return this.tweenTo(t,ue({startAt:{time:De(this,e)}},n))},t.recent=function recent(){return this._recent},t.nextLabel=function nextLabel(e){return void 0===e&&(e=this._time),Ye(this,De(this,e))},t.previousLabel=function previousLabel(e){return void 0===e&&(e=this._time),Ye(this,De(this,e),1)},t.currentLabel=function currentLabel(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+f)},t.shiftChildren=function shiftChildren(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in a)a[i]>=n&&(a[i]+=e);return ve(this)},t.invalidate=function invalidate(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},t.clear=function clear(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),ve(this)},t.totalDuration=function totalDuration(e){var t,n,i,a=0,s=this._last,o=1e8;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-e:e));if(this._dirty){for(i=this.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>o&&this._sort&&s._ts&&!this._lock?(this._lock=1,Ee(this,s,n-s._delay,1)._lock=0):o=n,n<0&&s._ts&&(a-=n,(!i&&!this._dp||i&&i.smoothChildTiming)&&(this._start+=n/this._ts,this._time-=n,this._tTime-=n),this.shiftChildren(-n,!1,-Infinity),o=0),s._end>a&&s._ts&&(a=s._end),s=t;Le(this,this===r&&this._time>a?this._time:a,1,1),this._dirty=0}return this._tDur},Timeline.updateRoot=function updateRoot(e){if(r._ts&&(oe(r,we(e,r)),c=at.frame),at.frame>=Z){Z+=d.autoSleep||120;var t=r._first;if((!t||!t._ts)&&d.autoSleep&&at._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||at.sleep()}}},Timeline}(bt);ue(xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var _t,wt=function _addPropTween(e,t,n,i,r,a,s,o,l){w(i)&&(i=i(r||0,e,a));var c,u=e[t],h=\"get\"!==n?n:w(u)?l?e[t.indexOf(\"set\")||!w(e[\"get\"+t.substr(3)])?t:\"get\"+t.substr(3)](l):e[t]():u,p=w(u)?l?Rt:Pt:Lt;if(_(i)&&(~i.indexOf(\"random(\")&&(i=qe(i)),\"=\"===i.charAt(1)&&(i=parseFloat(h)+parseFloat(i.substr(2))*(\"-\"===i.charAt(0)?-1:1)+(Ie(h)||0))),h!==i)return isNaN(h*i)?(!u&&!(t in e)&&H(t,i),function _addComplexStringPropTween(e,t,n,i,r,a,s){var o,l,c,u,h,d,p,f,m=new Ut(this._pt,e,t,0,1,Nt,null,r),g=0,y=0;for(m.b=n,m.e=i,n+=\"\",(p=~(i+=\"\").indexOf(\"random(\"))&&(i=qe(i)),a&&(a(f=[n,i],e,t),n=f[0],i=f[1]),l=n.match(k)||[];o=k.exec(i);)u=o[0],h=i.substring(g,o.index),c?c=(c+1)%5:\"rgba(\"===h.substr(-5)&&(c=1),u!==l[y++]&&(d=parseFloat(l[y-1])||0,m._pt={_next:m._pt,p:h||1===y?h:\",\",s:d,c:\"=\"===u.charAt(1)?parseFloat(u.substr(2))*(\"-\"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=k.lastIndex);return m.c=g<i.length?i.substring(g,i.length):\"\",m.fp=s,(I.test(i)||p)&&(m.e=0),this._pt=m,m}.call(this,e,t,h,i,p,o||d.stringFilter,l)):(c=new Ut(this._pt,e,t,+h||0,i-(h||0),\"boolean\"==typeof u?It:kt,0,p),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},Tt=function _checkPlugin(e,t,n,i,r,a){var s,o,l,c;if(Y[e]&&!1!==(s=new Y[e]).init(r,s.rawVars?t[e]:function _processVars(e,t,n,i,r){if(w(e)&&(e=St(e,r,t,n,i)),!S(e)||e.style&&e.nodeType||P(e)||L(e))return _(e)?St(e,r,t,n,i):e;var a,s={};for(a in e)s[a]=St(e[a],r,t,n,i);return s}(t[e],i,r,a,n),n,i,a)&&(n._pt=o=new Ut(n._pt,r,e,0,1,s.render,s,0,s.priority),n!==u))for(l=n._ptLookup[n._targets.indexOf(r)],c=s._props.length;c--;)l[s._props[c]]=o;return s},Mt=function _initTween(e,t){var n,a,s,o,l,c,u,h,d,m,g,y,v,b=e.vars,x=b.ease,_=b.startAt,w=b.immediateRender,T=b.lazy,M=b.onUpdate,S=b.onUpdateParams,A=b.callbackScope,C=b.runBackwards,L=b.yoyoEase,P=b.keyframes,R=b.autoRevert,D=e._dur,O=e._startAt,k=e._targets,I=e.parent,N=I&&\"nested\"===I.data?I.parent._targets:k,B=\"auto\"===e._overwrite&&!i,V=e.timeline;if(V&&(!P||!x)&&(x=\"none\"),e._ease=pt(x,p.ease),e._yEase=L?ht(pt(!0===L?x:L,p.ease)):0,L&&e._yoyo&&!e._repeat&&(L=e._yEase,e._yEase=e._ease,e._ease=L),!V){if(y=(h=k[0]?ee(k[0]).harness:0)&&b[h.prop],n=fe(b,W),O&&O.render(-1,!0).kill(),_){if(ye(e._startAt=Ct.set(k,ue({data:\"isStart\",overwrite:!1,parent:I,immediateRender:!0,lazy:E(T),startAt:null,delay:0,onUpdate:M,onUpdateParams:S,callbackScope:A,stagger:0},_))),w)if(t>0)R||(e._startAt=0);else if(D&&!(t<0&&O))return void(t&&(e._zTime=t))}else if(C&&D)if(O)!R&&(e._startAt=0);else if(t&&(w=!1),s=ue({overwrite:!1,data:\"isFromStart\",lazy:w&&E(T),immediateRender:w,stagger:0,parent:I},n),y&&(s[h.prop]=y),ye(e._startAt=Ct.set(k,s)),w){if(!t)return}else _initTween(e._startAt,f);for(e._pt=0,T=D&&E(T)||T&&!D,a=0;a<k.length;a++){if(u=(l=k[a])._gsap||Q(k)[a]._gsap,e._ptLookup[a]=m={},X[u.id]&&q.length&&se(),g=N===k?a:N.indexOf(l),h&&!1!==(d=new h).init(l,y||n,e,g,N)&&(e._pt=o=new Ut(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(e){m[e]=o}),d.priority&&(c=1)),!h||y)for(s in n)Y[s]&&(d=Tt(s,n,e,g,l,N))?d.priority&&(c=1):m[s]=o=wt.call(e,l,s,\"get\",n[s],g,N,0,b.stringFilter);e._op&&e._op[a]&&e.kill(l,e._op[a]),B&&e._pt&&(_t=e,r.killTweensOf(l,m,e.globalTime(0)),v=!e.parent,_t=0),e._pt&&T&&(X[u.id]=1)}c&&Ht(e),e._onInit&&e._onInit(e)}e._from=!V&&!!b.runBackwards,e._onUpdate=M,e._initted=(!e._op||e._pt)&&!v},St=function _parseFuncOrString(e,t,n,i,r){return w(e)?e.call(t,n,i,r):_(e)&&~e.indexOf(\"random(\")?qe(e):e},Et=K+\"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase\",At=(Et+\",id,stagger,delay,duration,paused,scrollTrigger\").split(\",\"),Ct=function(e){function Tween(t,n,a,s){var o;\"number\"==typeof n&&(a.duration=n,n=a,a=null);var l,c,u,h,p,m,g,y,v=(o=e.call(this,s?n:me(n),a)||this).vars,b=v.duration,x=v.delay,_=v.immediateRender,w=v.stagger,M=v.overwrite,A=v.keyframes,R=v.defaults,D=v.scrollTrigger,O=v.yoyoEase,k=o.parent,I=(P(t)||L(t)?T(t[0]):\"length\"in n)?[t]:ze(t);if(o._targets=I.length?Q(I):U(\"GSAP target \"+t+\" not found. https://greensock.com\",!d.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=M,A||w||C(b)||C(x)){if(n=o.vars,(l=o.timeline=new xt({data:\"nested\",defaults:R||{}})).kill(),l.parent=l._dp=_assertThisInitialized(o),l._start=0,A)ue(l.vars.defaults,{ease:\"none\"}),A.forEach(function(e){return l.to(I,e,\">\")});else{if(h=I.length,g=w?He(w):G,S(w))for(p in w)~Et.indexOf(p)&&(y||(y={}),y[p]=w[p]);for(c=0;c<h;c++){for(p in u={},n)At.indexOf(p)<0&&(u[p]=n[p]);u.stagger=0,O&&(u.yoyoEase=O),y&&de(u,y),m=I[c],u.duration=+St(b,_assertThisInitialized(o),c,m,I),u.delay=(+St(x,_assertThisInitialized(o),c,m,I)||0)-o._delay,!w&&1===h&&u.delay&&(o._delay=x=u.delay,o._start+=x,u.delay=0),l.to(m,u,g(c,m,I))}l.duration()?b=x=0:o.timeline=0}b||o.duration(b=l.duration())}else o.timeline=0;return!0!==M||i||(_t=_assertThisInitialized(o),r.killTweensOf(I),_t=0),k&&Se(k,_assertThisInitialized(o)),(_||!b&&!A&&o._start===ie(k._time)&&E(_)&&be(_assertThisInitialized(o))&&\"nested\"!==k.data)&&(o._tTime=-f,o.render(Math.max(0,-x))),D&&Ae(_assertThisInitialized(o),D),o}_inheritsLoose(Tween,e);var t=Tween.prototype;return t.render=function render(e,t,n){var i,r,a,s,o,l,c,u,h,d=this._time,p=this._tDur,m=this._dur,g=e>p-f&&e>=0?p:e<f?0:e;if(m){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(i=g,u=this.timeline,this._repeat){if(s=m+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(i=ie(g%s),g===p?(a=this._repeat,i=m):((a=~~(g/s))&&a===g/s&&(i=m,a--),i>m&&(i=m)),(l=this._yoyo&&1&a)&&(h=this._yEase,i=m-i),o=_e(this._tTime,s),i===d&&!n&&this._initted)return this;a!==o&&(u&&this._yEase&&dt(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(ie(s*a),!0).invalidate()._lock=0))}if(!this._initted){if(Ce(this,e<0?e:i,n,t))return this._tTime=0,this;if(m!==this._dur)return this.render(e,t,n)}for(this._tTime=g,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/m),this._from&&(this.ratio=c=1-c),i&&!d&&!t&&$e(this,\"onStart\"),r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(e<0?e:!i&&l?-f:u._dur*c,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),$e(this,\"onUpdate\")),this._repeat&&a!==o&&this.vars.onRepeat&&!t&&this.parent&&$e(this,\"onRepeat\"),g!==this._tDur&&g||this._tTime!==g||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!m)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&ye(this,1),t||e<0&&!d||!g&&!d||($e(this,g===p?\"onComplete\":\"onReverseComplete\",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function _renderZeroDurationTween(e,t,n,i){var r,a,s,o=e.ratio,l=t<0||!t&&(!e._start&&function _parentPlayheadIsBeforeStart(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||_parentPlayheadIsBeforeStart(t))}(e)||(e._ts<0||e._dp._ts<0)&&\"isFromStart\"!==e.data&&\"isStart\"!==e.data)?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=ke(0,e._tDur,t),a=_e(u,c),s=_e(e._tTime,c),e._yoyo&&1&a&&(l=1-l),a!==s&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||i||e._zTime===f||!t&&e._zTime){if(!e._initted&&Ce(e,t,i,n))return;for(s=e._zTime,e._zTime=t||(n?f:0),n||(n=t&&!s),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,n||$e(e,\"onStart\"),r=e._pt;r;)r.r(l,r.d),r=r._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&$e(e,\"onUpdate\"),u&&e._repeat&&!n&&e.parent&&$e(e,\"onRepeat\"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&ye(e,1),n||($e(e,l?\"onComplete\":\"onReverseComplete\",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},t.targets=function targets(){return this._targets},t.invalidate=function invalidate(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},t.kill=function kill(e,t){if(void 0===t&&(t=\"all\"),!(e||t&&\"all\"!==t))return this._lazy=this._pt=0,this.parent?Ze(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,_t&&!0!==_t.vars.overwrite)._first||Ze(this),this.parent&&n!==this.timeline.totalDuration()&&Le(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,a,s,o,l,c,u=this._targets,h=e?ze(e):u,d=this._ptLookup,p=this._pt;if((!t||\"all\"===t)&&function _arraysMatch(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(u,h))return\"all\"===t&&(this._pt=0),Ze(this);for(i=this._op=this._op||[],\"all\"!==t&&(_(t)&&(o={},ne(t,function(e){return o[e]=1}),t=o),t=function _addAliasesToVars(e,t){var n,i,r,a,s=e[0]?ee(e[0]).harness:0,o=s&&s.aliases;if(!o)return t;for(i in n=de({},t),o)if(i in n)for(r=(a=o[i].split(\",\")).length;r--;)n[a[r]]=n[i];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(o in r=d[c],\"all\"===t?(i[c]=t,s=r,a={}):(a=i[c]=i[c]||{},s=t),s)(l=r&&r[o])&&(\"kill\"in l.d&&!0!==l.d.kill(o)||ge(this,l,\"_pt\"),delete r[o]),\"all\"!==a&&(a[o]=1);return this._initted&&!this._pt&&p&&Ze(this),this},Tween.to=function to(e,t){return new Tween(e,t,arguments[2])},Tween.from=function from(e,t){return new Tween(e,ae(arguments,1))},Tween.delayedCall=function delayedCall(e,t,n,i){return new Tween(t,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:t,onReverseComplete:t,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},Tween.fromTo=function fromTo(e,t,n){return new Tween(e,ae(arguments,2))},Tween.set=function set(e,t){return t.duration=0,t.repeatDelay||(t.repeat=0),new Tween(e,t)},Tween.killTweensOf=function killTweensOf(e,t,n){return r.killTweensOf(e,t,n)},Tween}(bt);ue(Ct.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ne(\"staggerTo,staggerFrom,staggerFromTo\",function(e){Ct[e]=function(){var t=new xt,n=Ne.call(arguments,0);return n.splice(\"staggerFromTo\"===e?5:4,0,0),t[e].apply(t,n)}});var Lt=function _setterPlain(e,t,n){return e[t]=n},Pt=function _setterFunc(e,t,n){return e[t](n)},Rt=function _setterFuncWithParam(e,t,n,i){return e[t](i.fp,n)},Dt=function _setterAttribute(e,t,n){return e.setAttribute(t,n)},Ot=function _getSetter(e,t){return w(e[t])?Pt:M(e[t])&&e.setAttribute?Dt:Lt},kt=function _renderPlain(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},It=function _renderBoolean(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Nt=function _renderComplexString(e,t){var n=t._pt,i=\"\";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Bt=function _renderPropTweens(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Vt=function _addPluginModifier(e,t,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(e,t,n),a=r},zt=function _killPropTweensOf(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?ge(this,i,\"_pt\"):i.dep||(t=1),i=n;return!t},Ft=function _setterWithModifier(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},Ht=function _sortPropTweensByPriority(e){for(var t,n,i,r,a=e._pt;a;){for(t=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=t}e._pt=i},Ut=function(){function PropTween(e,t,n,i,r,a,s,o,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=a||kt,this.d=s||this,this.set=o||Lt,this.pr=l||0,this._next=e,e&&(e._prev=this)}return PropTween.prototype.modifier=function modifier(e,t,n){this.mSet=this.mSet||this.set,this.set=Ft,this.m=e,this.mt=n,this.tween=t},PropTween}();ne(K+\"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger\",function(e){return W[e]=1}),V.TweenMax=V.TweenLite=Ct,V.TimelineLite=V.TimelineMax=xt,r=new xt({sortChildren:!1,defaults:p,autoRemoveChildren:!0,id:\"root\",smoothChildTiming:!0}),d.stringFilter=rt;var jt={registerPlugin:function registerPlugin(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return function _createPlugin(e){var t=(e=!e.name&&e.default||e).name,n=w(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:G,render:Bt,add:wt,kill:zt,modifier:Vt,rawVars:0},a={targetTest:0,get:0,getSetter:Ot,aliases:{},register:0};if(st(),e!==i){if(Y[t])return;ue(i,ue(fe(e,r),a)),de(i.prototype,de(r,fe(e,a))),Y[i.prop=t]=i,e.targetTest&&(J.push(i),W[t]=1),t=(\"css\"===t?\"CSS\":t.charAt(0).toUpperCase()+t.substr(1))+\"Plugin\"}j(t,i),e.register&&e.register(qt,i,Ut)}(e)})},timeline:function timeline(e){return new xt(e)},getTweensOf:function getTweensOf(e,t){return r.getTweensOf(e,t)},getProperty:function getProperty(e,t,n,i){_(e)&&(e=ze(e)[0]);var r=ee(e||{}).get,a=n?ce:le;return\"native\"===n&&(n=\"\"),e?t?a((Y[t]&&Y[t].get||r)(e,t,n,i)):function(t,n,i){return a((Y[t]&&Y[t].get||r)(e,t,n,i))}:e},quickSetter:function quickSetter(e,t,n){if((e=ze(e)).length>1){var i=e.map(function(e){return qt.quickSetter(e,t,n)}),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}e=e[0]||{};var a=Y[t],s=ee(e),o=s.harness&&(s.harness.aliases||{})[t]||t,l=a?function(t){var i=new a;u._pt=0,i.init(e,n?t+n:t,u,0,[e]),i.render(1,i),u._pt&&Bt(1,u)}:s.set(e,o);return a?l:function(t){return l(e,o,n?t+n:t,s,1)}},isTweening:function isTweening(e){return r.getTweensOf(e,!0).length>0},defaults:function defaults(e){return e&&e.ease&&(e.ease=pt(e.ease,p.ease)),pe(p,e||{})},config:function config(e){return pe(d,e||{})},registerEffect:function registerEffect(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,a=e.extendTimeline;(i||\"\").split(\",\").forEach(function(e){return e&&!Y[e]&&!V[e]&&U(t+\" effect requires \"+e+\" plugin.\")}),$[t]=function(e,t,i){return n(ze(e),ue(t||{},r),i)},a&&(xt.prototype[t]=function(e,n,i){return this.add($[t](e,S(n)?n:(i=n)&&{},this),i)})},registerEase:function registerEase(e,t){ot[e]=pt(t)},parseEase:function parseEase(e,t){return arguments.length?pt(e,t):ot},getById:function getById(e){return r.getById(e)},exportRoot:function exportRoot(e,t){void 0===e&&(e={});var n,i,a=new xt(e);for(a.smoothChildTiming=E(e.smoothChildTiming),r.remove(a),a._dp=0,a._time=a._tTime=r._time,n=r._first;n;)i=n._next,!t&&!n._dur&&n instanceof Ct&&n.vars.onComplete===n._targets[0]||Ee(a,n,n._start-n._delay),n=i;return Ee(r,a,0),a},utils:{wrap:function wrap(e,t,n){var i=t-e;return P(e)?We(e,wrap(0,e.length),t):Oe(n,function(t){return(i+(t-e)%i)%i+e})},wrapYoyo:function wrapYoyo(e,t,n){var i=t-e,r=2*i;return P(e)?We(e,wrapYoyo(0,e.length-1),t):Oe(n,function(t){return e+((t=(r+(t-e)%r)%r||0)>i?r-t:t)})},distribute:He,random:Ge,snap:je,normalize:function normalize(e,t,n){return Xe(e,t,0,1,n)},getUnit:Ie,clamp:function clamp(e,t,n){return Oe(n,function(n){return ke(e,t,n)})},splitColor:Qe,toArray:ze,mapRange:Xe,pipe:function pipe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function unitize(e,t){return function(n){return e(parseFloat(n))+(t||Ie(n))}},interpolate:function interpolate(e,t,n,i){var r=isNaN(e+t)?0:function(n){return(1-n)*e+n*t};if(!r){var a,s,o,l,c,u=_(e),h={};if(!0===n&&(i=1)&&(n=null),u)e={p:e},t={p:t};else if(P(e)&&!P(t)){for(o=[],l=e.length,c=l-2,s=1;s<l;s++)o.push(interpolate(e[s-1],e[s]));l--,r=function func(e){e*=l;var t=Math.min(c,~~e);return o[t](e-t)},n=t}else i||(e=de(P(e)?[]:{},e));if(!o){for(a in t)wt.call(h,e,a,\"get\",t[a]);r=function func(t){return Bt(t,h)||(u?e.p:e)}}}return Oe(n,r)},shuffle:Fe},install:F,effects:$,ticker:at,updateRoot:xt.updateRoot,plugins:Y,globalTimeline:r,core:{PropTween:Ut,globals:j,Tween:Ct,Timeline:xt,Animation:bt,getCache:ee,_removeLinkedListItem:ge,suppressOverwrites:function suppressOverwrites(e){return i=e}}};ne(\"to,from,fromTo,delayedCall,set,killTweensOf\",function(e){return jt[e]=Ct[e]}),at.add(xt.updateRoot),u=jt.to({},{duration:0});var Gt=function _getPluginPropTween(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Wt=function _buildModifierPlugin(e,t){return{name:e,rawVars:1,init:function init(e,n,i){i._onInit=function(e){var i,r;if(_(n)&&(i={},ne(n,function(e){return i[e]=1}),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function _addModifiers(e,t){var n,i,r,a=e._targets;for(n in t)for(i=a.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Gt(r,n)),r&&r.modifier&&r.modifier(t[n],e,a[i],n))}(e,n)}}}},qt=jt.registerPlugin({name:\"attr\",init:function init(e,t,n,i,r){var a,s;for(a in t)(s=this.add(e,\"setAttribute\",(e.getAttribute(a)||0)+\"\",t[a],i,r,0,0,a))&&(s.op=a),this._props.push(a)}},{name:\"endArray\",init:function init(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},Wt(\"roundProps\",Ue),Wt(\"modifiers\"),Wt(\"snap\",je))||jt;Ct.version=xt.version=qt.version=\"3.6.0\",l=1,A()&&st();ot.Power0,ot.Power1,ot.Power2,ot.Power3,ot.Power4,ot.Linear,ot.Quad,ot.Cubic,ot.Quart,ot.Quint,ot.Strong,ot.Elastic,ot.Back,ot.SteppedEase,ot.Bounce,ot.Sine,ot.Expo,ot.Circ;var Xt,Yt,$t,Zt,Jt,Kt,Qt,en,tn={},nn=180/Math.PI,rn=Math.PI/180,an=Math.atan2,sn=/([A-Z])/g,on=/(?:left|right|width|margin|padding|x)/i,ln=/[\\s,\\(]\\S/,cn={autoAlpha:\"opacity,visibility\",scale:\"scaleX,scaleY\",alpha:\"opacity\"},un=function _renderCSSProp(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},hn=function _renderPropWithEnd(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},dn=function _renderCSSPropWithBeginning(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},pn=function _renderRoundedCSSProp(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},fn=function _renderNonTweeningValue(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},mn=function _renderNonTweeningValueOnlyAtEnd(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},gn=function _setterCSSStyle(e,t,n){return e.style[t]=n},yn=function _setterCSSProp(e,t,n){return e.style.setProperty(t,n)},vn=function _setterTransform(e,t,n){return e._gsap[t]=n},bn=function _setterScale(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},xn=function _setterScaleWithRender(e,t,n,i,r){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},_n=function _setterTransformWithRender(e,t,n,i,r){var a=e._gsap;a[t]=n,a.renderTransform(r,a)},wn=\"transform\",Tn=wn+\"Origin\",Mn=function _createElement(e,t){var n=Yt.createElementNS?Yt.createElementNS((t||\"http://www.w3.org/1999/xhtml\").replace(/^https/,\"http\"),e):Yt.createElement(e);return n.style?n:Yt.createElement(e)},Sn=function _getComputedProperty(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(sn,\"-$1\").toLowerCase())||i.getPropertyValue(t)||!n&&_getComputedProperty(e,An(t)||t,1)||\"\"},En=\"O,Moz,ms,Ms,Webkit\".split(\",\"),An=function _checkPropPrefix(e,t,n){var i=(t||Jt).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(En[r]+e in i););return r<0?null:(3===r?\"ms\":r>=0?En[r]:\"\")+e},Cn=function _initCore(){(function _windowExists(){return\"undefined\"!=typeof window})()&&window.document&&(Xt=window,Yt=Xt.document,$t=Yt.documentElement,Jt=Mn(\"div\")||{style:{}},Kt=Mn(\"div\"),wn=An(wn),Tn=wn+\"Origin\",Jt.style.cssText=\"border-width:0;line-height:0;position:absolute;padding:0\",en=!!An(\"perspective\"),Zt=1)},Ln=function _getBBoxHack(e){var t,n=Mn(\"svg\",this.ownerSVGElement&&this.ownerSVGElement.getAttribute(\"xmlns\")||\"http://www.w3.org/2000/svg\"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if($t.appendChild(n),n.appendChild(this),this.style.display=\"block\",e)try{t=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=_getBBoxHack}catch(e){}else this._gsapBBox&&(t=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),$t.removeChild(n),this.style.cssText=a,t},Pn=function _getAttributeFallbacks(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Rn=function _getBBox(e){var t;try{t=e.getBBox()}catch(n){t=Ln.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Ln||(t=Ln.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Pn(e,[\"x\",\"cx\",\"x1\"])||0,y:+Pn(e,[\"y\",\"cy\",\"y1\"])||0,width:0,height:0}},Dn=function _isSVG(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Rn(e))},On=function _removeProperty(e,t){if(t){var n=e.style;t in tn&&t!==Tn&&(t=wn),n.removeProperty?(\"ms\"!==t.substr(0,2)&&\"webkit\"!==t.substr(0,6)||(t=\"-\"+t),n.removeProperty(t.replace(sn,\"-$1\").toLowerCase())):n.removeAttribute(t)}},kn=function _addNonTweeningPT(e,t,n,i,r,a){var s=new Ut(e._pt,t,n,0,1,a?mn:fn);return e._pt=s,s.b=i,s.e=r,e._props.push(n),s},In={deg:1,rad:1,turn:1},Nn=function _convertToUnit(e,t,n,i){var r,a,s,o,l=parseFloat(n)||0,c=(n+\"\").trim().substr((l+\"\").length)||\"px\",u=Jt.style,h=on.test(t),d=\"svg\"===e.tagName.toLowerCase(),p=(d?\"client\":\"offset\")+(h?\"Width\":\"Height\"),f=\"px\"===i,m=\"%\"===i;return i===c||!l||In[i]||In[c]?l:(\"px\"!==c&&!f&&(l=_convertToUnit(e,t,n,\"px\")),o=e.getCTM&&Dn(e),!m&&\"%\"!==c||!tn[t]&&!~t.indexOf(\"adius\")?(u[h?\"width\":\"height\"]=100+(f?c:i),a=~t.indexOf(\"adius\")||\"em\"===i&&e.appendChild&&!d?e:e.parentNode,o&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Yt&&a.appendChild||(a=Yt.body),(s=a._gsap)&&m&&s.width&&h&&s.time===at.time?ie(l/s.width*100):((m||\"%\"===c)&&(u.position=Sn(e,\"position\")),a===e&&(u.position=\"static\"),a.appendChild(Jt),r=Jt[p],a.removeChild(Jt),u.position=\"absolute\",h&&m&&((s=ee(a)).time=at.time,s.width=a[p]),ie(f?r*l/100:r&&l?100/r*l:0))):(r=o?e.getBBox()[h?\"width\":\"height\"]:e[p],ie(m?l/r*100:l/100*r)))},Bn=function _get(e,t,n,i){var r;return Zt||Cn(),t in cn&&\"transform\"!==t&&~(t=cn[t]).indexOf(\",\")&&(t=t.split(\",\")[0]),tn[t]&&\"transform\"!==t?(r=$n(e,i),r=\"transformOrigin\"!==t?r[t]:Zn(Sn(e,Tn))+\" \"+r.zOrigin+\"px\"):(!(r=e.style[t])||\"auto\"===r||i||~(r+\"\").indexOf(\"calc(\"))&&(r=Un[t]&&Un[t](e,t,n)||Sn(e,t)||te(e,t)||(\"opacity\"===t?1:0)),n&&!~(r+\"\").trim().indexOf(\" \")?Nn(e,t,r,n)+n:r},Vn=function _tweenComplexCSSString(e,t,n,i){if(!n||\"none\"===n){var r=An(t,e,1),a=r&&Sn(e,r,1);a&&a!==n?(t=r,n=a):\"borderColor\"===t&&(n=Sn(e,\"borderTopColor\"))}var s,o,l,c,u,h,p,f,m,g,y,v,b=new Ut(this._pt,e.style,t,0,1,Nt),x=0,_=0;if(b.b=n,b.e=i,n+=\"\",\"auto\"===(i+=\"\")&&(e.style[t]=i,i=Sn(e,t)||i,e.style[t]=n),rt(s=[n,i]),i=s[1],l=(n=s[0]).match(O)||[],(i.match(O)||[]).length){for(;o=O.exec(i);)p=o[0],m=i.substring(x,o.index),u?u=(u+1)%5:\"rgba(\"!==m.substr(-5)&&\"hsla(\"!==m.substr(-5)||(u=1),p!==(h=l[_++]||\"\")&&(c=parseFloat(h)||0,y=h.substr((c+\"\").length),(v=\"=\"===p.charAt(1)?+(p.charAt(0)+\"1\"):0)&&(p=p.substr(2)),f=parseFloat(p),g=p.substr((f+\"\").length),x=O.lastIndex-g.length,g||(g=g||d.units[t]||y,x===i.length&&(i+=g,b.e+=g)),y!==g&&(c=Nn(e,t,h,g)||0),b._pt={_next:b._pt,p:m||1===_?m:\",\",s:c,c:v?v*f:f-c,m:u&&u<4||\"zIndex\"===t?Math.round:0});b.c=x<i.length?i.substring(x,i.length):\"\"}else b.r=\"display\"===t&&\"none\"===i?mn:fn;return I.test(i)&&(b.e=0),this._pt=b,b},zn={top:\"0%\",bottom:\"100%\",left:\"0%\",right:\"100%\",center:\"50%\"},Fn=function _convertKeywordsToPercentages(e){var t=e.split(\" \"),n=t[0],i=t[1]||\"50%\";return\"top\"!==n&&\"bottom\"!==n&&\"left\"!==i&&\"right\"!==i||(e=n,n=i,i=e),t[0]=zn[n]||n,t[1]=zn[i]||i,t.join(\" \")},Hn=function _renderClearProps(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,a=t.t,s=a.style,o=t.u,l=a._gsap;if(\"all\"===o||!0===o)s.cssText=\"\",i=1;else for(r=(o=o.split(\",\")).length;--r>-1;)n=o[r],tn[n]&&(i=1,n=\"transformOrigin\"===n?Tn:wn),On(a,n);i&&(On(a,wn),l&&(l.svg&&a.removeAttribute(\"transform\"),$n(a,1),l.uncache=1))}},Un={clearProps:function clearProps(e,t,n,i,r){if(\"isFromStart\"!==r.data){var a=e._pt=new Ut(e._pt,t,n,0,0,Hn);return a.u=i,a.pr=-10,a.tween=r,e._props.push(n),1}}},jn=[1,0,0,1,0,0],Gn={},Wn=function _isNullTransform(e){return\"matrix(1, 0, 0, 1, 0, 0)\"===e||\"none\"===e||!e},qn=function _getComputedTransformMatrixAsArray(e){var t=Sn(e,wn);return Wn(t)?jn:t.substr(7).match(D).map(ie)},Xn=function _getMatrix(e,t){var n,i,r,a,s=e._gsap||ee(e),o=e.style,l=qn(e);return s.svg&&e.getAttribute(\"transform\")?\"1,0,0,1,0,0\"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(\",\")?jn:l:(l!==jn||e.offsetParent||e===$t||s.svg||(r=o.display,o.display=\"block\",(n=e.parentNode)&&e.offsetParent||(a=1,i=e.nextSibling,$t.appendChild(e)),l=qn(e),r?o.display=r:On(e,\"display\"),a&&(i?n.insertBefore(e,i):n?n.appendChild(e):$t.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Yn=function _applySVGOrigin(e,t,n,i,r,a){var s,o,l,c=e._gsap,u=r||Xn(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],g=u[1],y=u[2],v=u[3],b=u[4],x=u[5],_=t.split(\" \"),w=parseFloat(_[0])||0,T=parseFloat(_[1])||0;n?u!==jn&&(o=m*v-g*y)&&(l=w*(-g/o)+T*(m/o)-(m*x-g*b)/o,w=w*(v/o)+T*(-y/o)+(y*x-v*b)/o,T=l):(w=(s=Rn(e)).x+(~_[0].indexOf(\"%\")?w/100*s.width:w),T=s.y+(~(_[1]||_[0]).indexOf(\"%\")?T/100*s.height:T)),i||!1!==i&&c.smooth?(b=w-h,x=T-d,c.xOffset=p+(b*m+x*y)-b,c.yOffset=f+(b*g+x*v)-x):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=T,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[Tn]=\"0px 0px\",a&&(kn(a,c,\"xOrigin\",h,w),kn(a,c,\"yOrigin\",d,T),kn(a,c,\"xOffset\",p,c.xOffset),kn(a,c,\"yOffset\",f,c.yOffset)),e.setAttribute(\"data-svg-origin\",w+\" \"+T)},$n=function _parseTransform(e,t){var n=e._gsap||new vt(e);if(\"x\"in n&&!t&&!n.uncache)return n;var i,r,a,s,o,l,c,u,h,p,f,m,g,y,v,b,x,_,w,T,M,S,E,A,C,L,P,R,D,O,k,I,N=e.style,B=n.scaleX<0,V=Sn(e,Tn)||\"0\";return i=r=a=l=c=u=h=p=f=0,s=o=1,n.svg=!(!e.getCTM||!Dn(e)),y=Xn(e,n.svg),n.svg&&(A=!n.uncache&&e.getAttribute(\"data-svg-origin\"),Yn(e,A||V,!!A||n.originIsAbsolute,!1!==n.smooth,y)),m=n.xOrigin||0,g=n.yOrigin||0,y!==jn&&(_=y[0],w=y[1],T=y[2],M=y[3],i=S=y[4],r=E=y[5],6===y.length?(s=Math.sqrt(_*_+w*w),o=Math.sqrt(M*M+T*T),l=_||w?an(w,_)*nn:0,(h=T||M?an(T,M)*nn+l:0)&&(o*=Math.cos(h*rn)),n.svg&&(i-=m-(m*_+g*T),r-=g-(m*w+g*M))):(I=y[6],O=y[7],P=y[8],R=y[9],D=y[10],k=y[11],i=y[12],r=y[13],a=y[14],c=(v=an(I,D))*nn,v&&(A=S*(b=Math.cos(-v))+P*(x=Math.sin(-v)),C=E*b+R*x,L=I*b+D*x,P=S*-x+P*b,R=E*-x+R*b,D=I*-x+D*b,k=O*-x+k*b,S=A,E=C,I=L),u=(v=an(-T,D))*nn,v&&(b=Math.cos(-v),k=M*(x=Math.sin(-v))+k*b,_=A=_*b-P*x,w=C=w*b-R*x,T=L=T*b-D*x),l=(v=an(w,_))*nn,v&&(A=_*(b=Math.cos(v))+w*(x=Math.sin(v)),C=S*b+E*x,w=w*b-_*x,E=E*b-S*x,_=A,S=C),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),s=ie(Math.sqrt(_*_+w*w+T*T)),o=ie(Math.sqrt(E*E+I*I)),v=an(S,E),h=Math.abs(v)>2e-4?v*nn:0,f=k?1/(k<0?-k:k):0),n.svg&&(A=e.getAttribute(\"transform\"),n.forceCSS=e.setAttribute(\"transform\",\"\")||!Wn(Sn(e,wn)),A&&e.setAttribute(\"transform\",A))),Math.abs(h)>90&&Math.abs(h)<270&&(B?(s*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),n.x=i-((n.xPercent=i&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+\"px\",n.y=r-((n.yPercent=r&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+\"px\",n.z=a+\"px\",n.scaleX=ie(s),n.scaleY=ie(o),n.rotation=ie(l)+\"deg\",n.rotationX=ie(c)+\"deg\",n.rotationY=ie(u)+\"deg\",n.skewX=h+\"deg\",n.skewY=p+\"deg\",n.transformPerspective=f+\"px\",(n.zOrigin=parseFloat(V.split(\" \")[2])||0)&&(N[Tn]=Zn(V)),n.xOffset=n.yOffset=0,n.force3D=d.force3D,n.renderTransform=n.svg?ei:en?Qn:Kn,n.uncache=0,n},Zn=function _firstTwoOnly(e){return(e=e.split(\" \"))[0]+\" \"+e[1]},Jn=function _addPxTranslate(e,t,n){var i=Ie(t);return ie(parseFloat(t)+parseFloat(Nn(e,\"x\",n+\"px\",i)))+i},Kn=function _renderNon3DTransforms(e,t){t.z=\"0px\",t.rotationY=t.rotationX=\"0deg\",t.force3D=0,Qn(e,t)},Qn=function _renderCSSTransforms(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,a=n.x,s=n.y,o=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,y=n.target,v=n.zOrigin,b=\"\",x=\"auto\"===g&&e&&1!==e||!0===g;if(v&&(\"0deg\"!==u||\"0deg\"!==c)){var _,w=parseFloat(c)*rn,T=Math.sin(w),M=Math.cos(w);w=parseFloat(u)*rn,_=Math.cos(w),a=Jn(y,a,T*_*-v),s=Jn(y,s,-Math.sin(w)*-v),o=Jn(y,o,M*_*-v+v)}\"0px\"!==m&&(b+=\"perspective(\"+m+\") \"),(i||r)&&(b+=\"translate(\"+i+\"%, \"+r+\"%) \"),(x||\"0px\"!==a||\"0px\"!==s||\"0px\"!==o)&&(b+=\"0px\"!==o||x?\"translate3d(\"+a+\", \"+s+\", \"+o+\") \":\"translate(\"+a+\", \"+s+\") \"),\"0deg\"!==l&&(b+=\"rotate(\"+l+\") \"),\"0deg\"!==c&&(b+=\"rotateY(\"+c+\") \"),\"0deg\"!==u&&(b+=\"rotateX(\"+u+\") \"),\"0deg\"===h&&\"0deg\"===d||(b+=\"skew(\"+h+\", \"+d+\") \"),1===p&&1===f||(b+=\"scale(\"+p+\", \"+f+\") \"),y.style[wn]=b||\"translate(0, 0)\"},ei=function _renderSVGTransforms(e,t){var n,i,r,a,s,o=t||this,l=o.xPercent,c=o.yPercent,u=o.x,h=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,y=o.target,v=o.xOrigin,b=o.yOrigin,x=o.xOffset,_=o.yOffset,w=o.forceCSS,T=parseFloat(u),M=parseFloat(h);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=rn,p*=rn,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,a=Math.cos(d-p)*g,p&&(f*=rn,s=Math.tan(p-f),r*=s=Math.sqrt(1+s*s),a*=s,f&&(s=Math.tan(f),n*=s=Math.sqrt(1+s*s),i*=s)),n=ie(n),i=ie(i),r=ie(r),a=ie(a)):(n=m,a=g,i=r=0),(T&&!~(u+\"\").indexOf(\"px\")||M&&!~(h+\"\").indexOf(\"px\"))&&(T=Nn(y,\"x\",u,\"px\"),M=Nn(y,\"y\",h,\"px\")),(v||b||x||_)&&(T=ie(T+v-(v*n+b*r)+x),M=ie(M+b-(v*i+b*a)+_)),(l||c)&&(s=y.getBBox(),T=ie(T+l/100*s.width),M=ie(M+c/100*s.height)),s=\"matrix(\"+n+\",\"+i+\",\"+r+\",\"+a+\",\"+T+\",\"+M+\")\",y.setAttribute(\"transform\",s),w&&(y.style[wn]=s)},ti=function _addRotationalPropTween(e,t,n,i,r,a){var s,o,l=_(r),c=parseFloat(r)*(l&&~r.indexOf(\"rad\")?nn:1),u=a?c*a:c-i,h=i+u+\"deg\";return l&&(\"short\"===(s=r.split(\"_\")[1])&&(u%=360)!==u%180&&(u+=u<0?360:-360),\"cw\"===s&&u<0?u=(u+36e9)%360-360*~~(u/360):\"ccw\"===s&&u>0&&(u=(u-36e9)%360-360*~~(u/360))),e._pt=o=new Ut(e._pt,t,n,i,u,hn),o.e=h,o.u=\"deg\",e._props.push(n),o},ni=function _addRawTransformPTs(e,t,n){var i,r,a,s,o,l,c,u=Kt.style,h=n._gsap;for(r in u.cssText=getComputedStyle(n).cssText+\";position:absolute;display:block;\",u[wn]=t,Yt.body.appendChild(Kt),i=$n(Kt,1),tn)(a=h[r])!==(s=i[r])&&\"perspective,force3D,transformOrigin,svgOrigin\".indexOf(r)<0&&(o=Ie(a)!==(c=Ie(s))?Nn(n,r,a,c):parseFloat(a),l=parseFloat(s),e._pt=new Ut(e._pt,h,r,o,l-o,un),e._pt.u=c||0,e._props.push(r));Yt.body.removeChild(Kt)};ne(\"padding,margin,Width,Radius\",function(e,t){var n=\"Top\",i=\"Right\",r=\"Bottom\",a=\"Left\",s=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(n){return t<2?e+n:\"border\"+n+e});Un[t>1?\"border\"+e:e]=function(e,t,n,i,r){var a,o;if(arguments.length<4)return a=s.map(function(t){return Bn(e,t,n)}),5===(o=a.join(\" \")).split(a[0]).length?a[0]:o;a=(i+\"\").split(\" \"),o={},s.forEach(function(e,t){return o[e]=a[t]=a[t]||a[(t-1)/2|0]}),e.init(t,o,r)}});var ii={name:\"css\",register:Cn,targetTest:function targetTest(e){return e.style&&e.nodeType},init:function init(e,t,n,i,r){var a,s,o,l,c,u,h,p,f,m,g,y,v,b,x,_=this._props,w=e.style,T=n.vars.startAt;for(h in Zt||Cn(),t)if(\"autoRound\"!==h&&(s=t[h],!Y[h]||!Tt(h,t,n,i,e,r)))if(c=typeof s,u=Un[h],\"function\"===c&&(c=typeof(s=s.call(n,i,e,r))),\"string\"===c&&~s.indexOf(\"random(\")&&(s=qe(s)),u)u(this,e,h,s,n)&&(x=1);else if(\"--\"===h.substr(0,2))a=(getComputedStyle(e).getPropertyValue(h)+\"\").trim(),s+=\"\",p=Ie(a),(f=Ie(s))?p!==f&&(a=Nn(e,h,a,f)+f):p&&(s+=p),this.add(w,\"setProperty\",a,s,i,r,0,0,h);else if(\"undefined\"!==c){if(T&&h in T?(a=\"function\"==typeof T[h]?T[h].call(n,i,e,r):T[h],h in d.units&&!Ie(a)&&(a+=d.units[h]),\"=\"===(a+\"\").charAt(1)&&(a=Bn(e,h))):a=Bn(e,h),l=parseFloat(a),(m=\"string\"===c&&\"=\"===s.charAt(1)?+(s.charAt(0)+\"1\"):0)&&(s=s.substr(2)),o=parseFloat(s),h in cn&&(\"autoAlpha\"===h&&(1===l&&\"hidden\"===Bn(e,\"visibility\")&&o&&(l=0),kn(this,w,\"visibility\",l?\"inherit\":\"hidden\",o?\"inherit\":\"hidden\",!o)),\"scale\"!==h&&\"transform\"!==h&&~(h=cn[h]).indexOf(\",\")&&(h=h.split(\",\")[0])),g=h in tn)if(y||((v=e._gsap).renderTransform&&!t.parseTransform||$n(e,t.parseTransform),b=!1!==t.smoothOrigin&&v.smooth,(y=this._pt=new Ut(this._pt,w,wn,0,1,v.renderTransform,v,0,-1)).dep=1),\"scale\"===h)this._pt=new Ut(this._pt,v,\"scaleY\",v.scaleY,m?m*o:o-v.scaleY),_.push(\"scaleY\",h),h+=\"X\";else{if(\"transformOrigin\"===h){s=Fn(s),v.svg?Yn(e,s,0,b,0,this):((f=parseFloat(s.split(\" \")[2])||0)!==v.zOrigin&&kn(this,v,\"zOrigin\",v.zOrigin,f),kn(this,w,h,Zn(a),Zn(s)));continue}if(\"svgOrigin\"===h){Yn(e,s,1,b,0,this);continue}if(h in Gn){ti(this,v,h,l,s,m);continue}if(\"smoothOrigin\"===h){kn(this,v,\"smooth\",v.smooth,s);continue}if(\"force3D\"===h){v[h]=s;continue}if(\"transform\"===h){ni(this,s,e);continue}}else h in w||(h=An(h)||h);if(g||(o||0===o)&&(l||0===l)&&!ln.test(s)&&h in w)p=(a+\"\").substr((l+\"\").length),o||(o=0),p!==(f=Ie(s)||(h in d.units?d.units[h]:p))&&(l=Nn(e,h,a,f)),this._pt=new Ut(this._pt,g?v:w,h,l,m?m*o:o-l,g||\"px\"!==f&&\"zIndex\"!==h||!1===t.autoRound?un:pn),this._pt.u=f||0,p!==f&&(this._pt.b=a,this._pt.r=dn);else if(h in w)Vn.call(this,e,h,a,s);else{if(!(h in e)){H(h,s);continue}this.add(e,h,e[h],s,i,r)}_.push(h)}x&&Ht(this)},get:Bn,aliases:cn,getSetter:function getSetter(e,t,n){var i=cn[t];return i&&i.indexOf(\",\")<0&&(t=i),t in tn&&t!==Tn&&(e._gsap.x||Bn(e,\"x\"))?n&&Qt===n?\"scale\"===t?bn:vn:(Qt=n||{})&&(\"scale\"===t?xn:_n):e.style&&!M(e.style[t])?gn:~t.indexOf(\"-\")?yn:Ot(e,t)},core:{_removeProperty:On,_getMatrix:Xn}};qt.utils.checkPrefix=An,function(e,t,n,i){var r=ne(\"x,y,z,scale,scaleX,scaleY,xPercent,yPercent,\"+t+\",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective\",function(e){tn[e]=1});ne(t,function(e){d.units[e]=\"deg\",Gn[e]=1}),cn[r[13]]=\"x,y,z,scale,scaleX,scaleY,xPercent,yPercent,\"+t,ne(\"0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY\",function(e){var t=e.split(\":\");cn[t[1]]=r[t[0]]})}(0,\"rotation,rotationX,rotationY,skewX,skewY\"),ne(\"x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective\",function(e){d.units[e]=\"px\"}),qt.registerPlugin(ii);var ri=qt.registerPlugin(ii)||qt;ri.core.Tween},function(e,t,n){\"use strict\";var i=n(5),r=n(1),a=n(2),s=n(0),o=n(9);const l={getSources(){if(!this.isHTML5)return[];return Array.from(this.media.querySelectorAll(\"source\")).filter(e=>{const t=e.getAttribute(\"type\");return!!s.a.empty(t)||i.a.mime.call(this,t)})},getQualityOptions(){return l.getSources.call(this).map(e=>Number(e.getAttribute(\"size\"))).filter(Boolean)},extend(){if(!this.isHTML5)return;const e=this;s.a.empty(this.config.ratio)||o.c.call(e),Object.defineProperty(e.media,\"quality\",{get(){const t=l.getSources.call(e).find(t=>t.getAttribute(\"src\")===e.source);return t&&Number(t.getAttribute(\"size\"))},set(t){const n=l.getSources.call(e).find(e=>Number(e.getAttribute(\"size\"))===t);if(!n)return;const{currentTime:i,paused:r,preload:s,readyState:o}=e.media;e.media.src=n.getAttribute(\"src\"),(\"none\"!==s||o)&&(e.once(\"loadedmetadata\",()=>{e.currentTime=i,r||e.play()}),e.media.load()),a.f.call(e,e.media,\"qualitychange\",!1,{quality:t})}})},cancelRequests(){this.isHTML5&&(Object(r.j)(l.getSources.call(this)),this.media.setAttribute(\"src\",this.config.blankVideo),this.media.load(),this.debug.log(\"Cancelled network requests\"))}};t.a=l},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return loadScript});var i=n(38),r=n.n(i);function loadScript(e){return new Promise((t,n)=>{r()(e,{success:t,error:n})})}},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return loadImage});function loadImage(e,t=1){return new Promise((n,i)=>{const r=new Image,a=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=t?n:i)(r)};Object.assign(r,{onload:a,onerror:a,src:e})})}},function(e,t,n){\"use strict\";n.r(t),function(e){function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if(\"string\"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,\"dump\",function(){return dump}),n.d(t,\"dispachEvent\",function(){return dispachEvent}),n.d(t,\"isDefined\",function(){return isDefined}),n.d(t,\"exist\",function(){return exist}),n.d(t,\"isValidEmail\",function(){return isValidEmail}),n.d(t,\"setCookie\",function(){return setCookie}),n.d(t,\"getCookie\",function(){return getCookie}),n.d(t,\"deleteCookie\",function(){return deleteCookie});function dump(e){console.log(e)}function dispachEvent(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.Event(n);if(null!==i)for(var a=0,s=Object.entries(i);a<s.length;a++){var o=_slicedToArray(s[a],2),l=o[0],c=o[1];r[l]=c}t.trigger(r)}function isDefined(e){return void 0!==e}function exist(e){return e.length}function isValidEmail(e){return/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function setCookie(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r=\"expires=\"+i.toUTCString();document.cookie=e+\"=\"+t+\";\"+r+\";path=/\"}function getCookie(e){for(var t=e+\"=\",n=decodeURIComponent(document.cookie).split(\";\"),i=0;i<n.length;i++){for(var r=n[i];\" \"==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function deleteCookie(e){document.cookie=e+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\"}e.fn.replaceClass=function(t,n){return this.each(function(){e(this).removeClass(t).addClass(n)})}}.call(this,n(13))},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return loadSprite});var i=n(25),r=n(14),a=n(0);function loadSprite(e,t){if(!a.a.string(e))return;const n=a.a.string(t);let s=!1;const o=()=>null!==document.getElementById(t),l=(e,t)=>{e.innerHTML=t,n&&o()||document.body.insertAdjacentElement(\"afterbegin\",e)};if(!n||!o()){const o=i.a.supported,c=document.createElement(\"div\");if(c.setAttribute(\"hidden\",\"\"),n&&c.setAttribute(\"id\",t),o){const e=window.localStorage.getItem(`cache-${t}`);if(s=null!==e){const t=JSON.parse(e);l(c,t.content)}}Object(r.a)(e).then(e=>{a.a.empty(e)||(o&&window.localStorage.setItem(`cache-${t}`,JSON.stringify({content:e})),l(c,e))}).catch(()=>{})}}},function(e,t,n){\"use strict\";var i=n(0),r=n(4);class Storage{constructor(e){this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!(\"localStorage\"in window))return!1;const e=\"___test\";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}get(e){if(!Storage.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(i.a.empty(t))return null;const n=JSON.parse(t);return i.a.string(e)&&e.length?n[e]:n}set(e){if(!Storage.supported||!this.enabled)return;if(!i.a.object(e))return;let t=this.get();i.a.empty(t)&&(t={}),Object(r.b)(t,e),window.localStorage.setItem(this.key,JSON.stringify(t))}}t.a=Storage},function(e,t,n){\"use strict\";var i=n(20),r=n(11),a=n(3),s=n(6),o=n(1),l=n(2),c=n(14),u=n(0),h=n(21),d=n(4),p=n(10),f=n(9),m=n(15);function assurePlaybackState(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,l.f.call(this,this.media,e?\"play\":\"pause\"))}const g={setup(){Object(o.n)(this.elements.wrapper,this.config.classNames.embed,!0),f.c.call(this),u.a.object(window.Vimeo)?g.ready.call(this):Object(h.a)(this.config.urls.vimeo.sdk).then(()=>{g.ready.call(this)}).catch(e=>{this.debug.warn(\"Vimeo SDK (player.js) failed to load\",e)})},ready(){const e=this,t=e.config.vimeo,n=Object(m.a)(Object(d.b)({},{loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:\"media\",playsinline:!this.config.fullscreen.iosNative},t));let i=e.media.getAttribute(\"src\");u.a.empty(i)&&(i=e.media.getAttribute(e.config.attributes.embed.id));const h=function parseId(e){return u.a.empty(e)?null:u.a.number(Number(e))?e:e.match(/^.*(vimeo.com\\/|video\\/)(\\d+).*/)?RegExp.$2:e}(i),g=Object(o.a)(\"iframe\"),y=Object(p.a)(e.config.urls.vimeo.iframe,h,n);g.setAttribute(\"src\",y),g.setAttribute(\"allowfullscreen\",\"\"),g.setAttribute(\"allowtransparency\",\"\"),g.setAttribute(\"allow\",\"autoplay\");const{poster:v}=e,b=Object(o.a)(\"div\",{poster:v,class:e.config.classNames.embedContainer});b.appendChild(g),e.media=Object(o.k)(b,e.media),Object(c.a)(Object(p.a)(e.config.urls.vimeo.api,h),\"json\").then(t=>{if(u.a.empty(t))return;const n=new URL(t[0].thumbnail_large);n.pathname=`${n.pathname.split(\"_\")[0]}.jpg`,s.a.setPoster.call(e,n.href).catch(()=>{})}),e.embed=new window.Vimeo.Player(g,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=(()=>(assurePlaybackState.call(e,!0),e.embed.play())),e.media.pause=(()=>(assurePlaybackState.call(e,!1),e.embed.pause())),e.media.stop=(()=>{e.pause(),e.currentTime=0});let{currentTime:x}=e.media;Object.defineProperty(e.media,\"currentTime\",{get:()=>x,set(t){const{embed:n,media:i,paused:r,volume:a}=e,s=r&&!n.hasPlayed;i.seeking=!0,l.f.call(e,i,\"seeking\"),Promise.resolve(s&&n.setVolume(0)).then(()=>n.setCurrentTime(t)).then(()=>s&&n.pause()).then(()=>s&&n.setVolume(a)).catch(()=>{})}});let _=e.config.speed.selected;Object.defineProperty(e.media,\"playbackRate\",{get:()=>_,set(t){e.embed.setPlaybackRate(t).then(()=>{_=t,l.f.call(e,e.media,\"ratechange\")}).catch(t=>{\"Error\"===t.name&&a.a.setSpeedMenu.call(e,[])})}});let{volume:w}=e.config;Object.defineProperty(e.media,\"volume\",{get:()=>w,set(t){e.embed.setVolume(t).then(()=>{w=t,l.f.call(e,e.media,\"volumechange\")})}});let{muted:T}=e.config;Object.defineProperty(e.media,\"muted\",{get:()=>T,set(t){const n=!!u.a.boolean(t)&&t;e.embed.setVolume(n?0:e.config.volume).then(()=>{T=n,l.f.call(e,e.media,\"volumechange\")})}});let M,{loop:S}=e.config;Object.defineProperty(e.media,\"loop\",{get:()=>S,set(t){const n=u.a.boolean(t)?t:e.config.loop.active;e.embed.setLoop(n).then(()=>{S=n})}}),e.embed.getVideoUrl().then(t=>{M=t,a.a.setDownloadUrl.call(e)}).catch(e=>{this.debug.warn(e)}),Object.defineProperty(e.media,\"currentSrc\",{get:()=>M}),Object.defineProperty(e.media,\"ended\",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(t=>{const[n,i]=t;e.embed.ratio=[n,i],f.c.call(this)}),e.embed.setAutopause(e.config.autopause).then(t=>{e.config.autopause=t}),e.embed.getVideoTitle().then(t=>{e.config.title=t,s.a.setTitle.call(this)}),e.embed.getCurrentTime().then(t=>{x=t,l.f.call(e,e.media,\"timeupdate\")}),e.embed.getDuration().then(t=>{e.media.duration=t,l.f.call(e,e.media,\"durationchange\")}),e.embed.getTextTracks().then(t=>{e.media.textTracks=t,r.a.setup.call(e)}),e.embed.on(\"cuechange\",({cues:t=[]})=>{const n=t.map(e=>Object(p.f)(e.text));r.a.updateCues.call(e,n)}),e.embed.on(\"loaded\",()=>{if(e.embed.getPaused().then(t=>{assurePlaybackState.call(e,!t),t||l.f.call(e,e.media,\"playing\")}),u.a.element(e.embed.element)&&e.supported.ui){e.embed.element.setAttribute(\"tabindex\",-1)}}),e.embed.on(\"play\",()=>{assurePlaybackState.call(e,!0),l.f.call(e,e.media,\"playing\")}),e.embed.on(\"pause\",()=>{assurePlaybackState.call(e,!1)}),e.embed.on(\"timeupdate\",t=>{e.media.seeking=!1,x=t.seconds,l.f.call(e,e.media,\"timeupdate\")}),e.embed.on(\"progress\",t=>{e.media.buffered=t.percent,l.f.call(e,e.media,\"progress\"),1===parseInt(t.percent,10)&&l.f.call(e,e.media,\"canplaythrough\"),e.embed.getDuration().then(t=>{t!==e.media.duration&&(e.media.duration=t,l.f.call(e,e.media,\"durationchange\"))})}),e.embed.on(\"seeked\",()=>{e.media.seeking=!1,l.f.call(e,e.media,\"seeked\")}),e.embed.on(\"ended\",()=>{e.media.paused=!0,l.f.call(e,e.media,\"ended\")}),e.embed.on(\"error\",t=>{e.media.error=t,l.f.call(e,e.media,\"error\")}),setTimeout(()=>s.a.build.call(e),0)}};var y=g,v=n(22);function youtube_assurePlaybackState(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,l.f.call(this,this.media,e?\"play\":\"pause\"))}const b={setup(){if(Object(o.n)(this.elements.wrapper,this.config.classNames.embed,!0),u.a.object(window.YT)&&u.a.function(window.YT.Player))b.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=(()=>{u.a.function(e)&&e(),b.ready.call(this)}),Object(h.a)(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn(\"YouTube API failed to load\",e)})}},getTitle(e){const t=Object(p.a)(this.config.urls.youtube.api,e);Object(c.a)(t).then(e=>{if(u.a.object(e)){const{title:t,height:n,width:i}=e;this.config.title=t,s.a.setTitle.call(this),this.embed.ratio=[i,n]}f.c.call(this)}).catch(()=>{f.c.call(this)})},ready(){const e=this,t=e.media&&e.media.getAttribute(\"id\");if(!u.a.empty(t)&&t.startsWith(\"youtube-\"))return;let n=e.media.getAttribute(\"src\");u.a.empty(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));const i=function youtube_parseId(e){return u.a.empty(e)?null:e.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}(n),r=Object(p.b)(e.provider),{poster:a}=e,c=Object(o.a)(\"div\",{id:r,poster:a});e.media=Object(o.k)(c,e.media);const h=e=>`https://i.ytimg.com/vi/${i}/${e}default.jpg`;Object(v.a)(h(\"maxres\"),121).catch(()=>Object(v.a)(h(\"sd\"),121)).catch(()=>Object(v.a)(h(\"hq\"))).then(t=>s.a.setPoster.call(e,t.src)).then(t=>{t.includes(\"maxres\")||(e.elements.poster.style.backgroundSize=\"cover\")}).catch(()=>{});const f=e.config.youtube;e.embed=new window.YT.Player(r,{videoId:i,host:function getHost(e){return e.noCookie?\"https://www.youtube-nocookie.com\":\"http:\"===window.location.protocol?\"http://www.youtube.com\":void 0}(f),playerVars:Object(d.b)({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},f),events:{onError(t){if(!e.media.error){const n=t.data,i={2:\"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.\",5:\"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.\",100:\"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.\",101:\"The owner of the requested video does not allow it to be played in embedded players.\",150:\"The owner of the requested video does not allow it to be played in embedded players.\"}[n]||\"An unknown error occured\";e.media.error={code:n,message:i},l.f.call(e,e.media,\"error\")}},onPlaybackRateChange(t){const n=t.target;e.media.playbackRate=n.getPlaybackRate(),l.f.call(e,e.media,\"ratechange\")},onReady(t){if(u.a.function(e.media.play))return;const n=t.target;b.getTitle.call(e,i),e.media.play=(()=>{youtube_assurePlaybackState.call(e,!0),n.playVideo()}),e.media.pause=(()=>{youtube_assurePlaybackState.call(e,!1),n.pauseVideo()}),e.media.stop=(()=>{n.stopVideo()}),e.media.duration=n.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,\"currentTime\",{get:()=>Number(n.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,l.f.call(e,e.media,\"seeking\"),n.seekTo(t)}}),Object.defineProperty(e.media,\"playbackRate\",{get:()=>n.getPlaybackRate(),set(e){n.setPlaybackRate(e)}});let{volume:r}=e.config;Object.defineProperty(e.media,\"volume\",{get:()=>r,set(t){r=t,n.setVolume(100*r),l.f.call(e,e.media,\"volumechange\")}});let{muted:a}=e.config;Object.defineProperty(e.media,\"muted\",{get:()=>a,set(t){const i=u.a.boolean(t)?t:a;a=i,n[i?\"mute\":\"unMute\"](),l.f.call(e,e.media,\"volumechange\")}}),Object.defineProperty(e.media,\"currentSrc\",{get:()=>n.getVideoUrl()}),Object.defineProperty(e.media,\"ended\",{get:()=>e.currentTime===e.duration}),e.options.speed=n.getAvailablePlaybackRates(),e.supported.ui&&e.media.setAttribute(\"tabindex\",-1),l.f.call(e,e.media,\"timeupdate\"),l.f.call(e,e.media,\"durationchange\"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=n.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&l.f.call(e,e.media,\"progress\"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),l.f.call(e,e.media,\"canplaythrough\"))},200),setTimeout(()=>s.a.build.call(e),50)},onStateChange(t){const n=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,l.f.call(e,e.media,\"seeked\")),t.data){case-1:l.f.call(e,e.media,\"timeupdate\"),e.media.buffered=n.getVideoLoadedFraction(),l.f.call(e,e.media,\"progress\");break;case 0:youtube_assurePlaybackState.call(e,!1),e.media.loop?(n.stopVideo(),n.playVideo()):l.f.call(e,e.media,\"ended\");break;case 1:e.config.autoplay||!e.media.paused||e.embed.hasPlayed?(youtube_assurePlaybackState.call(e,!0),l.f.call(e,e.media,\"playing\"),e.timers.playing=setInterval(()=>{l.f.call(e,e.media,\"timeupdate\")},50),e.media.duration!==n.getDuration()&&(e.media.duration=n.getDuration(),l.f.call(e,e.media,\"durationchange\"))):e.media.pause();break;case 2:e.muted||e.embed.unMute(),youtube_assurePlaybackState.call(e,!1)}l.f.call(e,e.elements.container,\"statechange\",!1,{code:t.data})}}})}};var x=b;const _={setup(){this.media?(Object(o.n)(this.elements.container,this.config.classNames.type.replace(\"{0}\",this.type),!0),Object(o.n)(this.elements.container,this.config.classNames.provider.replace(\"{0}\",this.provider),!0),this.isEmbed&&Object(o.n)(this.elements.container,this.config.classNames.type.replace(\"{0}\",\"video\"),!0),this.isVideo&&(this.elements.wrapper=Object(o.a)(\"div\",{class:this.config.classNames.video}),Object(o.q)(this.media,this.elements.wrapper),this.elements.poster=Object(o.a)(\"div\",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?i.a.extend.call(this):this.isYouTube?x.setup.call(this):this.isVimeo&&y.setup.call(this)):this.debug.warn(\"No media element found!\")}};t.a=_},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});const i={active:\"picture-in-picture\",inactive:\"inline\"}},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return qe});var i,r,a,s,o,l,c,u,h,d,p,f,m,g,y,v,b,x,_,w,T,M,S,E,A,C,L,P=1,R=[],D=[],O=Date.now,k=O(),I=0,N=1,B=function _passThrough(e){return e},V=function _windowExists(){return\"undefined\"!=typeof window},z=function _getGSAP(){return i||V()&&(i=window.gsap)&&i.registerPlugin&&i},F=function _isViewport(e){return!!~c.indexOf(e)},H=function _getProxyProp(e,t){return~R.indexOf(e)&&R[R.indexOf(e)+1][t]},U=function _getScrollFunc(e,t){var n=t.s,i=t.sc,r=D.indexOf(e),a=i===ne.sc?1:2;return!~r&&(r=D.push(e)-1),D[r+a]||(D[r+a]=H(e,n)||(F(e)?i:function(t){return arguments.length?e[n]=t:e[n]}))},j=function _getBoundsFunc(e){return H(e,\"getBoundingClientRect\")||(F(e)?function(){return He.width=a.innerWidth,He.height=a.innerHeight,He}:function(){return ae(e)})},G=function _maxScroll(e,t){var n=t.s,i=t.d2,r=t.d,s=t.a;return(n=\"scroll\"+i)&&(s=H(e,n))?s()-j(e)()[r]:F(e)?Math.max(o[n],l[n])-(a[\"inner\"+i]||o[\"client\"+i]||l[\"client\"+i]):e[n]-e[\"offset\"+i]},W=function _iterateAutoRefresh(e,t){for(var n=0;n<T.length;n+=3)(!t||~t.indexOf(T[n+1]))&&e(T[n],T[n+1],T[n+2])},q=function _isString(e){return\"string\"==typeof e},X=function _isFunction(e){return\"function\"==typeof e},Y=function _isNumber(e){return\"number\"==typeof e},$=function _isObject(e){return\"object\"==typeof e},Z=function _callIfFunc(e){return X(e)&&e()},J=function _combineFunc(e,t){return function(){var n=Z(e),i=Z(t);return function(){Z(n),Z(i)}}},K=Math.abs,Q=\"padding\",ee=\"px\",te={s:\"scrollLeft\",p:\"left\",p2:\"Left\",os:\"right\",os2:\"Right\",d:\"width\",d2:\"Width\",a:\"x\",sc:function sc(e){return arguments.length?a.scrollTo(e,ne.sc()):a.pageXOffset||s.scrollLeft||o.scrollLeft||l.scrollLeft||0}},ne={s:\"scrollTop\",p:\"top\",p2:\"Top\",os:\"bottom\",os2:\"Bottom\",d:\"height\",d2:\"Height\",a:\"y\",op:te,sc:function sc(e){return arguments.length?a.scrollTo(te.sc(),e):a.pageYOffset||s.scrollTop||o.scrollTop||l.scrollTop||0}},ie=function _getComputedStyle(e){return a.getComputedStyle(e)},re=function _setDefaults(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ae=function _getBounds(e,t){var n=t&&\"matrix(1, 0, 0, 1, 0, 0)\"!==ie(e)[b]&&i.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},se=function _getSize(e,t){var n=t.d2;return e[\"offset\"+n]||e[\"client\"+n]||0},oe=function _getLabelRatioArray(e){var t,n=[],i=e.labels,r=e.duration();for(t in i)n.push(i[t]/r);return n},le=function _multiListener(e,t,n,i){return n.split(\",\").forEach(function(n){return e(t,n,i)})},ce=function _addListener(e,t,n){return e.addEventListener(t,n,{passive:!0})},ue=function _removeListener(e,t,n){return e.removeEventListener(t,n)},he={startColor:\"green\",endColor:\"red\",indent:0,fontSize:\"16px\",fontWeight:\"normal\"},de={toggleActions:\"play\",anticipatePin:0},pe={top:0,left:0,center:.5,bottom:1,right:1},fe=function _offsetToPx(e,t){if(q(e)){var n=e.indexOf(\"=\"),i=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf(\"%\")>n&&(i*=t/100),e=e.substr(0,n-1)),e=i+(e in pe?pe[e]*t:~e.indexOf(\"%\")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},me=function _createMarker(e,t,n,i,r,a,o){var c=r.startColor,u=r.endColor,h=r.fontSize,d=r.indent,p=r.fontWeight,f=s.createElement(\"div\"),m=F(n)||\"fixed\"===H(n,\"pinType\"),g=-1!==e.indexOf(\"scroller\"),y=m?l:n,v=-1!==e.indexOf(\"start\"),b=v?c:u,x=\"border-color:\"+b+\";font-size:\"+h+\";color:\"+b+\";font-weight:\"+p+\";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;\";return x+=\"position:\"+(g&&m?\"fixed;\":\"absolute;\"),(g||!m)&&(x+=(i===ne?\"right\":\"bottom\")+\":\"+(a+parseFloat(d))+\"px;\"),o&&(x+=\"box-sizing:border-box;text-align:left;width:\"+o.offsetWidth+\"px;\"),f._isStart=v,f.setAttribute(\"class\",\"gsap-marker-\"+e),f.style.cssText=x,f.innerText=t||0===t?e+\"-\"+t:e,y.children[0]?y.insertBefore(f,y.children[0]):y.appendChild(f),f._offset=f[\"offset\"+i.op.d2],ge(f,0,i,v),f},ge=function _positionMarker(e,t,n,r){var a={display:\"block\"},s=n[r?\"os2\":\"p2\"],o=n[r?\"p2\":\"os2\"];e._isFlipped=r,a[n.a+\"Percent\"]=r?-100:0,a[n.a]=r?\"1px\":0,a[\"border\"+s+\"Width\"]=1,a[\"border\"+o+\"Width\"]=0,a[n.p]=t+\"px\",i.set(e,a)},ye=[],ve={},be=function _sync(){return d||(d=h(ke))},xe=function _onScroll(){d||(d=h(ke),I||Ae(\"scrollStart\"),I=O())},_e=function _onResize(){return!y&&!E&&!s.fullscreenElement&&u.restart(!0)},we={},Te=[],Me=[],Se=function _onMediaChange(e){var t,n=i.ticker.frame,s=[],o=0;if(L!==n||P){for(Pe();o<Me.length;o+=4)(t=a.matchMedia(Me[o]).matches)!==Me[o+3]&&(Me[o+3]=t,t?s.push(o):Pe(1,Me[o])||X(Me[o+2])&&Me[o+2]());for(Le(),o=0;o<s.length;o++)t=s[o],C=Me[t],Me[t+2]=Me[t+1](e);C=0,r&&Re(0,1),L=n,Ae(\"matchMedia\")}},Ee=function _softRefresh(){return ue(qe,\"scrollEnd\",_softRefresh)||Re(!0)},Ae=function _dispatch(e){return we[e]&&we[e].map(function(e){return e()})||Te},Ce=[],Le=function _revertRecorded(e){for(var t=0;t<Ce.length;t+=4)e&&Ce[t+3]!==e||(Ce[t].style.cssText=Ce[t+1],Ce[t+2].uncache=1)},Pe=function _revertAll(e,t){var n;for(x=0;x<ye.length;x++)n=ye[x],t&&n.media!==t||(e?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));Le(t),t||Ae(\"revert\")},Re=function _refreshAll(e,t){if(!I||e){var n=Ae(\"refreshInit\");for(M&&qe.sort(),t||Pe(),x=0;x<ye.length;x++)ye[x].refresh();for(n.forEach(function(e){return e&&e.render&&e.render(-1)}),x=ye.length;x--;)ye[x].scroll.rec=0;u.pause(),Ae(\"refresh\")}else ce(qe,\"scrollEnd\",Ee)},De=0,Oe=1,ke=function _updateAll(){var e=ye.length,t=O(),n=t-k>=50,i=e&&ye[0].scroll();if(Oe=De>i?-1:1,De=i,n&&(I&&!v&&t-I>200&&(I=0,Ae(\"scrollEnd\")),m=k,k=t),Oe<0){for(x=e;x--;)ye[x]&&ye[x].update(0,n);Oe=1}else for(x=0;x<e;x++)ye[x]&&ye[x].update(0,n);d=0},Ie=[\"left\",\"top\",\"bottom\",\"right\",\"marginBottom\",\"marginRight\",\"marginTop\",\"marginLeft\",\"display\",\"flexShrink\",\"float\",\"zIndex\"],Ne=Ie.concat([\"width\",\"height\",\"boxSizing\",\"maxWidth\",\"maxHeight\",\"position\",\"margin\",Q,\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\"]),Be=function _swapPinIn(e,t,n,i){if(e.parentNode!==t){for(var r,a=Ie.length,s=t.style,o=e.style;a--;)s[r=Ie[a]]=n[r];s.position=\"absolute\"===n.position?\"absolute\":\"relative\",\"inline\"===n.display&&(s.display=\"inline-block\"),o.bottom=o.right=\"auto\",s.overflow=\"visible\",s.boxSizing=\"border-box\",s.width=se(e,te)+ee,s.height=se(e,ne)+ee,s.padding=o.margin=o.top=o.left=\"0\",ze(i),o.width=o.maxWidth=n.width,o.height=o.maxHeight=n.height,o.padding=n.padding,e.parentNode.insertBefore(t,e),t.appendChild(e)}},Ve=/([A-Z])/g,ze=function _setState(e){if(e){var t,n,r=e.t.style,a=e.length,s=0;for((e.t._gsap||i.core.getCache(e.t)).uncache=1;s<a;s+=2)n=e[s+1],t=e[s],n?r[t]=n:r[t]&&r.removeProperty(t.replace(Ve,\"-$1\").toLowerCase())}},Fe=function _getState(e){for(var t=Ne.length,n=e.style,i=[],r=0;r<t;r++)i.push(Ne[r],n[Ne[r]]);return i.t=e,i},He={left:0,top:0},Ue=function _parsePosition(e,t,n,i,r,a,s,c,u,h,d,f){if(X(e)&&(e=e(c)),q(e)&&\"max\"===e.substr(0,3)&&(e=f+(\"=\"===e.charAt(4)?fe(\"0\"+e.substr(3),n):0)),Y(e))s&&ge(s,n,i,!0);else{X(t)&&(t=t(c));var m,g,y,v=p(t)[0]||l,b=ae(v)||{},x=e.split(\" \");b&&(b.left||b.top)||\"none\"!==ie(v).display||(y=v.style.display,v.style.display=\"block\",b=ae(v),y?v.style.display=y:v.style.removeProperty(\"display\")),m=fe(x[0],b[i.d]),g=fe(x[1]||\"0\",n),e=b[i.p]-u[i.p]-h+m+r-g,s&&ge(s,g,i,n-g<20||s._isStart&&g>20),n-=n-g}if(a){var _=e+n,w=a._isStart;f=\"scroll\"+i.d2,ge(a,_,i,w&&_>20||!w&&(d?Math.max(l[f],o[f]):a.parentNode[f])<=_+1),d&&(u=ae(s),d&&(a.style[i.op.p]=u[i.op.p]-i.op.m-a._offset+ee))}return Math.round(e)},je=/(?:webkit|moz|length|cssText|inset)/i,Ge=function _reparent(e,t,n,r){if(e.parentNode!==t){var a,s,o=e.style;if(t===l){for(a in e._stOrig=o.cssText,s=ie(e))+a||je.test(a)||!s[a]||\"string\"!=typeof o[a]||\"0\"===a||(o[a]=s[a]);o.top=n,o.left=r}else o.cssText=e._stOrig;i.core.getCache(e).uncache=1,t.appendChild(e)}},We=function _getTweenCreator(e,t){var n,r,a=U(e,t),s=\"_scroll\"+t.p2,o=function getTween(t,o,l,c,u){var h=getTween.tween,d=o.onComplete,p={};return h&&h.kill(),n=Math.round(l),o[s]=t,o.modifiers=p,p[s]=function(e){return(e=Math.round(a()))!==n&&e!==r&&Math.abs(e-n)>2?(h.kill(),getTween.tween=0):e=l+c*h.ratio+u*h.ratio*h.ratio,r=n,n=Math.round(e)},o.onComplete=function(){getTween.tween=0,d&&d.call(h)},h=getTween.tween=i.to(e,o)};return e[s]=a,e.addEventListener(\"mousewheel\",function(){return o.tween&&o.tween.kill()&&(o.tween=0)}),o};\n/*!\n * ScrollTrigger 3.6.0\n * https://greensock.com\n *\n * @license Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/te.op=ne;var qe=function(){function ScrollTrigger(e,t){r||ScrollTrigger.register(i)||console.warn(\"Please gsap.registerPlugin(ScrollTrigger)\"),this.init(e,t)}return ScrollTrigger.prototype.init=function init(e,t){if(this.progress=this.start=0,this.vars&&this.kill(1),N){var n,r,c,u,h,d,g,b,_,w,T,E,L,D,k,V,z,W,Z,J,le,pe,ge,be,we,Te,Me,Se,Ae,Ce,Le,Pe,Re,De,ke,Ie,Ne,Ve=(e=re(q(e)||Y(e)||e.nodeType?{trigger:e}:e,de)).horizontal?te:ne,je=e,qe=je.onUpdate,Xe=je.toggleClass,Ye=je.id,$e=je.onToggle,Ze=je.onRefresh,Je=je.scrub,Ke=je.trigger,Qe=je.pin,et=je.pinSpacing,tt=je.invalidateOnRefresh,nt=je.anticipatePin,it=je.onScrubComplete,rt=je.onSnapComplete,at=je.once,st=je.snap,ot=je.pinReparent,lt=!Je&&0!==Je,ct=p(e.scroller||a)[0],ut=i.core.getCache(ct),ht=F(ct),dt=\"pinType\"in e?\"fixed\"===e.pinType:ht||\"fixed\"===H(ct,\"pinType\"),pt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],ft=lt&&e.toggleActions.split(\" \"),mt=\"markers\"in e?e.markers:de.markers,gt=ht?0:parseFloat(ie(ct)[\"border\"+Ve.p2+\"Width\"])||0,yt=this,vt=e.onRefreshInit&&function(){return e.onRefreshInit(yt)},bt=function _getSizeFunc(e,t,n){var i=n.d,r=n.d2,s=n.a;return(s=H(e,\"getBoundingClientRect\"))?function(){return s()[i]}:function(){return(t?a[\"inner\"+r]:e[\"client\"+r])||0}}(ct,ht,Ve),xt=function _getOffsetsFunc(e,t){return!t||~R.indexOf(e)?j(e):function(){return He}}(ct,ht);yt.media=C,nt*=45,ye.push(yt),yt.scroller=ct,yt.scroll=U(ct,Ve),h=yt.scroll(),yt.vars=e,t=t||e.animation,\"refreshPriority\"in e&&(M=1),ut.tweenScroll=ut.tweenScroll||{top:We(ct,ne),left:We(ct,te)},yt.tweenTo=n=ut.tweenScroll[Ve.p],t&&(t.vars.lazy=!1,t._initted||!1!==t.vars.immediateRender&&!1!==e.immediateRender&&t.render(0,!0,!0),yt.animation=t.pause(),t.scrollTrigger=yt,(Pe=Y(Je)&&Je)&&(Le=i.to(t,{ease:\"power3\",duration:Pe,onComplete:function onComplete(){return it&&it(yt)}})),Ae=0,Ye||(Ye=t.vars.id)),st&&($(st)||(st={snapTo:st}),\"scrollBehavior\"in l.style&&i.set(ht?[l,o]:ct,{scrollBehavior:\"auto\"}),c=X(st.snapTo)?st.snapTo:\"labels\"===st.snapTo?function _getClosestLabel(e){return function(t){return i.utils.snap(oe(e),t)}}(t):\"labelsDirectional\"===st.snapTo?function _getLabelAtDirection(e){return function(t,n){var i,r=oe(e);if(r.sort(function(e,t){return e-t}),n.direction>0){for(i=0;i<r.length;i++)if(r[i]>=t)return r[i];return r.pop()}for(i=r.length;i--;)if(r[i]<=t)return r[i];return r[0]}}(t):i.utils.snap(st.snapTo),Re=st.duration||{min:.1,max:2},Re=$(Re)?f(Re.min,Re.max):f(Re,Re),De=i.delayedCall(st.delay||Pe/2||.1,function(){if(Math.abs(yt.getVelocity())<10&&!v){var e=t&&!lt?t.totalProgress():yt.progress,i=(e-Ce)/(O()-m)*1e3||0,r=K(i/2)*i/.185,a=e+r,s=f(0,1,c(a,yt)),o=yt.scroll(),l=Math.round(g+s*D),u=n.tween;if(o<=b&&o>=g&&l!==o){if(u&&!u._initted&&u.data<=Math.abs(l-o))return;n(l,{duration:Re(K(.185*Math.max(K(a-e),K(s-e))/i/.05||0)),ease:st.ease||\"power3\",data:Math.abs(l-o),onComplete:function onComplete(){Ae=Ce=t&&!lt?t.totalProgress():yt.progress,rt&&rt(yt)}},o,r*D,l-o-r*D)}}else yt.isActive&&De.restart(!0)}).pause()),Ye&&(ve[Ye]=yt),Ke=yt.trigger=p(Ke||Qe)[0],Qe=!0===Qe?Ke:p(Qe)[0],q(Xe)&&(Xe={targets:Ke,className:Xe}),Qe&&(!1===et||\"margin\"===et||(et=!(!et&&\"flex\"===ie(Qe.parentNode).display)&&Q),yt.pin=Qe,!1!==e.force3D&&i.set(Qe,{force3D:!0}),(r=i.core.getCache(Qe)).spacer?k=r.pinState:(r.spacer=W=s.createElement(\"div\"),W.setAttribute(\"class\",\"pin-spacer\"+(Ye?\" pin-spacer-\"+Ye:\"\")),r.pinState=k=Fe(Qe)),yt.spacer=W=r.spacer,Se=ie(Qe),be=Se[et+Ve.os2],J=i.getProperty(Qe),le=i.quickSetter(Qe,Ve.a,ee),Be(Qe,W,Se),z=Fe(Qe)),mt&&(L=$(mt)?re(mt,he):he,T=me(\"scroller-start\",Ye,ct,Ve,L,0),E=me(\"scroller-end\",Ye,ct,Ve,L,0,T),Z=T[\"offset\"+Ve.op.d2],_=me(\"start\",Ye,ct,Ve,L,Z),w=me(\"end\",Ye,ct,Ve,L,Z),dt||(!function _makePositionable(e){e.style.position=\"absolute\"===ie(e).position?\"absolute\":\"relative\"}(ht?l:ct),i.set([T,E],{force3D:!0}),Te=i.quickSetter(T,Ve.a,ee),Me=i.quickSetter(E,Ve.a,ee))),yt.revert=function(e){var n=!1!==e||!yt.enabled,i=y;n!==u&&(n&&(Ie=Math.max(yt.scroll(),yt.scroll.rec||0),ke=yt.progress,Ne=t&&t.progress()),_&&[_,w,T,E].forEach(function(e){return e.style.display=n?\"none\":\"block\"}),n&&(y=1),yt.update(n),y=i,Qe&&(n?function _swapPinOut(e,t,n){if(ze(n),e.parentNode===t){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}}(Qe,W,k):(!ot||!yt.isActive)&&Be(Qe,W,ie(Qe),we)),u=n)},yt.refresh=function(n){if(!y&&yt.enabled)if(Qe&&n&&I)ce(ScrollTrigger,\"scrollEnd\",Ee);else{y=1,Le&&Le.pause(),tt&&t&&t.progress(0).invalidate(),u||yt.revert();for(var r,a,s,o,c,p,f,m,v,x=bt(),M=xt(),A=G(ct,Ve),C=0,L=0,P=e.end,R=e.endTrigger||Ke,O=e.start||(0!==e.start&&Ke?Qe?\"0 0\":\"0 100%\":0),N=Ke&&Math.max(0,ye.indexOf(yt))||0,B=N;B--;)(f=ye[B].pin)&&(f===Ke||f===Qe)&&ye[B].revert();for(g=Ue(O,Ke,x,Ve,yt.scroll(),_,T,yt,M,gt,dt,A)||(Qe?-.001:0),X(P)&&(P=P(yt)),q(P)&&!P.indexOf(\"+=\")&&(~P.indexOf(\" \")?P=(q(O)?O.split(\" \")[0]:\"\")+P:(C=fe(P.substr(2),x),P=q(O)?O:g+C,R=Ke)),b=Math.max(g,Ue(P||(R?\"100% 0\":A),R,x,Ve,yt.scroll()+C,w,E,yt,M,gt,dt,A))||-.001,D=b-g||(g-=.01)&&.001,C=0,B=N;B--;)(f=(p=ye[B]).pin)&&p.start-p._pinPush<g&&(r=p.end-p.start,f===Ke&&(C+=r),f===Qe&&(L+=r));if(g+=C,b+=C,yt._pinPush=L,_&&C&&((r={})[Ve.a]=\"+=\"+C,i.set([_,w],r)),Qe)r=ie(Qe),o=Ve===ne,s=yt.scroll(),pe=parseFloat(J(Ve.a))+L,!A&&b>1&&((ht?l:ct).style[\"overflow-\"+Ve.a]=\"scroll\"),Be(Qe,W,r),z=Fe(Qe),a=ae(Qe,!0),m=dt&&U(ct,o?te:ne)(),et&&((we=[et+Ve.os2,D+L+ee]).t=W,(B=et===Q?se(Qe,Ve)+D+L:0)&&we.push(Ve.d,B+ee),ze(we),dt&&yt.scroll(Ie)),dt&&((c={top:a.top+(o?s-g:m)+ee,left:a.left+(o?m:s-g)+ee,boxSizing:\"border-box\",position:\"fixed\"}).width=c.maxWidth=Math.ceil(a.width)+ee,c.height=c.maxHeight=Math.ceil(a.height)+ee,c.margin=c.marginTop=c.marginRight=c.marginBottom=c.marginLeft=\"0\",c.padding=r.padding,c.paddingTop=r.paddingTop,c.paddingRight=r.paddingRight,c.paddingBottom=r.paddingBottom,c.paddingLeft=r.paddingLeft,V=function _copyState(e,t,n){for(var i,r=[],a=e.length,s=n?8:0;s<a;s+=2)i=e[s],r.push(i,i in t?t[i]:e[s+1]);return r.t=e.t,r}(k,c,ot)),t?(v=t._initted,S(1),t.progress(1,!0),ge=J(Ve.a)-pe+D+L,D!==ge&&V.splice(V.length-2,2),t.progress(0,!0),v||t.invalidate(),S(0)):ge=D;else if(Ke&&yt.scroll())for(a=Ke.parentNode;a&&a!==l;)a._pinOffset&&(g-=a._pinOffset,b-=a._pinOffset),a=a.parentNode;for(B=0;B<N;B++)(p=ye[B].pin)&&(p===Ke||p===Qe)&&ye[B].revert(!1);yt.start=g,yt.end=b,(h=d=yt.scroll())<Ie&&yt.scroll(Ie),yt.revert(!1),y=0,t&&lt&&t._initted&&t.progress(Ne,!0).render(t.time(),!0,!0),ke!==yt.progress&&(Le&&t.totalProgress(ke,!0),yt.progress=ke,yt.update()),Qe&&et&&(W._pinOffset=Math.round(yt.progress*ge)),Ze&&Ze(yt)}},yt.getVelocity=function(){return(yt.scroll()-d)/(O()-m)*1e3||0},yt.update=function(e,i){var r,a,s,o,c,u=yt.scroll(),f=e?0:(u-g)/D,v=f<0?0:f>1?1:f||0,x=yt.progress;if(i&&(d=h,h=u,st&&(Ce=Ae,Ae=t&&!lt?t.totalProgress():v)),nt&&!v&&Qe&&!y&&!P&&I&&g<u+(u-d)/(O()-m)*nt&&(v=1e-4),v!==x&&yt.enabled){if(o=(c=(r=yt.isActive=!!v&&v<1)!==(!!x&&x<1))||!!v!=!!x,yt.direction=v>x?1:-1,yt.progress=v,lt||(!Le||y||P?t&&t.totalProgress(v,!!y):(Le.vars.totalProgress=v,Le.invalidate().restart())),Qe)if(e&&et&&(W.style[et+Ve.os2]=be),dt){if(o){if(s=!e&&v>x&&b+1>u&&u+1>=G(ct,Ve),ot)if(e||!r&&!s)Ge(Qe,W);else{var _=ae(Qe,!0),w=u-g;Ge(Qe,l,_.top+(Ve===ne?w:0)+ee,_.left+(Ve===ne?0:w)+ee)}ze(r||s?V:z),ge!==D&&v<1&&r||le(pe+(1!==v||s?0:ge))}}else le(pe+ge*v);st&&!n.tween&&!y&&!P&&De.restart(!0),Xe&&(c||at&&v&&(v<1||!A))&&p(Xe.targets).forEach(function(e){return e.classList[r||at?\"add\":\"remove\"](Xe.className)}),qe&&!lt&&!e&&qe(yt),o&&!y?(a=v&&!x?0:1===v?1:1===x?2:3,lt&&(s=!c&&\"none\"!==ft[a+1]&&ft[a+1]||ft[a],t&&(\"complete\"===s||\"reset\"===s||s in t)&&(\"complete\"===s?t.pause().totalProgress(1):\"reset\"===s?t.restart(!0).pause():t[s]()),qe&&qe(yt)),!c&&A||($e&&c&&$e(yt),pt[a]&&pt[a](yt),at&&(1===v?yt.kill(!1,1):pt[a]=0),c||pt[a=1===v?1:3]&&pt[a](yt))):lt&&qe&&!y&&qe(yt)}Me&&(Te(u+(T._isFlipped?1:0)),Me(u))},yt.enable=function(){yt.enabled||(yt.enabled=!0,ce(ct,\"resize\",_e),ce(ct,\"scroll\",xe),vt&&ce(ScrollTrigger,\"refreshInit\",vt),t&&t.add?i.delayedCall(.01,function(){return g||b||yt.refresh()})&&(D=.01)&&(g=b=0):yt.refresh())},yt.disable=function(e,t){if(yt.enabled&&(!1!==e&&yt.revert(),yt.enabled=yt.isActive=!1,t||Le&&Le.pause(),Ie=0,r&&(r.uncache=1),vt&&ue(ScrollTrigger,\"refreshInit\",vt),De&&(De.pause(),n.tween&&n.tween.kill()&&(n.tween=0)),!ht)){for(var i=ye.length;i--;)if(ye[i].scroller===ct&&ye[i]!==yt)return;ue(ct,\"resize\",_e),ue(ct,\"scroll\",xe)}},yt.kill=function(e,n){yt.disable(e,n),Ye&&delete ve[Ye];var i=ye.indexOf(yt);ye.splice(i,1),i===x&&Oe>0&&x--,t&&(t.scrollTrigger=null,e&&t.render(-1),n||t.kill()),_&&[_,w,T,E].forEach(function(e){return e.parentNode.removeChild(e)}),Qe&&(r&&(r.uncache=1),i=0,ye.forEach(function(e){return e.pin===Qe&&i++}),i||(r.spacer=0))},yt.enable()}else this.update=this.refresh=this.kill=B},ScrollTrigger.register=function register(e){if(!r&&(i=e||z(),V()&&window.document&&(a=window,s=document,o=s.documentElement,l=s.body),i&&(p=i.utils.toArray,f=i.utils.clamp,S=i.core.suppressOverwrites||B,i.core.globals(\"ScrollTrigger\",ScrollTrigger),l))){h=a.requestAnimationFrame||function(e){return setTimeout(e,16)},ce(a,\"mousewheel\",xe),c=[a,s,o,l],ce(s,\"scroll\",xe);var t,n=l.style,d=n.borderTop;n.borderTop=\"1px solid #000\",t=ae(l),ne.m=Math.round(t.top+ne.sc())||0,te.m=Math.round(t.left+te.sc())||0,d?n.borderTop=d:n.removeProperty(\"border-top\"),g=setInterval(be,200),i.delayedCall(.5,function(){return P=0}),ce(s,\"touchcancel\",B),ce(l,\"touchstart\",B),le(ce,s,\"pointerdown,touchstart,mousedown\",function(){return v=1}),le(ce,s,\"pointerup,touchend,mouseup\",function(){return v=0}),b=i.utils.checkPrefix(\"transform\"),Ne.push(b),r=O(),u=i.delayedCall(.2,Re).pause(),T=[s,\"visibilitychange\",function(){var e=a.innerWidth,t=a.innerHeight;s.hidden?(_=e,w=t):_===e&&w===t||_e()},s,\"DOMContentLoaded\",Re,a,\"load\",function(){return I||Re()},a,\"resize\",_e],W(ce)}return r},ScrollTrigger.defaults=function defaults(e){for(var t in e)de[t]=e[t]},ScrollTrigger.kill=function kill(){N=0,ye.slice(0).forEach(function(e){return e.kill(1)})},ScrollTrigger.config=function config(e){\"limitCallbacks\"in e&&(A=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(g)||(g=t)&&setInterval(be,t),\"autoRefreshEvents\"in e&&(W(ue)||W(ce,e.autoRefreshEvents||\"none\"),E=-1===(e.autoRefreshEvents+\"\").indexOf(\"resize\"))},ScrollTrigger.scrollerProxy=function scrollerProxy(e,t){var n=p(e)[0],i=D.indexOf(n),r=F(n);~i&&D.splice(i,r?6:2),r?R.unshift(a,t,l,t,o,t):R.unshift(n,t)},ScrollTrigger.matchMedia=function matchMedia(e){var t,n,i,r,s;for(n in e)i=Me.indexOf(n),r=e[n],C=n,\"all\"===n?r():(t=a.matchMedia(n))&&(t.matches&&(s=r()),~i?(Me[i+1]=J(Me[i+1],r),Me[i+2]=J(Me[i+2],s)):(i=Me.length,Me.push(n,r,s),t.addListener?t.addListener(Se):t.addEventListener(\"change\",Se)),Me[i+3]=t.matches),C=0;return Me},ScrollTrigger.clearMatchMedia=function clearMatchMedia(e){e||(Me.length=0),(e=Me.indexOf(e))>=0&&Me.splice(e,4)},ScrollTrigger}();qe.version=\"3.6.0\",qe.saveStyles=function(e){return e?p(e).forEach(function(e){if(e&&e.style){var t=Ce.indexOf(e);t>=0&&Ce.splice(t,4),Ce.push(e,e.style.cssText,i.core.getCache(e),C)}}):Ce},qe.revert=function(e,t){return Pe(!e,t)},qe.create=function(e,t){return new qe(e,t)},qe.refresh=function(e){return e?_e():Re(!0)},qe.update=ke,qe.maxScroll=function(e,t){return G(e,t?te:ne)},qe.getScrollFunc=function(e,t){return U(p(e)[0],t?te:ne)},qe.getById=function(e){return ve[e]},qe.getAll=function(){return ye.slice(0)},qe.isScrolling=function(){return!!I},qe.addEventListener=function(e,t){var n=we[e]||(we[e]=[]);~n.indexOf(t)||n.push(t)},qe.removeEventListener=function(e,t){var n=we[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},qe.batch=function(e,t){var n,r=[],a={},s=t.interval||.016,o=t.batchMax||1e9,l=function proxyCallback(e,t){var n=[],r=[],a=i.delayedCall(s,function(){t(n,r),n=[],r=[]}).pause();return function(e){n.length||a.restart(!0),n.push(e.trigger),r.push(e),o<=n.length&&a.progress(1)}};for(n in t)a[n]=\"on\"===n.substr(0,2)&&X(t[n])&&\"onRefreshInit\"!==n?l(0,t[n]):t[n];return X(o)&&(o=o(),ce(qe,\"refresh\",function(){return o=t.batchMax()})),p(e).forEach(function(e){var t={};for(n in a)t[n]=a[n];t.trigger=e,r.push(qe.create(t))}),r},qe.sort=function(e){return ye.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},z()&&i.registerPlugin(qe)},function(e,t,n){function _typeof(e){\"@babel/helpers - typeof\";return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}!function(n,i){\"object\"===_typeof(t)&&void 0!==e?i(t):i((n=n||self).window=n.window||{})}(this,function(e){\"use strict\";var t=/[achlmqstvz]|(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/gi,n=/[\\+\\-]?\\d*\\.?\\d+e[\\+\\-]?\\d+/gi,i=Math.PI/180,r=Math.sin,a=Math.cos,s=Math.abs,o=Math.sqrt,l=function _isNumber(e){return\"number\"==typeof e},c=function _round(e){return Math.round(1e5*e)/1e5||0};function arcToSegment(e,t,n,l,c,u,h,d,p){if(e!==d||t!==p){n=s(n),l=s(l);var f=c%360*i,m=a(f),g=r(f),y=Math.PI,v=2*y,b=(e-d)/2,x=(t-p)/2,_=m*b+g*x,w=-g*b+m*x,T=_*_,M=w*w,S=T/(n*n)+M/(l*l);S>1&&(n=o(S)*n,l=o(S)*l);var E=n*n,A=l*l,C=(E*A-E*M-A*T)/(E*M+A*T);C<0&&(C=0);var L=(u===h?-1:1)*o(C),P=L*(n*w/l),R=L*(-l*_/n),D=(e+d)/2+(m*P-g*R),O=(t+p)/2+(g*P+m*R),k=(_-P)/n,I=(w-R)/l,N=(-_-P)/n,B=(-w-R)/l,V=k*k+I*I,z=(I<0?-1:1)*Math.acos(k/o(V)),F=(k*B-I*N<0?-1:1)*Math.acos((k*N+I*B)/o(V*(N*N+B*B)));isNaN(F)&&(F=y),!h&&F>0?F-=v:h&&F<0&&(F+=v),z%=v,F%=v;var H,U=Math.ceil(s(F)/(v/4)),j=[],G=F/U,W=4/3*r(G/2)/(1+a(G/2)),q=m*n,X=g*n,Y=g*-l,$=m*l;for(H=0;H<U;H++)_=a(c=z+H*G),w=r(c),k=a(c+=G),I=r(c),j.push(_-W*w,w+W*_,k+W*I,I-W*k,k,I);for(H=0;H<j.length;H+=2)_=j[H],w=j[H+1],j[H]=_*q+w*Y+D,j[H+1]=_*X+w*$+O;return j[H-2]=d,j[H-1]=p,j}}\n/*!\n   * CustomEase 3.5.1\n   * https://greensock.com\n   *\n   * @license Copyright 2008-2020, GreenSock. All rights reserved.\n   * Subject to the terms at https://greensock.com/standard-license or for\n   * Club GreenSock members, the agreement issued with that membership.\n   * @author: Jack Doyle, jack@greensock.com\n  */\nvar u,h,d=function _getGSAP(){return u||\"undefined\"!=typeof window&&(u=window.gsap)&&u.registerPlugin&&u},p=function _initCore(){(u=d())?(u.registerEase(\"_CE\",v.create),h=1):console.warn(\"Please gsap.registerPlugin(CustomEase)\")},f=function _round(e){return~~(1e3*e+(e<0?-.5:.5))/1e3},m=/[-+=\\.]*\\d+[\\.e\\-\\+]*\\d*[e\\-\\+]*\\d*/gi,g=/[cLlsSaAhHvVtTqQ]/g,y=function _bezierToPoints(e,t,n,i,r,a,s,o,l,c,u){var h,d=(e+n)/2,p=(t+i)/2,f=(n+r)/2,m=(i+a)/2,g=(r+s)/2,y=(a+o)/2,v=(d+f)/2,b=(p+m)/2,x=(f+g)/2,_=(m+y)/2,w=(v+x)/2,T=(b+_)/2,M=s-e,S=o-t,E=Math.abs((n-s)*S-(i-o)*M),A=Math.abs((r-s)*S-(a-o)*M);return c||(c=[{x:e,y:t},{x:s,y:o}],u=1),c.splice(u||c.length-1,0,{x:w,y:T}),(E+A)*(E+A)>l*(M*M+S*S)&&(h=c.length,_bezierToPoints(e,t,d,p,v,b,w,T,l,c,u),_bezierToPoints(w,T,x,_,g,y,s,o,l,c,u+1+(c.length-h))),c},v=function(){function CustomEase(e,t,n){h||p(),this.id=e,this.setData(t,n)}var e=CustomEase.prototype;return e.setData=function setData(e,i){i=i||{};var r,a,o,l,c,h,d,p,f,v=(e=e||\"0,0,1,1\").match(m),b=1,x=[],_=[],w=i.precision||1,T=w<=1;if(this.data=e,(g.test(e)||~e.indexOf(\"M\")&&e.indexOf(\"C\")<0)&&(v=function stringToRawPath(e){var i,r,a,o,l,c,u,h,d,p,f,m,g,y,v,b=(e+\"\").replace(n,function(e){var t=+e;return t<1e-4&&t>-1e-4?0:t}).match(t)||[],x=[],_=0,w=0,T=b.length,M=0,S=\"ERROR: malformed path: \"+e,E=function line(e,t,n,i){p=(n-e)/3,f=(i-t)/3,u.push(e+p,t+f,n-p,i-f,n,i)};if(!e||!isNaN(b[0])||isNaN(b[1]))return console.log(S),x;for(i=0;i<T;i++)if(g=l,isNaN(b[i])?c=(l=b[i].toUpperCase())!==b[i]:i--,a=+b[i+1],o=+b[i+2],c&&(a+=_,o+=w),i||(h=a,d=o),\"M\"===l)u&&(u.length<8?x.length-=1:M+=u.length),_=h=a,w=d=o,u=[a,o],x.push(u),i+=2,l=\"L\";else if(\"C\"===l)u||(u=[0,0]),c||(_=w=0),u.push(a,o,_+1*b[i+3],w+1*b[i+4],_+=1*b[i+5],w+=1*b[i+6]),i+=6;else if(\"S\"===l)p=_,f=w,\"C\"!==g&&\"S\"!==g||(p+=_-u[u.length-4],f+=w-u[u.length-3]),c||(_=w=0),u.push(p,f,a,o,_+=1*b[i+3],w+=1*b[i+4]),i+=4;else if(\"Q\"===l)p=_+2/3*(a-_),f=w+2/3*(o-w),c||(_=w=0),_+=1*b[i+3],w+=1*b[i+4],u.push(p,f,_+2/3*(a-_),w+2/3*(o-w),_,w),i+=4;else if(\"T\"===l)p=_-u[u.length-4],f=w-u[u.length-3],u.push(_+p,w+f,a+2/3*(_+1.5*p-a),o+2/3*(w+1.5*f-o),_=a,w=o),i+=2;else if(\"H\"===l)E(_,w,_=a,w),i+=1;else if(\"V\"===l)E(_,w,_,w=a+(c?w-_:0)),i+=1;else if(\"L\"===l||\"Z\"===l)\"Z\"===l&&(a=h,o=d,u.closed=!0),(\"L\"===l||s(_-a)>.5||s(w-o)>.5)&&(E(_,w,a,o),\"L\"===l&&(i+=2)),_=a,w=o;else if(\"A\"===l){if(y=b[i+4],v=b[i+5],p=b[i+6],f=b[i+7],r=7,y.length>1&&(y.length<3?(f=p,p=v,r--):(f=v,p=y.substr(2),r-=2),v=y.charAt(1),y=y.charAt(0)),m=arcToSegment(_,w,+b[i+1],+b[i+2],+b[i+3],+y,+v,(c?_:0)+1*p,(c?w:0)+1*f),i+=r,m)for(r=0;r<m.length;r++)u.push(m[r]);_=u[u.length-2],w=u[u.length-1]}else console.log(S);return(i=u.length)<6?(x.pop(),i=0):u[0]===u[i-2]&&u[1]===u[i-1]&&(u.closed=!0),x.totalPoints=M+i,x}(e)[0]),4===(r=v.length))v.unshift(0,0),v.push(1,1),r=8;else if((r-2)%6)throw\"Invalid CustomEase\";for(0==+v[0]&&1==+v[r-2]||function _normalize(e,t,n){n||0===n||(n=Math.max(+e[e.length-1],+e[1]));var i,r=-1*+e[0],a=-n,s=e.length,o=1/(+e[s-2]+r),l=-t||(Math.abs(+e[s-1]-+e[1])<.01*(+e[s-2]-+e[0])?function _findMinimum(e){var t,n=e.length,i=1e20;for(t=1;t<n;t+=6)+e[t]<i&&(i=+e[t]);return i}(e)+a:+e[s-1]+a);for(l=l?1/l:-o,i=0;i<s;i+=2)e[i]=(+e[i]+r)*o,e[i+1]=(+e[i+1]+a)*l}(v,i.height,i.originY),this.segment=v,l=2;l<r;l+=6)a={x:+v[l-2],y:+v[l-1]},o={x:+v[l+4],y:+v[l+5]},x.push(a,o),y(a.x,a.y,+v[l],+v[l+1],+v[l+2],+v[l+3],o.x,o.y,1/(2e5*w),x,x.length-1);for(r=x.length,l=0;l<r;l++)d=x[l],p=x[l-1]||d,(d.x>p.x||p.y!==d.y&&p.x===d.x||d===p)&&d.x<=1?(p.cx=d.x-p.x,p.cy=d.y-p.y,p.n=d,p.nx=d.x,T&&l>1&&Math.abs(p.cy/p.cx-x[l-2].cy/x[l-2].cx)>2&&(T=0),p.cx<b&&(p.cx?b=p.cx:(p.cx=.001,l===r-1&&(p.x-=.001,b=Math.min(b,.001),T=0)))):(x.splice(l--,1),r--);if(c=1/(r=1/b+1|0),h=0,d=x[0],T){for(l=0;l<r;l++)f=l*c,d.nx<f&&(d=x[++h]),a=d.y+(f-d.x)/d.cx*d.cy,_[l]={x:f,cx:c,y:a,cy:0,nx:9},l&&(_[l-1].cy=a-_[l-1].y);_[r-1].cy=x[x.length-1].y-a}else{for(l=0;l<r;l++)d.nx<l*c&&(d=x[++h]),_[l]=d;h<x.length-1&&(_[l-1]=x[x.length-2])}return this.ease=function(e){var t=_[e*r|0]||_[r-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy},this.ease.custom=this,this.id&&u.registerEase(this.id,this.ease),this},e.getSVGData=function getSVGData(e){return CustomEase.getSVGData(this,e)},CustomEase.create=function create(e,t,n){return new CustomEase(e,t,n).ease},CustomEase.register=function register(e){u=e,p()},CustomEase.get=function get(e){return u.parseEase(e)},CustomEase.getSVGData=function getSVGData(e,t){var n,i,r,a,s,o,h,d,p,m,g=(t=t||{}).width||100,y=t.height||100,v=t.x||0,b=(t.y||0)+y,x=u.utils.toArray(t.path)[0];if(t.invert&&(y=-y,b=0),\"string\"==typeof e&&(e=u.parseEase(e)),e.custom&&(e=e.custom),e instanceof CustomEase)n=function rawPathToString(e){l(e[0])&&(e=[e]);var t,n,i,r,a=\"\",s=e.length;for(n=0;n<s;n++){for(r=e[n],a+=\"M\"+c(r[0])+\",\"+c(r[1])+\" C\",t=r.length,i=2;i<t;i++)a+=c(r[i++])+\",\"+c(r[i++])+\" \"+c(r[i++])+\",\"+c(r[i++])+\" \"+c(r[i++])+\",\"+c(r[i])+\" \";r.closed&&(a+=\"z\")}return a}(function transformRawPath(e,t,n,i,r,a,s){for(var o,l,c,u,h,d=e.length;--d>-1;)for(l=(o=e[d]).length,c=0;c<l;c+=2)u=o[c],h=o[c+1],o[c]=u*t+h*i+a,o[c+1]=u*n+h*r+s;return e._dirty=1,e}([e.segment],g,0,0,-y,v,b));else{for(n=[v,b],a=1/(h=Math.max(5,200*(t.precision||1))),d=5/(h+=2),p=f(v+a*g),i=((m=f(b+e(a)*-y))-b)/(p-v),r=2;r<h;r++)s=f(v+r*a*g),o=f(b+e(r*a)*-y),(Math.abs((o-m)/(s-p)-i)>d||r===h-1)&&(n.push(p,m),i=(o-m)/(s-p)),p=s,m=o;n=\"M\"+n.join(\",\")}return x&&x.setAttribute(\"d\",n),n},CustomEase}();d()&&u.registerPlugin(v),v.version=\"3.5.1\",e.CustomEase=v,e.default=v,Object.defineProperty(e,\"__esModule\",{value:!0})})},function(e,t,n){\"use strict\";t.a={enabled:!0,title:\"\",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:\"plyr\",iconUrl:\"https://cdn.plyr.io/3.5.6/plyr.svg\",blankVideo:\"https://cdn.plyr.io/static/blank.mp4\",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240]},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:\"auto\",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:\"plyr\"},controls:[\"play-large\",\"play\",\"progress\",\"current-time\",\"mute\",\"volume\",\"captions\",\"settings\",\"pip\",\"airplay\",\"fullscreen\"],settings:[\"captions\",\"quality\",\"speed\"],i18n:{restart:\"Restart\",rewind:\"Rewind {seektime}s\",play:\"Play\",pause:\"Pause\",fastForward:\"Forward {seektime}s\",seek:\"Seek\",seekLabel:\"{currentTime} of {duration}\",played:\"Played\",buffered:\"Buffered\",currentTime:\"Current time\",duration:\"Duration\",volume:\"Volume\",mute:\"Mute\",unmute:\"Unmute\",enableCaptions:\"Enable captions\",disableCaptions:\"Disable captions\",download:\"Download\",enterFullscreen:\"Enter fullscreen\",exitFullscreen:\"Exit fullscreen\",frameTitle:\"Player for {title}\",captions:\"Captions\",settings:\"Settings\",menuBack:\"Go back to previous menu\",speed:\"Speed\",normal:\"Normal\",quality:\"Quality\",loop:\"Loop\",start:\"Start\",end:\"End\",all:\"All\",reset:\"Reset\",disabled:\"Disabled\",enabled:\"Enabled\",advertisement:\"Ad\",qualityBadge:{2160:\"4K\",1440:\"HD\",1080:\"HD\",720:\"HD\",576:\"SD\",480:\"SD\"}},urls:{download:null,vimeo:{sdk:\"https://player.vimeo.com/api/player.js\",iframe:\"https://player.vimeo.com/video/{0}?{1}\",api:\"https://vimeo.com/api/v2/video/{0}.json\"},youtube:{sdk:\"https://www.youtube.com/iframe_api\",api:\"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}\"},googleIMA:{sdk:\"https://imasdk.googleapis.com/js/sdkloader/ima3.js\"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:[\"ended\",\"progress\",\"stalled\",\"playing\",\"waiting\",\"canplay\",\"canplaythrough\",\"loadstart\",\"loadeddata\",\"loadedmetadata\",\"timeupdate\",\"volumechange\",\"play\",\"pause\",\"error\",\"seeking\",\"seeked\",\"emptied\",\"ratechange\",\"cuechange\",\"download\",\"enterfullscreen\",\"exitfullscreen\",\"captionsenabled\",\"captionsdisabled\",\"languagechange\",\"controlshidden\",\"controlsshown\",\"ready\",\"statechange\",\"qualitychange\",\"adsloaded\",\"adscontentpause\",\"adscontentresume\",\"adstarted\",\"adsmidpoint\",\"adscomplete\",\"adsallcomplete\",\"adsimpression\",\"adsclick\"],selectors:{editable:\"input, textarea, select, [contenteditable]\",container:\".plyr\",controls:{container:null,wrapper:\".plyr__controls\"},labels:\"[data-plyr]\",buttons:{play:'[data-plyr=\"play\"]',pause:'[data-plyr=\"pause\"]',restart:'[data-plyr=\"restart\"]',rewind:'[data-plyr=\"rewind\"]',fastForward:'[data-plyr=\"fast-forward\"]',mute:'[data-plyr=\"mute\"]',captions:'[data-plyr=\"captions\"]',download:'[data-plyr=\"download\"]',fullscreen:'[data-plyr=\"fullscreen\"]',pip:'[data-plyr=\"pip\"]',airplay:'[data-plyr=\"airplay\"]',settings:'[data-plyr=\"settings\"]',loop:'[data-plyr=\"loop\"]'},inputs:{seek:'[data-plyr=\"seek\"]',volume:'[data-plyr=\"volume\"]',speed:'[data-plyr=\"speed\"]',language:'[data-plyr=\"language\"]',quality:'[data-plyr=\"quality\"]'},display:{currentTime:\".plyr__time--current\",duration:\".plyr__time--duration\",buffer:\".plyr__progress__buffer\",loop:\".plyr__progress__loop\",volume:\".plyr__volume--display\"},progress:\".plyr__progress\",captions:\".plyr__captions\",caption:\".plyr__caption\"},classNames:{type:\"plyr--{0}\",provider:\"plyr--{0}\",video:\"plyr__video-wrapper\",embed:\"plyr__video-embed\",videoFixedRatio:\"plyr__video-wrapper--fixed-ratio\",embedContainer:\"plyr__video-embed__container\",poster:\"plyr__poster\",posterEnabled:\"plyr__poster-enabled\",ads:\"plyr__ads\",control:\"plyr__control\",controlPressed:\"plyr__control--pressed\",playing:\"plyr--playing\",paused:\"plyr--paused\",stopped:\"plyr--stopped\",loading:\"plyr--loading\",hover:\"plyr--hover\",tooltip:\"plyr__tooltip\",cues:\"plyr__cues\",hidden:\"plyr__sr-only\",hideControls:\"plyr--hide-controls\",isIos:\"plyr--is-ios\",isTouch:\"plyr--is-touch\",uiSupported:\"plyr--full-ui\",noTransition:\"plyr--no-transition\",display:{time:\"plyr__time\"},menu:{value:\"plyr__menu__value\",badge:\"plyr__badge\",open:\"plyr--menu-open\"},captions:{enabled:\"plyr--captions-enabled\",active:\"plyr--captions-active\"},fullscreen:{enabled:\"plyr--fullscreen-enabled\",fallback:\"plyr--fullscreen-fallback\"},pip:{supported:\"plyr--pip-supported\",active:\"plyr--pip-active\"},airplay:{supported:\"plyr--airplay-supported\",active:\"plyr--airplay-active\"},tabFocus:\"plyr__tab-focus\",previewThumbnails:{thumbContainer:\"plyr__preview-thumb\",thumbContainerShown:\"plyr__preview-thumb--is-shown\",imageContainer:\"plyr__preview-thumb__image-container\",timeContainer:\"plyr__preview-thumb__time-container\",scrubbingContainer:\"plyr__preview-scrubbing\",scrubbingContainerShown:\"plyr__preview-scrubbing--is-shown\"}},attributes:{embed:{provider:\"data-plyr-provider\",id:\"data-plyr-embed-id\"}},ads:{enabled:!1,publisherId:\"\",tagUrl:\"\"},previewThumbnails:{enabled:!1,src:\"\"},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1},youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}}},function(e,t){e.exports=\"varying float vNoise;\\nvarying vec2 vUv;\\nuniform sampler2D uImage;\\nuniform float time;\\nuniform float hoverState;\\n\\n\\n\\nvoid main()\\t{\\n\\n    vec2 newUV = vUv;\\n\\n    vec2 p = newUV;\\n    float x = hoverState;\\n    x = smoothstep(.0,1.0,(x*2.0+p.y-1.0));\\n    vec4 f = mix(\\n        texture2D(uImage, (p-.5)*(1.-x)+.5), \\n        texture2D(uImage, (p-.5)*x+.5), \\n        x);\\n\\n\\n    vec4 oceanView = texture2D(uImage,newUV);\\n\\n\\n    // gl_FragColor = vec4(finalColor,1.);\\n    // gl_FragColor = vec4(vUv,0.,1.);\\n    // gl_FragColor = oceanView + 0.5*vec4(vNoise);\\n    // gl_FragColor = vec4(vNoise,0.,0.,1.);\\n    gl_FragColor = f;\\n    gl_FragColor.rgb += 0.05*vec3(vNoise);\\n\\n    \\n}\"},function(e,t){e.exports=\"\\n//\\tClassic Perlin 3D Noise \\n//\\tby Stefan Gustavson\\n//\\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\\n\\nfloat cnoise(vec3 P){\\n  vec3 Pi0 = floor(P); // Integer part for indexing\\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\\n  Pi0 = mod(Pi0, 289.0);\\n  Pi1 = mod(Pi1, 289.0);\\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\\n  vec4 iz0 = Pi0.zzzz;\\n  vec4 iz1 = Pi1.zzzz;\\n\\n  vec4 ixy = permute(permute(ix) + iy);\\n  vec4 ixy0 = permute(ixy + iz0);\\n  vec4 ixy1 = permute(ixy + iz1);\\n\\n  vec4 gx0 = ixy0 / 7.0;\\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\\n  gx0 = fract(gx0);\\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\\n  vec4 sz0 = step(gz0, vec4(0.0));\\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\\n\\n  vec4 gx1 = ixy1 / 7.0;\\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\\n  gx1 = fract(gx1);\\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\\n  vec4 sz1 = step(gz1, vec4(0.0));\\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\\n\\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\\n\\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n  g000 *= norm0.x;\\n  g010 *= norm0.y;\\n  g100 *= norm0.z;\\n  g110 *= norm0.w;\\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n  g001 *= norm1.x;\\n  g011 *= norm1.y;\\n  g101 *= norm1.z;\\n  g111 *= norm1.w;\\n\\n  float n000 = dot(g000, Pf0);\\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\\n  float n111 = dot(g111, Pf1);\\n\\n  vec3 fade_xyz = fade(Pf0);\\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \\n  return 2.2 * n_xyz;\\n}\\n\\nuniform float time;\\nuniform vec2 hover;\\nuniform float hoverState;\\nvarying float vNoise;\\nvarying vec2 vUv;\\n\\n\\nvoid main() {\\n    vec3 newposition = position;\\n    float PI = 3.1415925;\\n\\n    float noise = cnoise(3.*vec3(position.x,position.y,position.z + time/30.));\\n    // newposition.z += 0.1*sin( (newposition.x  + 0.25 + time/10.)*2.*PI);\\n    \\n    float dist = distance(uv,hover);\\n\\n    newposition.z += hoverState*10.*sin(dist*10. + time);\\n\\n    // newposition.z += 0.05*sin(dist*40. );\\n\\n    // newposition += 0.1*normal*noise;\\n\\n    vNoise = hoverState*sin(dist*10. - time);\\n    vUv = uv;\\n\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );\\n}\"},function(e,t,n){\"use strict\";(function(e,i){var r=n(11),a=n(30),s=n(27),o=n(12),l=n(35),c=n(3),u=n(36),h=n(37),d=n(26),p=n(39),f=n(40),m=n(41),g=n(25),y=n(5),v=n(6),b=n(17),x=n(1),_=n(2),w=n(0),T=n(24),M=n(42),S=n(4),E=n(9),A=n(15);class Plyr{constructor(t,n){if(this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=y.a.touch,this.media=t,w.a.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(e&&this.media instanceof i||w.a.nodeList(this.media)||w.a.array(this.media))&&(this.media=this.media[0]),this.config=Object(S.b)({},a.a,Plyr.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute(\"data-plyr-config\"))}catch(e){return{}}})()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new l.a(this.config.debug),this.debug.log(\"Config\",this.config),this.debug.log(\"Support\",y.a),w.a.nullOrUndefined(this.media)||!w.a.element(this.media))return void this.debug.error(\"Setup failed: no suitable element passed\");if(this.media.plyr)return void this.debug.warn(\"Target already setup\");if(!this.config.enabled)return void this.debug.error(\"Setup failed: disabled by config\");if(!y.a.check().api)return void this.debug.error(\"Setup failed: no support\");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const s=this.media.tagName.toLowerCase();let c=null,m=null;switch(s){case\"div\":if(c=this.media.querySelector(\"iframe\"),w.a.element(c)){if(m=Object(A.b)(c.getAttribute(\"src\")),this.provider=Object(o.a)(m.toString()),this.elements.container=this.media,this.media=c,this.elements.container.className=\"\",m.search.length){const e=[\"1\",\"true\"];e.includes(m.searchParams.get(\"autoplay\"))&&(this.config.autoplay=!0),e.includes(m.searchParams.get(\"loop\"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(m.searchParams.get(\"playsinline\")),this.config.youtube.hl=m.searchParams.get(\"hl\")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(w.a.empty(this.provider)||!Object.keys(o.b).includes(this.provider))return void this.debug.error(\"Setup failed: Invalid provider\");this.type=o.c.video;break;case\"video\":case\"audio\":this.type=s,this.provider=o.b.html5,this.media.hasAttribute(\"crossorigin\")&&(this.config.crossorigin=!0),this.media.hasAttribute(\"autoplay\")&&(this.config.autoplay=!0),(this.media.hasAttribute(\"playsinline\")||this.media.hasAttribute(\"webkit-playsinline\"))&&(this.config.playsinline=!0),this.media.hasAttribute(\"muted\")&&(this.config.muted=!0),this.media.hasAttribute(\"loop\")&&(this.config.loop.active=!0);break;default:return void this.debug.error(\"Setup failed: unsupported type\")}this.supported=y.a.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new h.a(this),this.storage=new g.a(this),this.media.plyr=this,w.a.element(this.elements.container)||(this.elements.container=Object(x.a)(\"div\",{tabindex:0}),Object(x.q)(this.media,this.elements.container)),v.a.addStyleHook.call(this),d.a.setup.call(this),this.config.debug&&_.b.call(this,this.elements.container,this.config.events.join(\" \"),e=>{this.debug.log(`event: ${e.type}`)}),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&v.a.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new u.a(this),this.config.ads.enabled&&(this.ads=new p.a(this)),this.isHTML5&&this.config.autoplay&&setTimeout(()=>this.play(),10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new f.a(this))):this.debug.error(\"Setup failed: no support\")}get isHTML5(){return this.provider===o.b.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===o.b.youtube}get isVimeo(){return this.provider===o.b.vimeo}get isVideo(){return this.type===o.c.video}get isAudio(){return this.type===o.c.audio}play(){return w.a.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>this.media.play()),this.media.play()):null}pause(){this.playing&&w.a.function(this.media.pause)&&this.media.pause()}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}togglePlay(e){(w.a.boolean(e)?e:!this.playing)?this.play():this.pause()}stop(){this.isHTML5?(this.pause(),this.restart()):w.a.function(this.media.stop)&&this.media.stop()}restart(){this.currentTime=0}rewind(e){this.currentTime=this.currentTime-(w.a.number(e)?e:this.config.seekTime)}forward(e){this.currentTime=this.currentTime+(w.a.number(e)?e:this.config.seekTime)}set currentTime(e){if(!this.duration)return;const t=w.a.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return w.a.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=w.a.number(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;w.a.string(t)&&(t=Number(t)),w.a.number(t)||(t=this.storage.get(\"volume\")),w.a.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!w.a.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}increaseVolume(e){const t=this.media.muted?0:this.volume;this.volume=t+(w.a.number(e)?e:0)}decreaseVolume(e){this.increaseVolume(-e)}set muted(e){let t=e;w.a.boolean(t)||(t=this.storage.get(\"muted\")),w.a.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||(!!this.isAudio||(Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)))}set speed(e){let t=null;w.a.number(e)&&(t=e),w.a.number(t)||(t=this.storage.get(\"speed\")),w.a.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:i}=this;t=Object(M.a)(t,n,i),this.config.speed.selected=t,setTimeout(()=>{this.media.playbackRate=t},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let i=[!w.a.empty(e)&&Number(e),this.storage.get(\"quality\"),t.selected,t.default].find(w.a.number),r=!0;if(!n.includes(i)){const e=Object(b.a)(n,i);this.debug.warn(`Unsupported quality option: ${i}, using ${e} instead`),i=e,r=!1}t.selected=i,this.media.quality=i,r&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(e){const t=w.a.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){m.a.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return w.a.url(e)?e:this.source}set download(e){w.a.url(e)&&(this.config.urls.download=e,c.a.setDownloadUrl.call(this))}set poster(e){this.isVideo?v.a.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn(\"Poster can only be set for video\")}get poster(){return this.isVideo?this.media.getAttribute(\"poster\"):null}get ratio(){if(!this.isVideo)return null;const e=Object(E.b)(E.a.call(this));return w.a.array(e)?e.join(\":\"):e}set ratio(e){this.isVideo?w.a.string(e)&&Object(E.d)(e)?(this.config.ratio=e,E.c.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn(\"Aspect ratio can only be set for video\")}set autoplay(e){const t=w.a.boolean(e)?e:this.config.autoplay;this.config.autoplay=t}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){r.a.toggle.call(this,e,!1)}set currentTrack(e){r.a.set.call(this,e,!1)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){r.a.setLanguage.call(this,e,!1)}get language(){return(r.a.getCurrentTrack.call(this)||{}).language}set pip(e){if(!y.a.pip)return;const t=w.a.boolean(e)?e:!this.pip;w.a.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?s.a.active:s.a.inactive),w.a.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return y.a.pip?w.a.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===s.a.active:null}airplay(){y.a.airplay&&this.media.webkitShowPlaybackTargetPicker()}toggleControls(e){if(this.supported.ui&&!this.isAudio){const t=Object(x.f)(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=Object(x.n)(this.elements.container,this.config.classNames.hideControls,n);if(i&&this.config.controls.includes(\"settings\")&&!w.a.empty(this.config.settings)&&c.a.toggleMenu.call(this,!1),i!==t){const e=i?\"controlshidden\":\"controlsshown\";_.f.call(this,this.media,e)}return!i}return!1}on(e,t){_.b.call(this,this.elements.container,e,t)}once(e,t){_.c.call(this,this.elements.container,e,t)}off(e,t){Object(_.a)(this.elements.container,e,t)}destroy(e,t=!1){if(!this.ready)return;const n=()=>{document.body.style.overflow=\"\",this.embed=null,t?(Object.keys(this.elements).length&&(Object(x.j)(this.elements.buttons.play),Object(x.j)(this.elements.captions),Object(x.j)(this.elements.controls),Object(x.j)(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),w.a.function(e)&&e()):(_.g.call(this),Object(x.k)(this.elements.original,this.elements.container),_.f.call(this,this.elements.original,\"destroyed\",!0),w.a.function(e)&&e.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(v.a.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&w.a.function(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))}supports(e){return y.a.mime.call(this,e)}static supported(e,t,n){return y.a.check(e,t,n)}static loadSprite(e,t){return Object(T.a)(e,t)}static setup(e,t={}){let n=null;return w.a.string(e)?n=Array.from(document.querySelectorAll(e)):w.a.nodeList(e)?n=Array.from(e):w.a.array(e)&&(n=e.filter(w.a.element)),w.a.empty(n)?null:n.map(e=>new Plyr(e,t))}}Plyr.defaults=Object(S.a)(a.a),t.a=Plyr}).call(this,n(13),n(13))},function(e,t,n){e.exports=function(){\"use strict\";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?n(Object(r),!0).forEach(function(n){t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var i={addCSS:!0,thumbWidth:15,watch:!0},a=function(e){return null!=e?e.constructor:null},s=function(e,t){return!!(e&&t&&e instanceof t)},o=function(e){return a(e)===String},l=function(e){return Array.isArray(e)},c=function(e){return s(e,NodeList)},h=o,d=l,p=c,f=function(e){return s(e,Element)},m=function(e){return s(e,Event)},g=function(e){return function(e){return null==e}(e)||(o(e)||l(e)||c(e))&&!e.length||function(e){return a(e)===Object}(e)&&!Object.keys(e).length};return function(){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")})(this,t),f(e)?this.element=e:h(e)&&(this.element=document.querySelector(e)),f(this.element)&&g(this.element.rangeTouch)&&(this.config=r({},i,{},n),this.init())}return n=t,s=[{key:\"setup\",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=null;if(g(e)||h(e)?a=Array.from(document.querySelectorAll(h(e)?e:'input[type=\"range\"]')):f(e)?a=[e]:p(e)?a=Array.from(e):d(e)&&(a=e.filter(f)),g(a))return null;var s=r({},i,{},n);if(h(e)&&s.watch){var o=new MutationObserver(function(n){Array.from(n).forEach(function(n){Array.from(n.addedNodes).forEach(function(n){f(n)&&function u(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}(n,e)&&new t(n,s)})})});o.observe(document.body,{childList:!0,subtree:!0})}return a.map(function(e){return new t(e,n)})}},{key:\"enabled\",get:function(){return\"ontouchstart\"in document.documentElement}}],(a=[{key:\"init\",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect=\"none\",this.element.style.webKitUserSelect=\"none\",this.element.style.touchAction=\"manipulation\"),this.listeners(!0),this.element.rangeTouch=this)}},{key:\"destroy\",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect=\"\",this.element.style.webKitUserSelect=\"\",this.element.style.touchAction=\"\"),this.listeners(!1),this.element.rangeTouch=null)}},{key:\"listeners\",value:function(e){var t=this,n=e?\"addEventListener\":\"removeEventListener\";[\"touchstart\",\"touchmove\",\"touchend\"].forEach(function(e){t.element[n](e,function(e){return t.set(e)},!1)})}},{key:\"get\",value:function(e){if(!t.enabled||!m(e))return null;var n,i=e.target,r=e.changedTouches[0],a=parseFloat(i.getAttribute(\"min\"))||0,s=parseFloat(i.getAttribute(\"max\"))||100,o=parseFloat(i.getAttribute(\"step\"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),a+function v(e,t){if(1>t){var n=function(e){var t=\"\".concat(e).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}(n/100*(s-a),o)}},{key:\"set\",value:function(e){t.enabled&&m(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(e.target,\"touchend\"===e.type?\"change\":\"input\"))}}])&&e(n.prototype,a),s&&e(n,s),t;var n,a,s}()}()},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return Console});const i=()=>{};class Console{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log(\"Debugging enabled\")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):i}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):i}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):i}}},function(e,t,n){\"use strict\";var i=n(7),r=n(1),a=n(2),s=n(0);function onChange(){if(!this.enabled)return;const e=this.player.elements.buttons.fullscreen;s.a.element(e)&&(e.pressed=this.active),a.f.call(this.player,this.target,this.active?\"enterfullscreen\":\"exitfullscreen\",!0),i.a.isIos||r.p.call(this.player,this.target,this.active)}function toggleFallback(e=!1){if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?\"hidden\":\"\",Object(r.n)(this.target,this.player.config.classNames.fullscreen.fallback,e),i.a.isIos){let t=document.head.querySelector('meta[name=\"viewport\"]');const n=\"viewport-fit=cover\";t||(t=document.createElement(\"meta\")).setAttribute(\"name\",\"viewport\");const i=s.a.string(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=`,${n}`)):this.cleanupViewport&&(t.content=t.content.split(\",\").filter(e=>e.trim()!==n).join(\",\"))}onChange.call(this)}class Fullscreen{constructor(e){this.player=e,this.prefix=Fullscreen.prefix,this.property=Fullscreen.property,this.scrollPosition={x:0,y:0},this.forceFallback=\"force\"===e.config.fullscreen.fallback,a.b.call(this.player,document,\"ms\"===this.prefix?\"MSFullscreenChange\":`${this.prefix}fullscreenchange`,()=>{onChange.call(this)}),a.b.call(this.player,this.player.elements.container,\"dblclick\",e=>{s.a.element(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.toggle()}),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return Fullscreen.native&&!this.forceFallback}static get prefix(){if(s.a.function(document.exitFullscreen))return\"\";let e=\"\";return[\"webkit\",\"moz\",\"ms\"].some(t=>!(!s.a.function(document[`${t}ExitFullscreen`])&&!s.a.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return\"moz\"===this.prefix?\"FullScreen\":\"Fullscreen\"}get enabled(){return(Fullscreen.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!Fullscreen.native||this.forceFallback)return Object(r.f)(this.target,this.player.config.classNames.fullscreen.fallback);return(this.prefix?document[`${this.prefix}${this.property}Element`]:document.fullscreenElement)===this.target}get target(){return i.a.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}update(){if(this.enabled){let e;e=this.forceFallback?\"Fallback (forced)\":Fullscreen.native?\"Native\":\"Fallback\",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log(\"Fullscreen not supported and fallback disabled\");Object(r.n)(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}enter(){this.enabled&&(i.a.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!Fullscreen.native||this.forceFallback?toggleFallback.call(this,!0):this.prefix?s.a.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen())}exit(){if(this.enabled)if(i.a.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),this.player.play();else if(!Fullscreen.native||this.forceFallback)toggleFallback.call(this,!1);else if(this.prefix){if(!s.a.empty(this.prefix)){const e=\"moz\"===this.prefix?\"Cancel\":\"Exit\";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}toggle(){this.active?this.exit():this.enter()}}t.a=Fullscreen},function(e,t,n){\"use strict\";var i=n(3),r=n(6),a=n(16),s=n(7),o=n(1),l=n(2),c=n(0),u=n(9);t.a=class Listeners{constructor(e){this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,i=e.keyCode?e.keyCode:e.which,r=\"keydown\"===e.type,a=r&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&c.a.number(i))if(r){const r=document.activeElement;if(c.a.element(r)){const{editable:i}=t.config.selectors,{seek:a}=n.inputs;if(r!==a&&Object(o.i)(r,i))return;if(32===e.which&&Object(o.i)(r,'button, [role^=\"menuitem\"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:a||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:a||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:a||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}toggleMenu(e){i.a.toggleMenu.call(this.player,e)}firstTouch(){const{player:e}=this,{elements:t}=e;e.touch=!0,Object(o.n)(t.container,e.config.classNames.isTouch,!0)}setTabFocus(e){const{player:t}=this,{elements:n}=t;if(clearTimeout(this.focusTimer),\"keydown\"===e.type&&9!==e.which)return;\"keydown\"===e.type&&(this.lastKeyDown=e.timeStamp);const i=e.timeStamp-this.lastKeyDown<=20;(\"focus\"!==e.type||i)&&((()=>{const e=t.config.classNames.tabFocus,n=o.e.call(t,`.${e}`);Object(o.n)(n,e,!1)})(),this.focusTimer=setTimeout(()=>{const e=document.activeElement;n.container.contains(e)&&Object(o.n)(document.activeElement,t.config.classNames.tabFocus,!0)},10))}global(e=!0){const{player:t}=this;t.config.keyboard.global&&l.e.call(t,window,\"keydown keyup\",this.handleKey,e,!1),l.e.call(t,document.body,\"click\",this.toggleMenu,e),l.c.call(t,document.body,\"touchstart\",this.firstTouch),l.e.call(t,document.body,\"keydown focus blur\",this.setTabFocus,e,!1,!0)}container(){const{player:e}=this,{config:t,elements:n,timers:i}=e;!t.keyboard.global&&t.keyboard.focused&&l.b.call(e,n.container,\"keydown keyup\",this.handleKey,!1),l.b.call(e,n.container,\"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen\",t=>{const{controls:a}=n;a&&\"enterfullscreen\"===t.type&&(a.pressed=!1,a.hover=!1);let s=0;[\"touchstart\",\"touchmove\",\"mousemove\"].includes(t.type)&&(r.a.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout(()=>r.a.toggleControls.call(e,!1),s)});const a=t=>{if(!t)return u.c.call(e);const i=n.container.getBoundingClientRect(),{width:r,height:a}=i;return u.c.call(e,`${r}:${a}`)},s=()=>{clearTimeout(i.resized),i.resized=setTimeout(a,50)};l.b.call(e,n.container,\"enterfullscreen exitfullscreen\",t=>{const{target:i,usingNative:r}=e.fullscreen;if(i!==n.container)return;if(!e.isEmbed&&c.a.empty(e.config.ratio))return;const o=\"enterfullscreen\"===t.type,{padding:h,ratio:d}=a(o);((t,n,i)=>{if(!e.isVimeo)return;const r=e.elements.wrapper.firstChild,[,a]=t,[s,o]=u.a.call(e);r.style.maxWidth=i?`${a/o*s}px`:null,r.style.margin=i?\"0 auto\":null})(d,0,o),r||(o?l.b.call(e,window,\"resize\",s):l.a.call(e,window,\"resize\",s))})}media(){const{player:e}=this,{elements:t}=e;if(l.b.call(e,e.media,\"timeupdate seeking seeked\",t=>i.a.timeUpdate.call(e,t)),l.b.call(e,e.media,\"durationchange loadeddata loadedmetadata\",t=>i.a.durationUpdate.call(e,t)),l.b.call(e,e.media,\"canplay loadeddata\",()=>{Object(o.o)(t.volume,!e.hasAudio),Object(o.o)(t.buttons.mute,!e.hasAudio)}),l.b.call(e,e.media,\"ended\",()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&e.restart()}),l.b.call(e,e.media,\"progress playing seeking seeked\",t=>i.a.updateProgress.call(e,t)),l.b.call(e,e.media,\"volumechange\",t=>i.a.updateVolume.call(e,t)),l.b.call(e,e.media,\"playing play pause ended emptied timeupdate\",t=>r.a.checkPlaying.call(e,t)),l.b.call(e,e.media,\"waiting canplay seeked playing\",t=>r.a.checkLoading.call(e,t)),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const n=o.d.call(e,`.${e.config.classNames.video}`);if(!c.a.element(n))return;l.b.call(e,t.container,\"click\",i=>{([t.container,n].includes(i.target)||n.contains(i.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(i,e.restart,\"restart\"),this.proxy(i,e.play,\"play\")):this.proxy(i,e.togglePlay,\"play\")))})}e.supported.ui&&e.config.disableContextMenu&&l.b.call(e,t.wrapper,\"contextmenu\",e=>{e.preventDefault()},!1),l.b.call(e,e.media,\"volumechange\",()=>{e.storage.set({volume:e.volume,muted:e.muted})}),l.b.call(e,e.media,\"ratechange\",()=>{i.a.updateSetting.call(e,\"speed\"),e.storage.set({speed:e.speed})}),l.b.call(e,e.media,\"qualitychange\",t=>{i.a.updateSetting.call(e,\"quality\",null,t.detail.quality)}),l.b.call(e,e.media,\"ready qualitychange\",()=>{i.a.setDownloadUrl.call(e)});const n=e.config.events.concat([\"keyup\",\"keydown\"]).join(\" \");l.b.call(e,e.media,n,n=>{let{detail:i={}}=n;\"error\"===n.type&&(i=e.media.error),l.f.call(e,t.container,n.type,!0,i)})}proxy(e,t,n){const{player:i}=this,r=i.config.listeners[n];let a=!0;c.a.function(r)&&(a=r.call(i,e)),a&&c.a.function(t)&&t.call(i,e)}bind(e,t,n,i,r=!0){const{player:a}=this,s=a.config.listeners[i],o=c.a.function(s);l.b.call(a,e,t,e=>this.proxy(e,n,i),r&&!o)}controls(){const{player:e}=this,{elements:t}=e,n=s.a.isIE?\"change\":\"input\";if(t.buttons.play&&Array.from(t.buttons.play).forEach(t=>{this.bind(t,\"click\",e.togglePlay,\"play\")}),this.bind(t.buttons.restart,\"click\",e.restart,\"restart\"),this.bind(t.buttons.rewind,\"click\",e.rewind,\"rewind\"),this.bind(t.buttons.fastForward,\"click\",e.forward,\"fastForward\"),this.bind(t.buttons.mute,\"click\",()=>{e.muted=!e.muted},\"mute\"),this.bind(t.buttons.captions,\"click\",()=>e.toggleCaptions()),this.bind(t.buttons.download,\"click\",()=>{l.f.call(e,e.media,\"download\")},\"download\"),this.bind(t.buttons.fullscreen,\"click\",()=>{e.fullscreen.toggle()},\"fullscreen\"),this.bind(t.buttons.pip,\"click\",()=>{e.pip=\"toggle\"},\"pip\"),this.bind(t.buttons.airplay,\"click\",e.airplay,\"airplay\"),this.bind(t.buttons.settings,\"click\",t=>{t.stopPropagation(),i.a.toggleMenu.call(e,t)}),this.bind(t.buttons.settings,\"keyup\",t=>{const n=t.which;[13,32].includes(n)&&(13!==n?(t.preventDefault(),t.stopPropagation(),i.a.toggleMenu.call(e,t)):i.a.focusFirstMenuItem.call(e,null,!0))},null,!1),this.bind(t.settings.menu,\"keydown\",t=>{27===t.which&&i.a.toggleMenu.call(e,t)}),this.bind(t.inputs.seek,\"mousedown mousemove\",e=>{const n=t.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute(\"seek-value\",i)}),this.bind(t.inputs.seek,\"mousedown mouseup keydown keyup touchstart touchend\",t=>{const n=t.currentTarget,i=t.keyCode?t.keyCode:t.which;if(c.a.keyboardEvent(t)&&39!==i&&37!==i)return;e.lastSeekTime=Date.now();const r=n.hasAttribute(\"play-on-seeked\"),a=[\"mouseup\",\"touchend\",\"keyup\"].includes(t.type);r&&a?(n.removeAttribute(\"play-on-seeked\"),e.play()):!a&&e.playing&&(n.setAttribute(\"play-on-seeked\",\"\"),e.pause())}),s.a.isIos){const t=o.e.call(e,'input[type=\"range\"]');Array.from(t).forEach(e=>this.bind(e,n,e=>Object(a.a)(e.target)))}this.bind(t.inputs.seek,n,t=>{const n=t.currentTarget;let i=n.getAttribute(\"seek-value\");c.a.empty(i)&&(i=n.value),n.removeAttribute(\"seek-value\"),e.currentTime=i/n.max*e.duration},\"seek\"),this.bind(t.progress,\"mouseenter mouseleave mousemove\",t=>i.a.updateSeekTooltip.call(e,t)),this.bind(t.progress,\"mousemove touchmove\",t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startMove(t)}),this.bind(t.progress,\"mouseleave click\",()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)}),this.bind(t.progress,\"mousedown touchstart\",t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startScrubbing(t)}),this.bind(t.progress,\"mouseup touchend\",t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.endScrubbing(t)}),s.a.isWebkit&&Array.from(o.e.call(e,'input[type=\"range\"]')).forEach(t=>{this.bind(t,\"input\",t=>i.a.updateRangeFill.call(e,t.target))}),e.config.toggleInvert&&!c.a.element(t.display.duration)&&this.bind(t.display.currentTime,\"click\",()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,i.a.timeUpdate.call(e))}),this.bind(t.inputs.volume,n,t=>{e.volume=t.target.value},\"volume\"),this.bind(t.controls,\"mouseenter mouseleave\",n=>{t.controls.hover=!e.touch&&\"mouseenter\"===n.type}),this.bind(t.controls,\"mousedown mouseup touchstart touchend touchcancel\",e=>{t.controls.pressed=[\"mousedown\",\"touchstart\"].includes(e.type)}),this.bind(t.controls,\"focusin\",()=>{const{config:n,timers:i}=e;Object(o.n)(t.controls,n.classNames.noTransition,!0),r.a.toggleControls.call(e,!0),setTimeout(()=>{Object(o.n)(t.controls,n.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(i.controls),i.controls=setTimeout(()=>r.a.toggleControls.call(e,!1),a)}),this.bind(t.inputs.volume,\"wheel\",t=>{const n=t.webkitDirectionInvertedFromDevice,[i,r]=[t.deltaX,-t.deltaY].map(e=>n?-e:e),a=Math.sign(Math.abs(i)>Math.abs(r)?i:r);e.increaseVolume(a/50);const{volume:s}=e.media;(1===a&&s<1||-1===a&&s>0)&&t.preventDefault()},\"volume\",!1)}}},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){var e=function(){},t={},n={},i={};function publish(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function executeCallbacks(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function loadFile(t,n,i,r){var a,s,o=document,l=i.async,c=(i.numRetries||0)+1,u=i.before||e,h=t.replace(/^(css|img)!/,\"\");r=r||0,/(^css!|\\.css$)/.test(t)?((s=o.createElement(\"link\")).rel=\"stylesheet\",s.href=h,(a=\"hideFocus\"in s)&&s.relList&&(a=0,s.rel=\"preload\",s.as=\"style\")):/(^img!|\\.(png|gif|jpg|svg)$)/.test(t)?(s=o.createElement(\"img\")).src=h:((s=o.createElement(\"script\")).src=t,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(e){var o=e.type[0];if(a)try{s.sheet.cssText.length||(o=\"e\")}catch(e){18!=e.code&&(o=\"e\")}if(\"e\"==o){if((r+=1)<c)return loadFile(t,n,i,r)}else if(\"preload\"==s.rel&&\"style\"==s.as)return s.rel=\"stylesheet\";n(t,o,e.defaultPrevented)},!1!==u(t,s)&&o.head.appendChild(s)}function loadjs(e,n,i){var r,a;if(n&&n.trim&&(r=n),a=(r?i:n)||{},r){if(r in t)throw\"LoadJS\";t[r]=!0}function loadFn(t,n){!function loadFiles(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,o=[];for(i=function(e,n,i){if(\"e\"==n&&o.push(e),\"b\"==n){if(!i)return;o.push(e)}--a||t(o)},r=0;r<s;r++)loadFile(e[r],i,n)}(e,function(e){executeCallbacks(a,e),t&&executeCallbacks({success:t,error:n},e),publish(r,e)},a)}if(a.returnPromise)return new Promise(loadFn);loadFn()}return loadjs.ready=function ready(e,t){return function subscribe(e,t){var r,a,s,o=[],l=(e=e.push?e:[e]).length,c=l;for(r=function(e,n){n.length&&o.push(e),--c||t(o)};l--;)a=e[l],(s=n[a])?r(a,s):(i[a]=i[a]||[]).push(r)}(e,function(e){executeCallbacks(t,e)}),loadjs},loadjs.done=function done(e){publish(e,[])},loadjs.reset=function reset(){t={},n={},i={}},loadjs.isDefined=function isDefined(e){return e in t},loadjs})},function(e,t,n){\"use strict\";var i=n(1),r=n(2),a=n(8),s=n(0),o=n(21),l=n(18),c=n(15);const u=e=>{e.manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()};t.a=class Ads{constructor(e){this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((e,t)=>{this.on(\"loaded\",e),this.on(\"error\",t)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!s.a.empty(e.publisherId)||s.a.url(e.tagUrl))}load(){this.enabled&&(s.a.object(window.google)&&s.a.object(window.google.ima)?this.ready():Object(o.a)(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger(\"error\",new Error(\"Google IMA SDK failed to load\"))}))}ready(){this.enabled||u(this),this.startSafetyTimer(12e3,\"ready()\"),this.managerPromise.then(()=>{this.clearSafetyTimer(\"onAdsManagerLoaded()\")}),this.listeners(),this.setupIMA()}get tagUrl(){const{config:e}=this;if(s.a.url(e.tagUrl))return e.tagUrl;const t={AV_PUBLISHERID:\"58c25bb0073ef448b1087ad6\",AV_CHANNELID:\"5a0458dc28a06145e4519d21\",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:this.publisherId};return`https://go.aniview.com/api/adserver6/vast/?${Object(c.a)(t)}`}setupIMA(){this.elements.container=Object(i.a)(\"div\",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.requestAds()}requestAds(){const{container:e}=this.player.elements;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e=>this.onAdsManagerLoaded(e),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e),!1);const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}pollCountdown(e=!1){if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute(\"data-badge-text\");this.countdownTimer=setInterval(()=>{const e=Object(l.a)(Math.max(this.manager.getRemainingTime(),0)),t=`${a.a.get(\"advertisement\",this.player.config)} - ${e}`;this.elements.container.setAttribute(\"data-badge-text\",t)},100)}onAdsManagerLoaded(e){if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e)),Object.keys(google.ima.AdEvent.Type).forEach(e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],e=>this.onAdEvent(e))}),this.trigger(\"loaded\")}addCuePoints(){s.a.empty(this.cuePoints)||this.cuePoints.forEach(e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(s.a.element(t)){const n=100/this.player.duration*e,r=Object(i.a)(\"span\",{class:this.player.config.classNames.cues});r.style.left=`${n.toString()}%`,t.appendChild(r)}}})}onAdEvent(e){const{container:t}=this.player.elements,n=e.getAd(),i=e.getAdData();switch((e=>{r.f.call(this.player,this.player.media,`ads${e.replace(/_/g,\"\").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger(\"loaded\"),this.pollCountdown(!0),n.isLinear()||(n.width=t.offsetWidth,n.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:i.adError&&this.player.debug.warn(`Non-fatal ad error: ${i.adError.getMessage()}`)}}onAdError(e){this.cancel(),this.player.debug.warn(\"Ads error\",e)}listeners(){const{container:e}=this.player.elements;let t;this.player.on(\"canplay\",()=>{this.addCuePoints()}),this.player.on(\"ended\",()=>{this.loader.contentComplete()}),this.player.on(\"timeupdate\",()=>{t=this.player.currentTime}),this.player.on(\"seeked\",()=>{const e=this.player.currentTime;s.a.empty(this.cuePoints)||this.cuePoints.forEach((n,i)=>{t<n&&n<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(i,1))})}),window.addEventListener(\"resize\",()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}play(){const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}}).catch(()=>{})}resumeContent(){this.elements.container.style.zIndex=\"\",this.playing=!1,this.player.media.play()}pauseContent(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}cancel(){this.initialized&&this.resumeContent(),this.trigger(\"error\"),this.loadAds()}loadAds(){this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(e=>{this.on(\"loaded\",e),this.player.debug.log(this.manager)}),this.requestAds()}).catch(()=>{})}trigger(e,...t){const n=this.events[e];s.a.array(n)&&n.forEach(e=>{s.a.function(e)&&e.apply(this,t)})}on(e,t){return s.a.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}startSafetyTimer(e,t){this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer(\"startSafetyTimer()\")},e)}clearSafetyTimer(e){s.a.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}}},function(e,t,n){\"use strict\";var i=n(1),r=n(2),a=n(14),s=n(0),o=n(18);const l=e=>{const t=[];return e.split(/\\r\\n\\r\\n|\\n\\n|\\r\\r/).forEach(e=>{const n={};e.split(/\\r\\n|\\n|\\r/).forEach(e=>{if(s.a.number(n.startTime)){if(!s.a.empty(e.trim())&&s.a.empty(n.text)){const t=e.trim().split(\"#xywh=\");[n.text]=t,t[1]&&([n.x,n.y,n.w,n.h]=t[1].split(\",\"))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(n.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number(`0.${t[4]}`),n.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number(`0.${t[9]}`))}}),n.text&&t.push(n)}),t};t.a=class PreviewThumbnails{constructor(e){this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}load(){this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)})}getThumbnails(){return new Promise(e=>{const{src:t}=this.player.config.previewThumbnails;if(s.a.empty(t))throw new Error(\"Missing previewThumbnails.src config attribute\");const n=(s.a.string(t)?[t]:t).map(e=>this.getThumbnail(e));Promise.all(n).then(()=>{this.thumbnails.sort((e,t)=>e.height-t.height),this.player.debug.log(\"Preview thumbnails\",this.thumbnails),e()})})}getThumbnail(e){return new Promise(t=>{Object(a.a)(e).then(n=>{const i={frames:l(n),height:null,urlPrefix:\"\"};i.frames[0].text.startsWith(\"/\")||i.frames[0].text.startsWith(\"http://\")||i.frames[0].text.startsWith(\"https://\")||(i.urlPrefix=e.substring(0,e.lastIndexOf(\"/\")+1));const r=new Image;r.onload=(()=>{i.height=r.naturalHeight,i.width=r.naturalWidth,this.thumbnails.push(i),t()}),r.src=i.urlPrefix+i.frames[0].text})})}startMove(e){if(this.loaded&&s.a.event(e)&&[\"touchmove\",\"mousemove\"].includes(e.type)&&this.player.media.duration){if(\"touchmove\"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{const t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Object(o.a)(this.seekTime)}this.showImageAtCurrentTime()}}endMove(){this.toggleThumbContainer(!1,!0)}startScrubbing(e){!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}endScrubbing(){this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):r.c.call(this.player,this.player.media,\"timeupdate\",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}listeners(){this.player.on(\"play\",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on(\"seeked\",()=>{this.toggleThumbContainer(!1)}),this.player.on(\"timeupdate\",()=>{this.lastTime=this.player.media.currentTime})}render(){this.elements.thumb.container=Object(i.a)(\"div\",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Object(i.a)(\"div\",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=Object(i.a)(\"div\",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Object(i.a)(\"span\",{},\"00:00\"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),s.a.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Object(i.a)(\"div\",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}showImageAtCurrentTime(){this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex(e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime),t=e>=0;let n=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach((t,i)=>{this.loadedImages.includes(t.frames[e].text)&&(n=i)}),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(n)))}loadImage(e=0){const t=this.showingThumb,n=this.thumbnails[e],{urlPrefix:i}=n,r=n.frames[t],a=n.frames[t].text,s=i+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,r,e,t,a,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const n=new Image;n.src=s,n.dataset.index=t,n.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${s}`),n.onload=(()=>this.showImage(n,r,e,t,a,!0)),this.loadingImage=n,this.removeOldImages(n)}}showImage(e,t,n,i,r,a=!0){this.player.debug.log(`Showing thumb: ${r}. num: ${i}. qual: ${n}. newimg: ${a}`),this.setImageSizeAndOffset(e,t),a&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))}removeOldImages(e){Array.from(this.currentImageContainer.children).forEach(t=>{if(\"img\"!==t.tagName.toLowerCase())return;const n=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout(()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)},n)}})}preloadNearby(e,t=!0){return new Promise(n=>{setTimeout(()=>{const i=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===i){let r,a=!1;(r=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse()).forEach(e=>{const t=e.text;if(t!==i&&!this.loadedImages.includes(t)){a=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);const{urlPrefix:e}=this.thumbnails[0],i=e+t,r=new Image;r.src=i,r.onload=(()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),n()})}}),a||n()}},300)})}getHigherQuality(e,t,n,i){if(e<this.thumbnails.length-1){let r=t.naturalHeight;this.usingSprites&&(r=n.h),r<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===i&&(this.player.debug.log(`Showing higher quality thumb for: ${i}`),this.loadImage(e+1))},300)}}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes(\"w\")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){return this.mouseDown?Math.floor(this.player.media.clientWidth/this.thumbAspectRatio):Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}toggleThumbContainer(e=!1,t=!1){const n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}toggleScrubbingContainer(e=!1){const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}determineContainerAutoSizing(){this.elements.thumb.imageContainer.clientHeight>20&&(this.sizeSpecifiedInCSS=!0)}setThumbContainerSizeAndPos(){if(!this.sizeSpecifiedInCSS){const e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${this.thumbContainerHeight}px`,this.elements.thumb.imageContainer.style.width=`${e}px`}this.setThumbContainerPos()}setThumbContainerPos(){const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:n}=this.elements.thumb,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10;let a=this.mousePosX-e.left-n.clientWidth/2;a<i&&(a=i),a>r&&(a=r),n.style.left=`${a}px`}setScrubbingContainerSize(){this.elements.scrubbing.container.style.width=`${this.player.media.clientWidth}px`,this.elements.scrubbing.container.style.height=`${this.player.media.clientWidth/this.thumbAspectRatio}px`}setImageSizeAndOffset(e,t){if(!this.usingSprites)return;const n=this.thumbContainerHeight/t.h;e.style.height=`${Math.floor(e.naturalHeight*n)}px`,e.style.width=`${Math.floor(e.naturalWidth*n)}px`,e.style.left=`-${t.x*n}px`,e.style.top=`-${t.y*n}px`}}},function(e,t,n){\"use strict\";var i=n(12),r=n(20),a=n(26),s=n(5),o=n(6),l=n(1),c=n(0),u=n(4);const h={insertElements(e,t){c.a.string(t)?Object(l.h)(e,this.media,{src:t}):c.a.array(t)&&t.forEach(t=>{Object(l.h)(e,this.media,t)})},change(e){Object(u.c)(e,\"sources.length\")?(r.a.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],Object(l.j)(this.media),this.media=null,c.a.element(this.elements.container)&&this.elements.container.removeAttribute(\"class\");const{sources:t,type:n}=e,[{provider:r=i.b.html5,src:u}]=t,d=\"html5\"===r?n:\"div\",p=\"html5\"===r?{}:{src:u};Object.assign(this,{provider:r,type:n,supported:s.a.check(n,r,this.config.playsinline),media:Object(l.a)(d,p)}),this.elements.container.appendChild(this.media),c.a.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute(\"crossorigin\",\"\"),this.config.autoplay&&this.media.setAttribute(\"autoplay\",\"\"),c.a.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute(\"loop\",\"\"),this.config.muted&&this.media.setAttribute(\"muted\",\"\"),this.config.playsinline&&this.media.setAttribute(\"playsinline\",\"\")),o.a.addStyleHook.call(this),this.isHTML5&&h.insertElements.call(this,\"source\",t),this.config.title=e.title,a.a.setup.call(this),this.isHTML5&&Object.keys(e).includes(\"tracks\")&&h.insertElements.call(this,\"track\",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&o.a.build.call(this),this.isHTML5&&this.media.load(),this.previewThumbnails&&this.previewThumbnails.load(),this.fullscreen.update()},!0)):this.debug.warn(\"Invalid source format\")}};t.a=h},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return clamp});function clamp(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}},function(e,t,n){e.exports=function(){\"use strict\";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var e=\"undefined\"!=typeof window,n=e&&!(\"onscroll\"in window)||\"undefined\"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=e&&\"IntersectionObserver\"in window,r=e&&\"classList\"in document.createElement(\"p\"),a=e&&window.devicePixelRatio>1,s={elements_selector:\".lazy\",container:n||e?document:null,threshold:300,thresholds:null,data_src:\"src\",data_srcset:\"srcset\",data_sizes:\"sizes\",data_bg:\"bg\",data_bg_hidpi:\"bg-hidpi\",data_bg_multi:\"bg-multi\",data_bg_multi_hidpi:\"bg-multi-hidpi\",data_poster:\"poster\",class_applied:\"applied\",class_loading:\"loading\",class_loaded:\"loaded\",class_error:\"error\",class_entered:\"entered\",class_exited:\"exited\",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},o=function(e){return t({},s,e)},l=function(e,t){var n,i=\"LazyLoad::Initialized\",r=new e(t);try{n=new CustomEvent(i,{detail:{instance:r}})}catch(e){(n=document.createEvent(\"CustomEvent\")).initCustomEvent(i,!1,!1,{instance:r})}window.dispatchEvent(n)},c=\"loading\",u=\"loaded\",h=\"applied\",d=\"error\",p=\"native\",f=function(e,t){return e.getAttribute(\"data-\"+t)},m=function(e){return f(e,\"ll-status\")},g=function(e,t){return function(e,t,n){var i=\"data-ll-status\";null!==n?e.setAttribute(i,n):e.removeAttribute(i)}(e,0,t)},y=function(e){return g(e,null)},v=function(e){return null===m(e)},b=function(e){return m(e)===p},x=[c,u,h,d],_=function(e,t,n,i){e&&(void 0===i?void 0===n?e(t):e(t,n):e(t,n,i))},w=function(e,t){r?e.classList.add(t):e.className+=(e.className?\" \":\"\")+t},T=function(e,t){r?e.classList.remove(t):e.className=e.className.replace(new RegExp(\"(^|\\\\s+)\"+t+\"(\\\\s+|$)\"),\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")},M=function(e){return e.llTempImage},S=function(e,t){if(t){var n=t._observer;n&&n.unobserve(e)}},E=function(e,t){e&&(e.loadingCount+=t)},A=function(e,t){e&&(e.toLoadCount=t)},C=function(e){for(var t,n=[],i=0;t=e.children[i];i+=1)\"SOURCE\"===t.tagName&&n.push(t);return n},L=function(e,t,n){n&&e.setAttribute(t,n)},P=function(e,t){e.removeAttribute(t)},R=function(e){return!!e.llOriginalAttrs},D=function(e){if(!R(e)){var t={};t.src=e.getAttribute(\"src\"),t.srcset=e.getAttribute(\"srcset\"),t.sizes=e.getAttribute(\"sizes\"),e.llOriginalAttrs=t}},O=function(e){if(R(e)){var t=e.llOriginalAttrs;L(e,\"src\",t.src),L(e,\"srcset\",t.srcset),L(e,\"sizes\",t.sizes)}},k=function(e,t){L(e,\"sizes\",f(e,t.data_sizes)),L(e,\"srcset\",f(e,t.data_srcset)),L(e,\"src\",f(e,t.data_src))},I=function(e){P(e,\"src\"),P(e,\"srcset\"),P(e,\"sizes\")},N=function(e,t){var n=e.parentNode;n&&\"PICTURE\"===n.tagName&&C(n).forEach(t)},B={IMG:function(e,t){N(e,function(e){D(e),k(e,t)}),D(e),k(e,t)},IFRAME:function(e,t){L(e,\"src\",f(e,t.data_src))},VIDEO:function(e,t){!function(e,n){C(e).forEach(function(e){L(e,\"src\",f(e,t.data_src))})}(e),L(e,\"poster\",f(e,t.data_poster)),L(e,\"src\",f(e,t.data_src)),e.load()}},V=function(e,t){var n=B[e.tagName];n&&n(e,t)},z=function(e,t,n){E(n,1),w(e,t.class_loading),g(e,c),_(t.callback_loading,e,n)},F=[\"IMG\",\"IFRAME\",\"VIDEO\"],H=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||_(e.callback_finish,t)},U=function(e,t,n){e.addEventListener(t,n),e.llEvLisnrs[t]=n},j=function(e,t,n){e.removeEventListener(t,n)},G=function(e){return!!e.llEvLisnrs},W=function(e){if(G(e)){var t=e.llEvLisnrs;for(var n in t){var i=t[n];j(e,n,i)}delete e.llEvLisnrs}},q=function(e,t,n){!function(e){delete e.llTempImage}(e),E(n,-1),function(e){e&&(e.toLoadCount-=1)}(n),T(e,t.class_loading),t.unobserve_completed&&S(e,n)},X=function(e,t,n){var i=M(e)||e;G(i)||function(e,t,n){G(e)||(e.llEvLisnrs={});var i=\"VIDEO\"===e.tagName?\"loadeddata\":\"load\";U(e,i,t),U(e,\"error\",n)}(i,function(r){!function(e,t,n,i){var r=b(t);q(t,n,i),w(t,n.class_loaded),g(t,u),_(n.callback_loaded,t,i),r||H(n,i)}(0,e,t,n),W(i)},function(r){!function(e,t,n,i){var r=b(t);q(t,n,i),w(t,n.class_error),g(t,d),_(n.callback_error,t,i),r||H(n,i)}(0,e,t,n),W(i)})},Y=function(e,t,n){!function(e){return F.indexOf(e.tagName)>-1}(e)?function(e,t,n){!function(e){e.llTempImage=document.createElement(\"IMG\")}(e),X(e,t,n),function(e,t,n){var i=f(e,t.data_bg),r=f(e,t.data_bg_hidpi),s=a&&r?r:i;s&&(e.style.backgroundImage='url(\"'.concat(s,'\")'),M(e).setAttribute(\"src\",s),z(e,t,n))}(e,t,n),function(e,t,n){var i=f(e,t.data_bg_multi),r=f(e,t.data_bg_multi_hidpi),s=a&&r?r:i;s&&(e.style.backgroundImage=s,function(e,t,n){w(e,t.class_applied),g(e,h),t.unobserve_completed&&S(e,t),_(t.callback_applied,e,n)}(e,t,n))}(e,t,n)}(e,t,n):function(e,t,n){X(e,t,n),V(e,t),z(e,t,n)}(e,t,n)},$=[\"IMG\",\"IFRAME\"],Z=function(e){return e.use_native&&\"loading\"in HTMLImageElement.prototype},J=function(e){return Array.prototype.slice.call(e)},K=function(e){return e.container.querySelectorAll(e.elements_selector)},Q=function(e){return function(e){return m(e)===d}(e)},ee=function(e,t){return function(e){return J(e).filter(v)}(e||K(t))},te=function(t,n){var r=o(t);this._settings=r,this.loadingCount=0,function(e,t){i&&!Z(e)&&(t._observer=new IntersectionObserver(function(n){!function(e,t,n){e.forEach(function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,n,i){g(e,\"entered\"),w(e,n.class_entered),T(e,n.class_exited),function(e,t,n){t.unobserve_entered&&S(e,n)}(e,n,i),_(n.callback_enter,e,t,i),function(e){return x.indexOf(m(e))>=0}(e)||Y(e,n,i)}(e.target,e,t,n):function(e,t,n,i){v(e)||(w(e,n.class_exited),function(e,t,n,i){n.cancel_on_exit&&function(e){return m(e)===c}(e)&&\"IMG\"===e.tagName&&(W(e),function(e){N(e,function(e){I(e)}),I(e)}(e),function(e){N(e,function(e){O(e)}),O(e)}(e),T(e,n.class_loading),E(i,-1),y(e),_(n.callback_cancel,e,t,i))}(e,t,n,i),_(n.callback_exit,e,t,i))}(e.target,e,t,n)})}(n,e,t)},function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+\"px\"}}(e)))}(r,this),function(t,n){e&&window.addEventListener(\"online\",function(){!function(e,t){var n;(n=K(e),J(n).filter(Q)).forEach(function(t){T(t,e.class_error),y(t)}),t.update()}(t,n)})}(r,this),this.update(n)};return te.prototype={update:function(e){var t,r,a=this._settings,s=ee(e,a);A(this,s.length),!n&&i?Z(a)?function(e,t,n){e.forEach(function(e){-1!==$.indexOf(e.tagName)&&(e.setAttribute(\"loading\",\"lazy\"),function(e,t,n){X(e,t,n),V(e,t),g(e,p)}(e,t,n))}),A(n,0)}(s,a,this):(r=s,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach(function(t){e.observe(t)})}(t,r)):this.loadAll(s)},destroy:function(){this._observer&&this._observer.disconnect(),K(this._settings).forEach(function(e){delete e.llOriginalAttrs}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,n=this._settings;ee(e,n).forEach(function(e){S(e,t),Y(e,n,t)})}},te.load=function(e,t){var n=o(t);Y(e,n)},te.resetStatus=function(e){y(e)},e&&function(e,t){if(t)if(t.length)for(var n,i=0;n=t[i];i+=1)l(e,n);else l(e,t)}(te,window.lazyLoadOptions),te}()},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return b});var i,r,a,s,o,l,c,u=function _windowExists(){return\"undefined\"!=typeof window},h=function _getGSAP(){return i||u()&&(i=window.gsap)&&i.registerPlugin&&i},d=function _isString(e){return\"string\"==typeof e},p=function _isFunction(e){return\"function\"==typeof e},f=function _max(e,t){var n=\"x\"===t?\"Width\":\"Height\",i=\"scroll\"+n,r=\"client\"+n;return e===a||e===s||e===o?Math.max(s[i],o[i])-(a[\"inner\"+n]||s[r]||o[r]):e[i]-e[\"offset\"+n]},m=function _buildGetter(e,t){var n=\"scroll\"+(\"x\"===t?\"Left\":\"Top\");return e===a&&(null!=e.pageXOffset?n=\"page\"+t.toUpperCase()+\"Offset\":e=null!=s[n]?s:o),function(){return e[n]}},g=function _getOffset(e,t){if(!(e=l(e)[0])||!e.getBoundingClientRect)return console.warn(\"scrollTo target doesn't exist. Using 0\")||{x:0,y:0};var n=e.getBoundingClientRect(),i=!t||t===a||t===o,r=i?{top:s.clientTop-(a.pageYOffset||s.scrollTop||o.scrollTop||0),left:s.clientLeft-(a.pageXOffset||s.scrollLeft||o.scrollLeft||0)}:t.getBoundingClientRect(),c={x:n.left-r.left,y:n.top-r.top};return!i&&t&&(c.x+=m(t,\"x\")(),c.y+=m(t,\"y\")()),c},y=function _parseVal(e,t,n,i,r){return isNaN(e)||\"object\"==typeof e?d(e)&&\"=\"===e.charAt(1)?parseFloat(e.substr(2))*(\"-\"===e.charAt(0)?-1:1)+i-r:\"max\"===e?f(t,n)-r:Math.min(f(t,n),g(e,t)[n]-r):parseFloat(e)-r},v=function _initCore(){i=h(),u()&&i&&document.body&&(a=window,o=document.body,s=document.documentElement,l=i.utils.toArray,i.config({autoKillThreshold:7}),c=i.config(),r=1)},b={version:\"3.6.0\",name:\"scrollTo\",rawVars:1,register:function register(e){i=e,v()},init:function init(e,t,n,i,s){r||v();this.isWin=e===a,this.target=e,this.tween=n,t=function _clean(e,t,n,i){if(p(e)&&(e=e(t,n,i)),\"object\"!=typeof e)return d(e)&&\"max\"!==e&&\"=\"!==e.charAt(1)?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var r,a={};for(r in e)\"onAutoKill\"!==r&&(a[r]=p(e[r])?e[r](t,n,i):e[r]);return a}(t,i,e,s),this.vars=t,this.autoKill=!!t.autoKill,this.getX=m(e,\"x\"),this.getY=m(e,\"y\"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=t.x?(this.add(this,\"x\",this.x,y(t.x,e,\"x\",this.x,t.offsetX||0),i,s,Math.round),this._props.push(\"scrollTo_x\")):this.skipX=1,null!=t.y?(this.add(this,\"y\",this.y,y(t.y,e,\"y\",this.y,t.offsetY||0),i,s,Math.round),this._props.push(\"scrollTo_y\")):this.skipY=1},render:function render(e,t){for(var n,i,r,s,o,l=t._pt,u=t.target,h=t.tween,d=t.autoKill,p=t.xPrev,m=t.yPrev,g=t.isWin;l;)l.r(e,l.d),l=l._next;n=g||!t.skipX?t.getX():p,r=(i=g||!t.skipY?t.getY():m)-m,s=n-p,o=c.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),d&&(!t.skipX&&(s>o||s<-o)&&n<f(u,\"x\")&&(t.skipX=1),!t.skipY&&(r>o||r<-o)&&i<f(u,\"y\")&&(t.skipY=1),t.skipX&&t.skipY&&(h.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(h,t.vars.onAutoKillParams||[]))),g?a.scrollTo(t.skipX?n:t.x,t.skipY?i:t.y):(t.skipY||(u.scrollTop=t.y),t.skipX||(u.scrollLeft=t.x)),t.xPrev=t.x,t.yPrev=t.y},kill:function kill(e){var t=\"scrollTo\"===e;(t||\"scrollTo_x\"===e)&&(this.skipX=1),(t||\"scrollTo_y\"===e)&&(this.skipY=1)}};\n/*!\n * ScrollToPlugin 3.6.0\n * https://greensock.com\n *\n * @license Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/b.max=f,b.getOffset=g,b.buildGetter=m,h()&&i.registerPlugin(b)},function(e,t,n){\"use strict\";(function(e){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function CookieManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,CookieManager),this.banner=e,this.params=this.initParams(t),this.cookies,this.init()}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(CookieManager,[{key:\"initParams\",value:function initParams(e){var t=e.name,n=(e.value,e.duration),i=e.buttons,r=e.onAccept,a=e.onRefuse,s={name:this.isDefined(t)?t:\"adveris_cookie_accepted\",duration:this.isDefined(n)?n:30,onAccept:this.isDefined(r)?r:null,onRefuse:this.isDefined(a)?a:null};if(this.isDefined(i)){var o=i.accept,l=i.refuse,c=i.close,u={accept:this.isDefined(o)?o:this.banner.find(\".item-cookie-banner-accept\"),refuse:this.isDefined(l)?l:this.banner.find(\".item-cookie-banner-refuse\"),close:this.isDefined(c)?c:this.banner.find(\".item-cookie-banner-close\")};s=_objectSpread(_objectSpread({},s),{},{buttons:u})}return s}},{key:\"init\",value:function init(){this.cookieBannerDefined()&&this.cookieBannerExist()&&(this.storeCookies(),this.handleCookieBanner())}},{key:\"handleCookieBanner\",value:function handleCookieBanner(){this.handleShow(),this.handleActions()}},{key:\"handleShow\",value:function handleShow(){var e=this.params.name;void 0===this.cookies[e]&&this.banner.show()}},{key:\"handleActions\",value:function handleActions(){var e=this,t=this.params,n=(t.name,t.duration,t.buttons),i=n.accept,r=n.refuse,a=n.close,s=this.banner;a.on(\"click\",function(e){e.preventDefault(),s.fadeOut()}),i.on(\"click\",function(t){return e.closeCookieBanner(t)}),a.on(\"click\",function(t){return e.closeCookieBanner(t)}),r.on(\"click\",function(t){return e.closeCookieBanner(t,!1)})}},{key:\"closeCookieBanner\",value:function closeCookieBanner(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.preventDefault();var i=this.params,r=i.name,a=i.duration,s=this.banner;s.fadeOut(400,function(){s.remove(),t.setCookie(r,n,a)})}},{key:\"storeCookies\",value:function storeCookies(){var t=decodeURIComponent(document.cookie).split(\";\"),n={};e.each(t,function(e,t){var i=t.split(/=(.+)/)[0].replace(\" \",\"\"),r=t.split(/=(.+)/)[1];n[i]=r}),this.cookies=n}},{key:\"setCookie\",value:function setCookie(e,t,n){var i=this.params,r=i.onAccept,a=i.onRefuse,s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);var o=\"expires=\"+s.toUTCString();document.cookie=e+\"=\"+t+\";\"+o+\";path=/\",0==t?null!==a&&a():null!==r&&r()}},{key:\"cookieBannerDefined\",value:function cookieBannerDefined(){return this.control(this.isDefined(this.banner),this.getMessage(\"cookieBannerDefined\"))}},{key:\"cookieBannerExist\",value:function cookieBannerExist(){return this.control(this.exist(this.banner),this.getMessage(\"cookieBannerExist\"),this.banner)}},{key:\"isDefined\",value:function isDefined(e){return void 0!==e}},{key:\"exist\",value:function exist(e){return e.length}},{key:\"control\",value:function control(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e||(null===n?console.error(t):console.error(t,n)),e}},{key:\"getMessage\",value:function getMessage(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return\"Cookie Manager: \"+{cookieBannerDefined:\"No cookie banner specified as 1st parameter\",cookieBannerExist:\"The cookie banner (specified as 1st parameter) does not exist:\"}[e]}}]),CookieManager}();t.a=n}).call(this,n(13))},function(e,t,n){\"use strict\";(function(e){var n={breakpointXS:getComputedStyle(document.documentElement).getPropertyValue(\"--breakpoint-xs\"),breakpointSm:getComputedStyle(document.documentElement).getPropertyValue(\"--breakpoint-sm\"),breakpointMd:getComputedStyle(document.documentElement).getPropertyValue(\"--breakpoint-md\"),breakpointLg:getComputedStyle(document.documentElement).getPropertyValue(\"--breakpoint-lg\"),breakpointXl:getComputedStyle(document.documentElement).getPropertyValue(\"--breakpoint-xl\"),ColorBlack:getComputedStyle(document.documentElement).getPropertyValue(\"--secondary\"),ColorWhite:getComputedStyle(document.documentElement).getPropertyValue(\"--primary\"),ColorLightgrey:getComputedStyle(document.documentElement).getPropertyValue(\"--primary_grey\"),ColorHalfgrey:getComputedStyle(document.documentElement).getPropertyValue(\"--half_grey\"),ColorDarkgrey:getComputedStyle(document.documentElement).getPropertyValue(\"--secondary_grey\"),ColorBrandprimary:getComputedStyle(document.documentElement).getPropertyValue(\"--brand_primary\"),ColorBrandsecondary:getComputedStyle(document.documentElement).getPropertyValue(\"--brand_secondary\"),$window:e(window),$html:e(\"html\"),$body:e(\"body\"),$preloader:e(\"#preloader\"),$burger:e(\".burger\"),$viewportW:window.innerWidth,$viewportH:window.innerHeight};t.a=n}).call(this,n(13))},function(e,t,n){\"use strict\";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function Router(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Router),this.routes=e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Router,[{key:\"load\",value:function load(){var e=this;this.routes.map(function(t){var n=t.resolve;void 0!==t.resolve?document.querySelectorAll(n).length&&e.runInitialization(t):e.runInitialization(t)})}},{key:\"runInitialization\",value:function runInitialization(e){e.file.init.apply(null,e.dependencies)}}]),Router}();t.a=i},function(e,t,n){\"use strict\";(function(e){t.a={init:function init(t,n,i,r,a,s,o,l){n.$body.offset();var c=e(\".cookie-banner\"),u=(c.find(\".item-accept\"),c.find(\".item-refuse\"),e(\"header\")),h=e(\".scrollto\");e(\".scrollup\");null===sessionStorage.getItem(\"loaded_once\")?(sessionStorage.setItem(\"loaded_once\",\"loaded_once\"),n.$preloader.find(\".preloader-full\").addClass(\"active\"),n.$window.on(\"load\",function(){i.to(n.$preloader,.2,{opacity:0,ease:\"Linear.easeNone\",delay:2.4,onComplete:function onComplete(){return n.$preloader.remove()},addCallback:function addCallback(){return t.dispachEvent(n.$body,\"loaderEnd\")}})})):n.$window.on(\"load\",function(){i.to(n.$preloader,.2,{opacity:0,ease:\"Linear.easeNone\",onComplete:function onComplete(){return n.$preloader.remove()},addCallback:function addCallback(){return t.dispachEvent(n.$body,\"loaderEnd\")}})}),n.$body.on(\"loaderEnd\",function(){window.lazy=new o({unobserve_entered:!0,callback_loaded:function lazyParent(e){e.closest(\".lazy-container\").classList.add(\"is-load\")}}),n.$burger.on(\"click\",function(){n.$body.toggleClass(\"is-menu\")}),window.addEventListener(\"resize\",function checkDevice(){\"matchMedia\"in window&&window.matchMedia(\"(min-width:48rem)\").matches&&n.$body.removeClass(\"is-menu\")},!1);var e=i.from(u,{yPercent:-100,paused:!0,duration:.2}).progress(1);a.matchMedia({\"(min-width: 48rem)\":function minWidth48rem(){a.create({start:\"top -40\",end:99999,onUpdate:function onUpdate(t){-1===t.direction?e.play():e.reverse()},toggleClass:{className:\"is-scrolled\",targets:u}})},\"(max-width: 47rem)\":function maxWidth47rem(){e.play()}}),h.on(\"click\",function(){i.to(window,{duration:.8,ease:\"easeCustom\",scrollTo:n.$window.height()})})})}}}).call(this,n(13))},function(e,t,n){\"use strict\";(function(e){t.a={init:function init(t,n){e(\"body\");new n({dom:document.getElementById(\"app-canvas\")})}}}).call(this,n(13))},function(e,t,n){\"use strict\";(function(e){t.a={init:function init(t){var n=e(\"body\"),i=e(\".loaded-posts\"),r=e(\".item-filter\"),a=e(\".load-more-container\"),s=e(\".load-more\"),o=e(\".loading-container\"),l=e(\".card-article\").length,c=n.data(\"lang\"),u=9,h=null,d={categoryId:\"all\",categoryName:null,offset:l};function ajaxFilter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"filter\";null!==h&&h.abort();var n=\"loadMore\"===t,r=n?d.offset:0,l=\"/ajax/posts/category/\".concat(d.categoryId,\"/\").concat(r,\"/\").concat(c);h=e.ajax({url:l,type:\"GET\",dataType:\"json\",beforeSend:function beforeSend(){n||i.fadeOut(200,function(){e(this).html(\"\")}),a.show(),s.hide(),o.show()},success:function success(t,r){o.hide(),n?(i.append(t),i.find(\".no-more-post\").length?a.hide():(a.show(),s.show())):i.fadeIn(200,function(){e(this).html(t).show()}),h=null},complete:function complete(e){setTimeout(function(){(window.lazy.update(),n)||(i.find(\".card-article\").length<u?a.hide():(a.show(),s.show()))},400)},error:function error(e,t,n){console.log(e,t,n)}})}l<u&&a.hide(),r.on(\"click\",function(t){var n=e(this);r.removeClass(\"active\"),n.addClass(\"active\"),d.categoryId=n.data(\"category-id\"),d.categoryName=n.text(),ajaxFilter()}),s.on(\"click\",function(t){d.offset=e(\".card-article\").length,ajaxFilter(\"loadMore\")})}}}).call(this,n(13))},function(e,t,n){\"use strict\";(function(e){t.a={init:function init(t,n,i){var r=e(window),a=e(\"#progress-line\"),s=e(\"#trigger-share\"),o=e(\".share-container\");n.to(a,{width:\"100%\",paused:!0,scrollTrigger:{scrub:.1}}),r.on(\"load\",function(){var e=s.height()-120;i.matchMedia({\"(min-width: 48rem)\":function minWidth48rem(){n.to(o,{scrollTrigger:{trigger:o,pin:!0,pinSpacing:!1,start:\"top 120\",end:function end(){return\"+=\"+e},scrub:1}})}})})}}}).call(this,n(13))},function(e,t,n){\"use strict\";t.a={init:function init(e,t){}}},function(e,t,n){\"use strict\";const i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,o=2,l=1,c=2,u=3,h=0,d=1,p=2,f=0,m=1,g=2,y=3,b=4,x=5,_=100,w=101,T=102,M=103,S=104,E=200,A=201,C=202,L=203,P=204,R=205,D=206,O=207,k=208,I=209,N=210,B=0,V=1,z=2,F=3,H=4,U=5,j=6,G=7,W=0,q=1,X=2,Y=0,$=1,Z=2,J=3,K=4,Q=5,ee=300,te=301,ne=302,ie=303,re=304,ae=306,se=307,oe=1e3,le=1001,ce=1002,ue=1003,he=1004,de=1005,pe=1006,fe=1007,me=1008,ge=1009,ye=1010,ve=1011,be=1012,xe=1013,_e=1014,we=1015,Te=1016,Me=1017,Se=1018,Ee=1019,Ae=1020,Ce=1021,Le=1022,Pe=1023,Re=1024,De=1025,Oe=1026,ke=1027,Ie=1028,Ne=1029,Be=1030,Ve=1031,ze=1032,Fe=1033,He=33776,Ue=33777,je=33778,Ge=33779,We=35840,qe=35841,Xe=35842,Ye=35843,$e=36196,Ze=37492,Je=37496,Ke=37808,Qe=37809,et=37810,tt=37811,nt=37812,it=37813,rt=37814,at=37815,st=37816,ot=37817,lt=37818,ct=37819,ut=37820,ht=37821,dt=36492,pt=37840,ft=37841,mt=37842,gt=37843,yt=37844,vt=37845,bt=37846,xt=37847,_t=37848,wt=37849,Tt=37850,Mt=37851,St=37852,Et=37853,At=2200,Ct=2201,Lt=2202,Pt=2300,Rt=2301,Dt=2302,Ot=2400,kt=2401,It=2402,Nt=2500,Bt=2501,Vt=3e3,zt=3001,Ft=3007,Ht=3002,Ut=3003,jt=3004,Gt=3005,Wt=3006,qt=3200,Xt=3201,Yt=0,$t=1,Zt=7680,Jt=519,Kt=35044,Qt=35048,en=\"300 es\";function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const tn=[];for(let e=0;e<256;e++)tn[e]=(e<16?\"0\":\"\")+e.toString(16);let nn=1234567;const rn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(tn[255&e]+tn[e>>8&255]+tn[e>>16&255]+tn[e>>24&255]+\"-\"+tn[255&t]+tn[t>>8&255]+\"-\"+tn[t>>16&15|64]+tn[t>>24&255]+\"-\"+tn[63&n|128]+tn[n>>8&255]+\"-\"+tn[n>>16&255]+tn[n>>24&255]+tn[255&i]+tn[i>>8&255]+tn[i>>16&255]+tn[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},damp:function(e,t,n,i){return rn.lerp(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(rn.euclideanModulo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(nn=e%2147483647),((nn=16807*nn%2147483647)-1)/2147483646},degToRad:function(e){return e*rn.DEG2RAD},radToDeg:function(e){return e*rn.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+i)/2),u=s((t+i)/2),h=a((t-i)/2),d=s((t-i)/2),p=a((i-t)/2),f=s((i-t)/2);switch(r){case\"XYX\":e.set(o*u,l*h,l*d,o*c);break;case\"YZY\":e.set(l*d,o*u,l*h,o*c);break;case\"ZXZ\":e.set(l*h,l*d,o*u,o*c);break;case\"XZX\":e.set(o*u,l*f,l*p,o*c);break;case\"YXY\":e.set(l*p,o*u,l*f,o*c);break;case\"ZYZ\":e.set(l*f,l*p,o*u,o*c);break;default:console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: \"+r)}}};class Vector2{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Vector2.prototype.isVector2=!0;class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],y=i[1],v=i[4],b=i[7],x=i[2],_=i[5],w=i[8];return r[0]=a*f+s*y+o*x,r[3]=a*m+s*v+o*_,r[6]=a*g+s*b+o*w,r[1]=l*f+c*y+u*x,r[4]=l*m+c*v+u*_,r[7]=l*g+c*b+u*w,r[2]=h*f+d*y+p*x,r[5]=h*m+d*v+p*_,r[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,h=s*o-c*r,d=l*r-a*o,p=t*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(s*n-i*a)*f,e[3]=h*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-s*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],s=i[6],o=i[1],l=i[4],c=i[7];return i[0]=t*r+n*o,i[3]=t*a+n*l,i[6]=t*s+n*c,i[1]=-n*r+t*o,i[4]=-n*a+t*l,i[7]=-n*s+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let an;Matrix3.prototype.isMatrix3=!0;const sn={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if(\"undefined\"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===an&&(an=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")),an.width=e.width,an.height=e.height;const n=an.getContext(\"2d\");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=an}return t.width>2048||t.height>2048?t.toDataURL(\"image/jpeg\",.6):t.toDataURL(\"image/png\")}};let on=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,n=le,i=le,r=pe,a=me,s=Pe,o=ge,l=1,c=Vt){super(),Object.defineProperty(this,\"id\",{value:on++}),this.uuid=rn.generateUUID(),this.name=\"\",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||\"string\"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=rn.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(serializeImage(i[e].image)):t.push(serializeImage(i[e]))}else t=serializeImage(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:\"dispose\"})}transformUv(e){if(this.mapping!==ee)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oe:e.x=e.x-Math.floor(e.x);break;case le:e.x=e.x<0?0:1;break;case ce:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case oe:e.y=e.y-Math.floor(e.y);break;case le:e.y=e.y<0?0:1;break;case ce:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function serializeImage(e){return\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap?sn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn(\"THREE.Texture: Unable to serialize Texture.\"),{})}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=ee,Texture.prototype.isTexture=!0;class Vector4{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=e.elements,s=a[0],o=a[4],l=a[8],c=a[1],u=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(s+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(s+1)/2,a=(u+1)/2,m=(f+1)/2,g=(o+c)/4,y=(l+d)/4,v=(h+p)/4;return e>a&&e>m?e<.01?(n=0,i=.707106781,r=.707106781):(i=g/(n=Math.sqrt(e)),r=y/n):a>m?a<.01?(n=.707106781,i=0,r=.707106781):(n=g/(i=Math.sqrt(a)),r=v/i):m<.01?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(m)),i=v/r),this.set(n,i,r,t),this}let m=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((s+u+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Vector4.prototype.isVector4=!0;class WebGLRenderTarget extends EventDispatcher{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),n=n||{},this.texture=new Texture(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:pe,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:\"dispose\"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0;(class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}).prototype.isWebGLMultisampleRenderTarget=!0;class Quaternion{constructor(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return n.copy(e).slerp(t,i)}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==h||l!==d||c!==p){let e=1-s;const t=o*h+l*d+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],h=r[a+1],d=r[a+2],p=r[a+3];return e[t]=s*p+c*u+o*d-l*h,e[t+1]=o*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-o*u,e[t+3]=c*p-s*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),h=o(n/2),d=o(i/2),p=o(r/2);switch(a){case\"XYZ\":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case\"YXZ\":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case\"ZXY\":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case\"ZYX\":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case\"YZX\":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case\"XZY\":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn(\"THREE.Quaternion: .setFromEuler() encountered an unknown order: \"+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=n+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rn.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0;class Vector3{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(cn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*n,c=o*n+s*t-r*i,u=o*i+r*n-a*t,h=-r*t-a*n-s*i;return this.x=l*o+h*-r+c*-s-u*-a,this.y=c*o+h*-a+u*-r-l*-s,this.z=u*o+h*-s+l*-a-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ln.copy(this).projectOnVector(e),this.sub(ln)}reflect(e){return this.sub(ln.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(rn.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Vector3.prototype.isVector3=!0;const ln=new Vector3,cn=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),t=new Vector3(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,a,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn(\"THREE.Box3: .getCenter() target is now required\"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn(\"THREE.Box3: .getSize() target is now required\"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),dn.copy(t.boundingBox),dn.applyMatrix4(e.matrixWorld),this.union(dn));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn(\"THREE.Box3: .getParameter() target is now required\"),t=new Vector3),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hn),hn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bn),xn.subVectors(this.max,bn),pn.subVectors(e.a,bn),fn.subVectors(e.b,bn),mn.subVectors(e.c,bn),gn.subVectors(fn,pn),yn.subVectors(mn,fn),vn.subVectors(pn,mn);let t=[0,-gn.z,gn.y,0,-yn.z,yn.y,0,-vn.z,vn.y,gn.z,0,-gn.x,yn.z,0,-yn.x,vn.z,0,-vn.x,-gn.y,gn.x,0,-yn.y,yn.x,0,-vn.y,vn.x,0];return!!satForAxes(t,pn,fn,mn,xn)&&(!!satForAxes(t=[1,0,0,0,1,0,0,0,1],pn,fn,mn,xn)&&(_n.crossVectors(gn,yn),satForAxes(t=[_n.x,_n.y,_n.z],pn,fn,mn,xn)))}clampPoint(e,t){return void 0===t&&(console.warn(\"THREE.Box3: .clampPoint() target is now required\"),t=new Vector3),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hn.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error(\"THREE.Box3: .getBoundingSphere() target is now required\"),this.getCenter(e.center),e.radius=.5*this.getSize(hn).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(un[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),un[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),un[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),un[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),un[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),un[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),un[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),un[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(un),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box3.prototype.isBox3=!0;const un=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],hn=new Vector3,dn=new Box3,pn=new Vector3,fn=new Vector3,mn=new Vector3,gn=new Vector3,yn=new Vector3,vn=new Vector3,bn=new Vector3,xn=new Vector3,_n=new Vector3,wn=new Vector3;function satForAxes(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){wn.fromArray(e,a);const s=r.x*Math.abs(wn.x)+r.y*Math.abs(wn.y)+r.z*Math.abs(wn.z),o=t.dot(wn),l=n.dot(wn),c=i.dot(wn);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Tn=new Box3;class Sphere{constructor(e=new Vector3,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Tn.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn(\"THREE.Sphere: .clampPoint() target is now required\"),t=new Vector3),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn(\"THREE.Sphere: .getBoundingBox() target is now required\"),e=new Box3),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Mn=new Vector3,Sn=new Vector3,En=new Vector3,An=new Vector3,Cn=new Vector3,Ln=new Vector3,Pn=new Vector3;class Ray{constructor(e=new Vector3,t=new Vector3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn(\"THREE.Ray: .at() target is now required\"),t=new Vector3),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mn)),this}closestPointToPoint(e,t){void 0===t&&(console.warn(\"THREE.Ray: .closestPointToPoint() target is now required\"),t=new Vector3),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Mn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Mn.copy(this.direction).multiplyScalar(t).add(this.origin),Mn.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Sn.copy(e).add(t).multiplyScalar(.5),En.copy(t).sub(e).normalize(),An.copy(this.origin).sub(Sn);const r=.5*e.distanceTo(t),a=-this.direction.dot(En),s=An.dot(this.direction),o=-An.dot(En),l=An.lengthSq(),c=Math.abs(1-a*a);let u,h,d,p;if(c>0)if(h=a*s-o,p=r*c,(u=a*o-s)>=0)if(h>=-p)if(h<=p){const e=1/c;d=(u*=e)*(u+a*(h*=e)+2*s)+h*(a*u+h+2*o)+l}else h=r,d=-(u=Math.max(0,-(a*h+s)))*u+h*(h+2*o)+l;else h=-r,d=-(u=Math.max(0,-(a*h+s)))*u+h*(h+2*o)+l;else h<=-p?d=-(u=Math.max(0,-(-a*r+s)))*u+(h=u>0?-r:Math.min(Math.max(-r,-o),r))*(h+2*o)+l:h<=p?(u=0,d=(h=Math.min(Math.max(-r,-o),r))*(h+2*o)+l):d=-(u=Math.max(0,-(a*r+s)))*u+(h=u>0?r:Math.min(Math.max(-r,-o),r))*(h+2*o)+l;else h=a>0?-r:r,d=-(u=Math.max(0,-(a*h+s)))*u+h*(h+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(En).multiplyScalar(h).add(Sn),d}intersectSphere(e,t){Mn.subVectors(e.center,this.origin);const n=Mn.dot(this.direction),i=Mn.dot(Mn)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(s=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Mn)}intersectTriangle(e,t,n,i,r){Cn.subVectors(t,e),Ln.subVectors(n,e),Pn.crossVectors(Cn,Ln);let a,s=this.direction.dot(Pn);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}An.subVectors(this.origin,e);const o=a*this.direction.dot(Ln.crossVectors(An,Ln));if(o<0)return null;const l=a*this.direction.dot(Cn.cross(An));if(l<0)return null;if(o+l>s)return null;const c=-a*An.dot(Pn);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}set(e,t,n,i,r,a,s,o,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Rn.setFromMatrixColumn(e,0).length(),r=1/Rn.setFromMatrixColumn(e,1).length(),a=1/Rn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if(\"XYZ\"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if(\"YXZ\"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if(\"ZXY\"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if(\"ZYX\"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if(\"YZX\"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if(\"XZY\"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(On,e,kn)}lookAt(e,t,n){const i=this.elements;return Bn.subVectors(e,t),0===Bn.lengthSq()&&(Bn.z=1),Bn.normalize(),In.crossVectors(n,Bn),0===In.lengthSq()&&(1===Math.abs(n.z)?Bn.x+=1e-4:Bn.z+=1e-4,Bn.normalize(),In.crossVectors(n,Bn)),In.normalize(),Nn.crossVectors(Bn,In),i[0]=In.x,i[4]=Nn.x,i[8]=Bn.x,i[1]=In.y,i[5]=Nn.y,i[9]=Bn.y,i[2]=In.z,i[6]=Nn.z,i[10]=Bn.z,this}multiply(e,t){return void 0!==t?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],_=i[0],w=i[4],T=i[8],M=i[12],S=i[1],E=i[5],A=i[9],C=i[13],L=i[2],P=i[6],R=i[10],D=i[14],O=i[3],k=i[7],I=i[11],N=i[15];return r[0]=a*_+s*S+o*L+l*O,r[4]=a*w+s*E+o*P+l*k,r[8]=a*T+s*A+o*R+l*I,r[12]=a*M+s*C+o*D+l*N,r[1]=c*_+u*S+h*L+d*O,r[5]=c*w+u*E+h*P+d*k,r[9]=c*T+u*A+h*R+d*I,r[13]=c*M+u*C+h*D+d*N,r[2]=p*_+f*S+m*L+g*O,r[6]=p*w+f*E+m*P+g*k,r[10]=p*T+f*A+m*R+g*I,r[14]=p*M+f*C+m*D+g*N,r[3]=y*_+v*S+b*L+x*O,r[7]=y*w+v*E+b*P+x*k,r[11]=y*T+v*A+b*R+x*I,r[15]=y*M+v*C+b*D+x*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-i*l*u-r*s*h+n*l*h+i*s*d-n*o*d)+e[7]*(+t*o*d-t*l*h+r*a*h-i*a*d+i*l*c-r*o*c)+e[11]*(+t*l*u-t*s*d-r*a*u+n*a*d+r*s*c-n*l*c)+e[15]*(-i*s*c-t*o*u+t*s*h+i*a*u-n*a*h+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],y=u*m*l-f*h*l+f*o*d-s*m*d-u*o*g+s*h*g,v=p*h*l-c*m*l-p*o*d+a*m*d+c*o*g-a*h*g,b=c*f*l-p*u*l+p*s*d-a*f*d-c*s*g+a*u*g,x=p*u*o-c*f*o-p*s*h+a*f*h+c*s*m-a*u*m,_=t*y+n*v+i*b+r*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=y*w,e[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*w,e[2]=(s*m*r-f*o*r+f*i*l-n*m*l-s*i*g+n*o*g)*w,e[3]=(u*o*r-s*h*r-u*i*l+n*h*l+s*i*d-n*o*d)*w,e[4]=v*w,e[5]=(c*m*r-p*h*r+p*i*d-t*m*d-c*i*g+t*h*g)*w,e[6]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*g-t*o*g)*w,e[7]=(a*h*r-c*o*r+c*i*l-t*h*l-a*i*d+t*o*d)*w,e[8]=b*w,e[9]=(p*u*r-c*f*r-p*n*d+t*f*d+c*n*g-t*u*g)*w,e[10]=(a*f*r-p*s*r+p*n*l-t*f*l-a*n*g+t*s*g)*w,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*d-t*s*d)*w,e[12]=x*w,e[13]=(c*f*i-p*u*i+p*n*h-t*f*h-c*n*m+t*u*m)*w,e[14]=(p*s*i-a*f*i-p*n*o+t*f*o+a*n*m-t*s*m)*w,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*h+t*s*h)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,h=r*l,d=r*c,p=r*u,f=a*c,m=a*u,g=s*u,y=o*l,v=o*c,b=o*u,x=n.x,_=n.y,w=n.z;return i[0]=(1-(f+g))*x,i[1]=(d+b)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(d-b)*_,i[5]=(1-(h+g))*_,i[6]=(m+y)*_,i[7]=0,i[8]=(p+v)*w,i[9]=(m-y)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Rn.set(i[0],i[1],i[2]).length();const a=Rn.set(i[4],i[5],i[6]).length(),s=Rn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Dn.copy(this);const o=1/r,l=1/a,c=1/s;return Dn.elements[0]*=o,Dn.elements[1]*=o,Dn.elements[2]*=o,Dn.elements[4]*=l,Dn.elements[5]*=l,Dn.elements[6]*=l,Dn.elements[8]*=c,Dn.elements[9]*=c,Dn.elements[10]*=c,t.setFromRotationMatrix(Dn),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a){void 0===a&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");const s=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,a){const s=this.elements,o=1/(t-e),l=1/(n-i),c=1/(a-r),u=(t+e)*o,h=(n+i)*l,d=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Matrix4.prototype.isMatrix4=!0;const Rn=new Vector3,Dn=new Matrix4,On=new Vector3(0,0,0),kn=new Vector3(1,1,1),In=new Vector3,Nn=new Vector3,Bn=new Vector3,Vn=new Matrix4,zn=new Quaternion;class Euler{constructor(e=0,t=0,n=0,i=Euler.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const i=rn.clamp,r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];switch(t=t||this._order){case\"XYZ\":this._y=Math.asin(i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,c),this._z=0);break;case\"YXZ\":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,a),this._z=0);break;case\"ZXY\":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case\"ZYX\":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case\"YZX\":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(o,p));break;case\"XZY\":this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn(\"THREE.Euler: .setFromRotationMatrix() encountered an unknown order: \"+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Vn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Vn,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return zn.setFromEuler(this),this.setFromQuaternion(zn,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0,Euler.DefaultOrder=\"XYZ\",Euler.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"];class Layers{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Fn=0;const Hn=new Vector3,Un=new Quaternion,jn=new Matrix4,Gn=new Vector3,Wn=new Vector3,qn=new Vector3,Xn=new Quaternion,Yn=new Vector3(1,0,0),$n=new Vector3(0,1,0),Zn=new Vector3(0,0,1),Jn={type:\"added\"},Kn={type:\"removed\"};function Object3D(){Object.defineProperty(this,\"id\",{value:Fn++}),this.uuid=rn.generateUUID(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const e=new Vector3,t=new Euler,n=new Quaternion,i=new Vector3(1,1,1);t._onChange(function onRotationChange(){n.setFromEuler(t,!1)}),n._onChange(function onQuaternionChange(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Un.setFromAxisAngle(e,t),this.quaternion.multiply(Un),this},rotateOnWorldAxis:function(e,t){return Un.setFromAxisAngle(e,t),this.quaternion.premultiply(Un),this},rotateX:function(e){return this.rotateOnAxis(Yn,e)},rotateY:function(e){return this.rotateOnAxis($n,e)},rotateZ:function(e){return this.rotateOnAxis(Zn,e)},translateOnAxis:function(e,t){return Hn.copy(e).applyQuaternion(this.quaternion),this.position.add(Hn.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Yn,e)},translateY:function(e){return this.translateOnAxis($n,e)},translateZ:function(e){return this.translateOnAxis(Zn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(jn.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?Gn.copy(e):Gn.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Wn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jn.lookAt(Wn,Gn,this.up):jn.lookAt(Gn,Wn,this.up),this.quaternion.setFromRotationMatrix(jn),i&&(jn.extractRotation(i.matrixWorld),Un.setFromRotationMatrix(jn),this.quaternion.premultiply(Un.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Jn)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Kn)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Kn)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),jn.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),jn.multiply(e.parent.matrixWorld)),e.applyMatrix4(jn),this.add(e),e.updateWorldMatrix(!1,!0),this},getObjectById:function(e){return this.getObjectByProperty(\"id\",e)},getObjectByName:function(e){return this.getObjectByProperty(\"name\",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\"),e=new Vector3),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\"),e=new Quaternion),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wn,e,qn),e},getWorldScale:function(e){return void 0===e&&(console.warn(\"THREE.Object3D: .getWorldScale() target is now required\"),e=new Vector3),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wn,Xn,e),e},getWorldDirection:function(e){void 0===e&&(console.warn(\"THREE.Object3D: .getWorldDirection() target is now required\"),e=new Vector3),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||\"string\"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});const i={};function serialize(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,\"\"!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type=\"InstancedMesh\",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=serialize(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];serialize(e.shapes,i)}else serialize(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(serialize(e.materials,this.material[n]));i.material=t}else i.material=serialize(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(serialize(e.animations,n))}}if(t){const t=extractFromCache(e.geometries),i=extractFromCache(e.materials),r=extractFromCache(e.textures),a=extractFromCache(e.images),s=extractFromCache(e.shapes),o=extractFromCache(e.skeletons),l=extractFromCache(e.animations);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),o.length>0&&(n.skeletons=o),l.length>0&&(n.animations=l)}return n.object=i,n;function extractFromCache(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const Qn=new Vector3,ei=new Vector3,ti=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Qn.subVectors(n,t).cross(ei.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn(\"THREE.Plane: .projectPoint() target is now required\"),t=new Vector3),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn(\"THREE.Plane: .intersectLine() target is now required\"),t=new Vector3);const n=e.delta(Qn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn(\"THREE.Plane: .coplanarPoint() target is now required\"),e=new Vector3),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||ti.getNormalMatrix(e),i=this.coplanarPoint(Qn).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Plane.prototype.isPlane=!0;const ni=new Vector3,ii=new Vector3,ri=new Vector3,ai=new Vector3,si=new Vector3,oi=new Vector3,li=new Vector3,ci=new Vector3,ui=new Vector3,hi=new Vector3;class Triangle{constructor(e=new Vector3,t=new Vector3,n=new Vector3){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){void 0===i&&(console.warn(\"THREE.Triangle: .getNormal() target is now required\"),i=new Vector3),i.subVectors(n,t),ni.subVectors(e,t),i.cross(ni);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){ni.subVectors(i,t),ii.subVectors(n,t),ri.subVectors(e,t);const a=ni.dot(ni),s=ni.dot(ii),o=ni.dot(ri),l=ii.dot(ii),c=ii.dot(ri),u=a*l-s*s;if(void 0===r&&(console.warn(\"THREE.Triangle: .getBarycoord() target is now required\"),r=new Vector3),0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-s*c)*h,p=(a*c-s*o)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,ai),ai.x>=0&&ai.y>=0&&ai.x+ai.y<=1}static getUV(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,ai),o.set(0,0),o.addScaledVector(r,ai.x),o.addScaledVector(a,ai.y),o.addScaledVector(s,ai.z),o}static isFrontFacing(e,t,n,i){return ni.subVectors(n,t),ii.subVectors(e,t),ni.cross(ii).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ni.subVectors(this.c,this.b),ii.subVectors(this.a,this.b),.5*ni.cross(ii).length()}getMidpoint(e){return void 0===e&&(console.warn(\"THREE.Triangle: .getMidpoint() target is now required\"),e=new Vector3),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn(\"THREE.Triangle: .getPlane() target is now required\"),e=new Plane),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return Triangle.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn(\"THREE.Triangle: .closestPointToPoint() target is now required\"),t=new Vector3);const n=this.a,i=this.b,r=this.c;let a,s;si.subVectors(i,n),oi.subVectors(r,n),ci.subVectors(e,n);const o=si.dot(ci),l=oi.dot(ci);if(o<=0&&l<=0)return t.copy(n);ui.subVectors(e,i);const c=si.dot(ui),u=oi.dot(ui);if(c>=0&&u<=c)return t.copy(i);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(si,a);hi.subVectors(e,r);const d=si.dot(hi),p=oi.dot(hi);if(p>=0&&d<=p)return t.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(oi,s);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return li.subVectors(r,i),s=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(li,s);const g=1/(m+f+h);return a=f*g,s=h*g,t.copy(n).addScaledVector(si,a).addScaledVector(oi,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let di=0;function Material(){Object.defineProperty(this,\"id\",{value:di++}),this.uuid=rn.generateUUID(),this.name=\"\",this.type=\"Material\",this.fog=!0,this.blending=m,this.side=h,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=P,this.blendDst=R,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=F,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Jt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zt,this.stencilZFail=Zt,this.stencilZPass=Zt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(\"THREE.Material: '\"+t+\"' parameter is undefined.\");continue}if(\"shading\"===t){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(\"THREE.\"+this.type+\": '\"+t+\"' is not a property of this material.\")}},toJSON:function(e){const t=void 0===e||\"string\"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};function extractFromCache(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,\"\"!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==m&&(n.blending=this.blending),this.side!==h&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=extractFromCache(e.textures),i=extractFromCache(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),Object.defineProperty(Material.prototype,\"needsUpdate\",{set:function(e){!0===e&&this.version++}});const pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fi={h:0,s:0,l:0},mi={h:0,s:0,l:0};function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Color{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):\"number\"==typeof e?this.setHex(e):\"string\"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=rn.euclideanModulo(e,1),t=rn.clamp(t,0,1),n=rn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=hue2rgb(r,i,e+1/3),this.g=hue2rgb(r,i,e),this.b=hue2rgb(r,i,e-1/3)}return this}setStyle(e){function handleAlpha(t){void 0!==t&&parseFloat(t)<1&&console.warn(\"THREE.Color: Alpha component of \"+e+\" will be ignored.\")}let t;if(t=/^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec(e)){let e;const n=t[1],i=t[2];switch(n){case\"rgb\":case\"rgba\":if(e=/^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,handleAlpha(e[4]),this;if(e=/^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,handleAlpha(e[4]),this;break;case\"hsl\":case\"hsla\":if(e=/^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(i)){const t=parseFloat(e[1])/360,n=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return handleAlpha(e[4]),this.setHSL(t,n,i)}}}else if(t=/^\\#([A-Fa-f\\d]+)$/.exec(e)){const e=t[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=pi[e];return void 0!==t?this.setHex(t):console.warn(\"THREE.Color: Unknown color \"+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return(\"000000\"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn(\"THREE.Color: .getHSL() target is now required\"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),a=Math.min(t,n,i);let s,o;const l=(a+r)/2;if(a===r)s=0,o=0;else{const e=r-a;switch(o=l<=.5?e/(r+a):e/(2-r-a),r){case t:s=(n-i)/e+(n<i?6:0);break;case n:s=(i-t)/e+2;break;case i:s=(t-n)/e+4}s/=6}return e.h=s,e.s=o,e.l=l,e}getStyle(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"}offsetHSL(e,t,n){return this.getHSL(fi),fi.h+=e,fi.s+=t,fi.l+=n,this.setHSL(fi.h,fi.s,fi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(fi),e.getHSL(mi);const n=rn.lerp(fi.h,mi.h,t),i=rn.lerp(fi.s,mi.s,t),r=rn.lerp(fi.l,mi.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=pi,Color.prototype.isColor=!0,Color.prototype.r=1,Color.prototype.g=1,Color.prototype.b=1;class MeshBasicMaterial extends Material{constructor(e){super(),this.type=\"MeshBasicMaterial\",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;const gi=new Vector3,yi=new Vector2;function BufferAttribute(e,t,n){if(Array.isArray(e))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Kt,this.updateRange={offset:0,count:-1},this.version=0}function Int8BufferAttribute(e,t,n){BufferAttribute.call(this,new Int8Array(e),t,n)}function Uint8BufferAttribute(e,t,n){BufferAttribute.call(this,new Uint8Array(e),t,n)}function Uint8ClampedBufferAttribute(e,t,n){BufferAttribute.call(this,new Uint8ClampedArray(e),t,n)}function Int16BufferAttribute(e,t,n){BufferAttribute.call(this,new Int16Array(e),t,n)}function Uint16BufferAttribute(e,t,n){BufferAttribute.call(this,new Uint16Array(e),t,n)}function Int32BufferAttribute(e,t,n){BufferAttribute.call(this,new Int32Array(e),t,n)}function Uint32BufferAttribute(e,t,n){BufferAttribute.call(this,new Uint32Array(e),t,n)}function Float16BufferAttribute(e,t,n){BufferAttribute.call(this,new Uint16Array(e),t,n)}function Float32BufferAttribute(e,t,n){BufferAttribute.call(this,new Float32Array(e),t,n)}function Float64BufferAttribute(e,t,n){BufferAttribute.call(this,new Float64Array(e),t,n)}function arrayMax(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(BufferAttribute.prototype,\"needsUpdate\",{set:function(e){!0===e&&this.version++}}),Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",i),r=new Color),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",i),r=new Vector2),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",i),r=new Vector3),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",i),r=new Vector4),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix3(e),this.setXY(t,yi.x,yi.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix3(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)gi.x=this.getX(t),gi.y=this.getY(t),gi.z=this.getZ(t),gi.applyMatrix4(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)gi.x=this.getX(t),gi.y=this.getY(t),gi.z=this.getZ(t),gi.applyNormalMatrix(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)gi.x=this.getX(t),gi.y=this.getY(t),gi.z=this.getZ(t),gi.transformDirection(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float16BufferAttribute.prototype.constructor=Float16BufferAttribute,Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let vi=0;const bi=new Matrix4,xi=new Object3D,_i=new Vector3,wi=new Box3,Ti=new Box3,Mi=new Vector3;function BufferGeometry(){Object.defineProperty(this,\"id\",{value:vi++}),this.uuid=rn.generateUUID(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(arrayMax(e)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Matrix3).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return bi.makeRotationX(e),this.applyMatrix4(bi),this},rotateY:function(e){return bi.makeRotationY(e),this.applyMatrix4(bi),this},rotateZ:function(e){return bi.makeRotationZ(e),this.applyMatrix4(bi),this},translate:function(e,t,n){return bi.makeTranslation(e,t,n),this.applyMatrix4(bi),this},scale:function(e,t,n){return bi.makeScale(e,t,n),this.applyMatrix4(bi),this},lookAt:function(e){return xi.lookAt(e),xi.updateMatrix(),this.applyMatrix4(xi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_i).negate(),this.translate(_i.x,_i.y,_i.z),this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute(\"position\",new Float32BufferAttribute(t,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];wi.setFromBufferAttribute(n),this.morphTargetsRelative?(Mi.addVectors(this.boundingBox.min,wi.min),this.boundingBox.expandByPoint(Mi),Mi.addVectors(this.boundingBox.max,wi.max),this.boundingBox.expandByPoint(Mi)):(this.boundingBox.expandByPoint(wi.min),this.boundingBox.expandByPoint(wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingSphere.set(new Vector3,1/0);if(e){const n=this.boundingSphere.center;if(wi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ti.setFromBufferAttribute(n),this.morphTargetsRelative?(Mi.addVectors(wi.min,Ti.min),wi.expandByPoint(Mi),Mi.addVectors(wi.max,Ti.max),wi.expandByPoint(Mi)):(wi.expandByPoint(Ti.min),wi.expandByPoint(Ti.max))}wi.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Mi.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Mi));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Mi.fromBufferAttribute(a,t),s&&(_i.fromBufferAttribute(e,t),Mi.add(_i)),i=Math.max(i,n.distanceToSquared(Mi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error(\"THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)\");const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;void 0===t.tangent&&this.setAttribute(\"tangent\",new BufferAttribute(new Float32Array(4*s),4));const o=t.tangent.array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new Vector3,c[e]=new Vector3;const u=new Vector3,h=new Vector3,d=new Vector3,p=new Vector2,f=new Vector2,m=new Vector2,g=new Vector3,y=new Vector3;function handleTriangle(e,t,n){u.fromArray(i,3*e),h.fromArray(i,3*t),d.fromArray(i,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),y.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(let e=0,t=v.length;e<t;++e){const t=v[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)handleTriangle(n[e+0],n[e+1],n[e+2])}const b=new Vector3,x=new Vector3,_=new Vector3,w=new Vector3;function handleVertex(e){_.fromArray(r,3*e),w.copy(_);const t=l[e];b.copy(t),b.sub(_.multiplyScalar(_.dot(t))).normalize(),x.crossVectors(w,t);const n=x.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let e=0,t=v.length;e<t;++e){const t=v[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)handleVertex(n[e+0]),handleVertex(n[e+1]),handleVertex(n[e+2])}},computeVertexNormals:function(){const e=this.index,t=this.getAttribute(\"position\");if(void 0!==t){let n=this.getAttribute(\"normal\");if(void 0===n)n=new BufferAttribute(new Float32Array(3*t.count),3),this.setAttribute(\"normal\",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Vector3,r=new Vector3,a=new Vector3,s=new Vector3,o=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",e);void 0===t&&(t=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,a=e.attributes[i],s=a.array,o=a.itemSize*t,l=Math.min(s.length,r.length-o);for(let e=0,t=o;e<l;e++,t++)r[t]=s[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Mi.fromBufferAttribute(e,t),Mi.normalize(),e.setXYZ(t,Mi.x,Mi.y,Mi.z)},toNonIndexed:function(){function convertBufferAttribute(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let e=0,r=t.length;e<r;e++){s=t[e]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new BufferAttribute(a,i,r)}if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.\"),this;const e=new BufferGeometry,t=this.index.array,n=this.attributes;for(const i in n){const r=convertBufferAttribute(n[i],t);e.setAttribute(i,r)}const i=this.morphAttributes;for(const n in i){const r=[],a=i[n];for(let e=0,n=a.length;e<n;e++){const n=convertBufferAttribute(a[e],t);r.push(n)}e.morphAttributes[n]=r}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let t=0,n=r.length;t<n;t++){const n=r[t];e.addGroup(n.start,n.count,n.materialIndex)}return e},toJSON:function(){const e={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(e.uuid=this.uuid,e.type=this.type,\"\"!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t],r=i.toJSON(e.data);\"\"!==i.name&&(r.name=i.name),e.data.attributes[t]=r}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t],r=i.toJSON(e.data);\"\"!==i.name&&(r.name=i.name),a.push(r)}a.length>0&&(i[t]=a,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return(new BufferGeometry).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});const Si=new Matrix4,Ei=new Ray,Ai=new Sphere,Ci=new Vector3,Li=new Vector3,Pi=new Vector3,Ri=new Vector3,Di=new Vector3,Oi=new Vector3,ki=new Vector3,Ii=new Vector3,Ni=new Vector3,Bi=new Vector2,Vi=new Vector2,zi=new Vector2,Fi=new Vector3,Hi=new Vector3;function Mesh(e=new BufferGeometry,t=new MeshBasicMaterial){Object3D.call(this),this.type=\"Mesh\",this.geometry=e,this.material=t,this.updateMorphTargets()}function checkBufferGeometryIntersection(e,t,n,i,r,a,s,o,l,c,u,h){Ci.fromBufferAttribute(r,c),Li.fromBufferAttribute(r,u),Pi.fromBufferAttribute(r,h);const f=e.morphTargetInfluences;if(t.morphTargets&&a&&f){ki.set(0,0,0),Ii.set(0,0,0),Ni.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=f[e],n=a[e];0!==t&&(Ri.fromBufferAttribute(n,c),Di.fromBufferAttribute(n,u),Oi.fromBufferAttribute(n,h),s?(ki.addScaledVector(Ri,t),Ii.addScaledVector(Di,t),Ni.addScaledVector(Oi,t)):(ki.addScaledVector(Ri.sub(Ci),t),Ii.addScaledVector(Di.sub(Li),t),Ni.addScaledVector(Oi.sub(Pi),t)))}Ci.add(ki),Li.add(Ii),Pi.add(Ni)}e.isSkinnedMesh&&t.skinning&&(e.boneTransform(c,Ci),e.boneTransform(u,Li),e.boneTransform(h,Pi));const m=function checkIntersection(e,t,n,i,r,a,s,o){let l;if(null===(l=t.side===d?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,t.side!==p,o)))return null;Hi.copy(o),Hi.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Hi);return c<n.near||c>n.far?null:{distance:c,point:Hi.clone(),object:e}}(e,t,n,i,Ci,Li,Pi,Fi);if(m){o&&(Bi.fromBufferAttribute(o,c),Vi.fromBufferAttribute(o,u),zi.fromBufferAttribute(o,h),m.uv=Triangle.getUV(Fi,Ci,Li,Pi,Bi,Vi,zi,new Vector2)),l&&(Bi.fromBufferAttribute(l,c),Vi.fromBufferAttribute(l,u),zi.fromBufferAttribute(l,h),m.uv2=Triangle.getUV(Fi,Ci,Li,Pi,Bi,Vi,zi,new Vector2));const e={a:c,b:u,c:h,normal:new Vector3,materialIndex:0};Triangle.getNormal(Ci,Li,Pi,e.normal),m.face=e}return m}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error(\"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ai.copy(n.boundingSphere),Ai.applyMatrix4(r),!1===e.ray.intersectsSphere(Ai))return;if(Si.copy(r).invert(),Ei.copy(e.ray).applyMatrix4(Si),null!==n.boundingBox&&!1===Ei.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const r=n.index,s=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(p.start+p.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);(a=checkBufferGeometryIntersection(this,f,e,Ei,s,o,l,c,u,i,h,d))&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),p=r.getX(n+2);(a=checkBufferGeometryIntersection(this,i,e,Ei,s,o,l,c,u,h,d,p))&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==s)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],p=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3){(a=checkBufferGeometryIntersection(this,p,e,Ei,s,o,l,c,u,n,n+1,n+2))&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=r.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),r=Math.min(s.count,d.start+d.count);n<r;n+=3){(a=checkBufferGeometryIntersection(this,i,e,Ei,s,o,l,c,u,n,n+1,n+2))&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else n.isGeometry&&console.error(\"THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}});class BoxGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type=\"BoxGeometry\",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[];let h=0,d=0;function buildPlane(e,t,n,i,r,a,p,f,m,g,y){const v=a/m,b=p/g,x=a/2,_=p/2,w=f/2,T=m+1,M=g+1;let S=0,E=0;const A=new Vector3;for(let a=0;a<M;a++){const s=a*b-_;for(let o=0;o<T;o++){const h=o*v-x;A[e]=h*i,A[t]=s*r,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-a/g),S+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+T*e,i=h+t+T*(e+1),r=h+(t+1)+T*(e+1),a=h+(t+1)+T*e;o.push(n,i,a),o.push(i,r,a),E+=6}s.addGroup(d,E,y),d+=E,h+=S}buildPlane(\"z\",\"y\",\"x\",-1,-1,n,t,e,a=Math.floor(a),r,0),buildPlane(\"z\",\"y\",\"x\",1,-1,n,t,-e,a,r,1),buildPlane(\"x\",\"z\",\"y\",1,1,e,n,t,i,a,2),buildPlane(\"x\",\"z\",\"y\",1,-1,e,n,-t,i,a,3),buildPlane(\"x\",\"y\",\"z\",1,-1,e,t,n,i,r,4),buildPlane(\"x\",\"y\",\"z\",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute(\"position\",new Float32BufferAttribute(l,3)),this.setAttribute(\"normal\",new Float32BufferAttribute(c,3)),this.setAttribute(\"uv\",new Float32BufferAttribute(u,2))}}function cloneUniforms(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function mergeUniforms(e){const t={};for(let n=0;n<e.length;n++){const i=cloneUniforms(e[n]);for(const e in i)t[e]=i[e]}return t}const Ui={clone:cloneUniforms,merge:mergeUniforms};var ji=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",Gi=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";function ShaderMaterial(e){Material.call(this),this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.vertexShader=ji,this.fragmentShader=Gi,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(e))}function Camera(){Object3D.call(this),this.type=\"Camera\",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}function PerspectiveCamera(e=50,t=1,n=.1,i=2e3){Camera.call(this),this.type=\"PerspectiveCamera\",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},ShaderMaterial.prototype.toJSON=function(e){const t=Material.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:\"t\",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:\"c\",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:\"v2\",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:\"v3\",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:\"v4\",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:\"m3\",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:\"m4\",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn(\"THREE.Camera: .getWorldDirection() target is now required\"),e=new Vector3),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Object3D.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){Object3D.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e,t){return Camera.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*rn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*rn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*rn.RAD2DEG*Math.atan(Math.tan(.5*rn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*rn.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const Wi=90,qi=1;class CubeCamera extends Object3D{constructor(e,t,n){if(super(),this.type=\"CubeCamera\",!0!==n.isWebGLCubeRenderTarget)return void console.error(\"THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.\");this.renderTarget=n;const i=new PerspectiveCamera(Wi,qi,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Vector3(1,0,0)),this.add(i);const r=new PerspectiveCamera(Wi,qi,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Vector3(-1,0,0)),this.add(r);const a=new PerspectiveCamera(Wi,qi,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Vector3(0,1,0)),this.add(a);const s=new PerspectiveCamera(Wi,qi,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Vector3(0,-1,0)),this.add(s);const o=new PerspectiveCamera(Wi,qi,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Vector3(0,0,1)),this.add(o);const l=new PerspectiveCamera(Wi,qi,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Vector3(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,a,s,o,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class CubeTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:te,n,i,r,a,s=void 0!==s?s:Le,o,l,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}CubeTexture.prototype.isCubeTexture=!0;class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e,t,n){Number.isInteger(t)&&(console.warn(\"THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )\"),t=n),super(e,e,t),t=t||{},this.texture=new CubeTexture(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:pe,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Pe,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:\"\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",fragmentShader:\"\\n\\n\\t\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\t#include <common>\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\"},i=new BoxGeometry(5,5,5),r=new ShaderMaterial({name:\"CubemapFromEquirect\",uniforms:cloneUniforms(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:d,blending:f});r.uniforms.tEquirect.value=t;const a=new Mesh(i,r),s=t.minFilter;return t.minFilter===me&&(t.minFilter=pe),new CubeCamera(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;class DataTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l,c,u,h){super(null,a,s,o,l,c,i,r,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:ue,this.minFilter=void 0!==c?c:ue,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture.prototype.isDataTexture=!0;const Xi=new Sphere,Yi=new Vector3;class Frustum{constructor(e=new Plane,t=new Plane,n=new Plane,i=new Plane,r=new Plane,a=new Plane){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(s-i,u-o,f-h,v-m).normalize(),t[1].setComponents(s+i,u+o,f+h,v+m).normalize(),t[2].setComponents(s+r,u+l,f+d,v+g).normalize(),t[3].setComponents(s-r,u-l,f-d,v-g).normalize(),t[4].setComponents(s-a,u-c,f-p,v-y).normalize(),t[5].setComponents(s+a,u+c,f+p,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Xi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xi)}intersectsSprite(e){return Xi.center.set(0,0,0),Xi.radius=.7071067811865476,Xi.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xi)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Yi.x=i.normal.x>0?e.max.x:e.min.x,Yi.y=i.normal.y>0?e.max.y:e.min.y,Yi.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Yi)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let e=null,t=!1,n=null,i=null;function onAnimationFrame(t,r){n(t,r),i=e.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(onAnimationFrame),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function WebGLAttributes(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function get(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function remove(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function update(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=i.get(t);void 0===a?i.set(t,function createBuffer(t,i){const r=t.array,a=t.usage,s=e.createBuffer();e.bindBuffer(i,s),e.bufferData(i,r,a),t.onUploadCallback();let o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):r instanceof Uint16Array?t.isFloat16BufferAttribute?n?o=5131:console.warn(\"THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.\"):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(function updateBuffer(t,i,r){const a=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(a.buffer,t,r),a.version=t.version)}}}class PlaneGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,i=1){super(),this.type=\"PlaneGeometry\",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,h=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-a;for(let n=0;n<l;n++){const i=n*u-r;p.push(i,-t,0),f.push(0,0,1),m.push(n/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),a=t+1+l*e;d.push(n,i,a),d.push(i,r,a)}this.setIndex(d),this.setAttribute(\"position\",new Float32BufferAttribute(p,3)),this.setAttribute(\"normal\",new Float32BufferAttribute(f,3)),this.setAttribute(\"uv\",new Float32BufferAttribute(m,2))}}const $i={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor.xyz *= color.xyz;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\",common:\"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\\n\\t\\tvec2 f = fract( uv );\\n\\t\\tuv += 0.5 - f;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x += texelSize;\\n\\t\\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.y += texelSize;\\n\\t\\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x -= texelSize;\\n\\t\\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\treturn mix( tm, bm, f.y );\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value ) {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\",lights_pars_begin:\"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_toon_fragment:\"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\",lights_toon_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\",map_particle_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\",normal_fragment_begin:\"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\",normal_fragment_maps:\"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\",clearcoat_pars_fragment:\"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\",transmissionmap_fragment:\"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\",transmissionmap_pars_fragment:\"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\",uv_pars_fragment:\"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\",uv_vertex:\"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",cube_frag:\"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshtoon_frag:\"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshtoon_vert:\"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",normal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",normal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",shadow_vert:\"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\"},Zi={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}},Ji={basic:{uniforms:mergeUniforms([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.fog]),vertexShader:$i.meshbasic_vert,fragmentShader:$i.meshbasic_frag},lambert:{uniforms:mergeUniforms([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.fog,Zi.lights,{emissive:{value:new Color(0)}}]),vertexShader:$i.meshlambert_vert,fragmentShader:$i.meshlambert_frag},phong:{uniforms:mergeUniforms([Zi.common,Zi.specularmap,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.fog,Zi.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:$i.meshphong_vert,fragmentShader:$i.meshphong_frag},standard:{uniforms:mergeUniforms([Zi.common,Zi.envmap,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.roughnessmap,Zi.metalnessmap,Zi.fog,Zi.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$i.meshphysical_vert,fragmentShader:$i.meshphysical_frag},toon:{uniforms:mergeUniforms([Zi.common,Zi.aomap,Zi.lightmap,Zi.emissivemap,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.gradientmap,Zi.fog,Zi.lights,{emissive:{value:new Color(0)}}]),vertexShader:$i.meshtoon_vert,fragmentShader:$i.meshtoon_frag},matcap:{uniforms:mergeUniforms([Zi.common,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,Zi.fog,{matcap:{value:null}}]),vertexShader:$i.meshmatcap_vert,fragmentShader:$i.meshmatcap_frag},points:{uniforms:mergeUniforms([Zi.points,Zi.fog]),vertexShader:$i.points_vert,fragmentShader:$i.points_frag},dashed:{uniforms:mergeUniforms([Zi.common,Zi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$i.linedashed_vert,fragmentShader:$i.linedashed_frag},depth:{uniforms:mergeUniforms([Zi.common,Zi.displacementmap]),vertexShader:$i.depth_vert,fragmentShader:$i.depth_frag},normal:{uniforms:mergeUniforms([Zi.common,Zi.bumpmap,Zi.normalmap,Zi.displacementmap,{opacity:{value:1}}]),vertexShader:$i.normal_vert,fragmentShader:$i.normal_frag},sprite:{uniforms:mergeUniforms([Zi.sprite,Zi.fog]),vertexShader:$i.sprite_vert,fragmentShader:$i.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:$i.background_vert,fragmentShader:$i.background_frag},cube:{uniforms:mergeUniforms([Zi.envmap,{opacity:{value:1}}]),vertexShader:$i.cube_vert,fragmentShader:$i.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$i.equirect_vert,fragmentShader:$i.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([Zi.common,Zi.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$i.distanceRGBA_vert,fragmentShader:$i.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([Zi.lights,Zi.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:$i.shadow_vert,fragmentShader:$i.shadow_frag}};function WebGLBindingStates(e,t,n,i){const r=e.getParameter(34921),a=i.isWebGL2?null:t.get(\"OES_vertex_array_object\"),s=i.isWebGL2||null!==a,o={},l=createBindingState(null);let c=l;function bindVertexArrayObject(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function deleteVertexArrayObject(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function createBindingState(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function initAttributes(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function enableAttribute(e){enableAttributeAndDivisor(e,0)}function enableAttributeAndDivisor(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){(i.isWebGL2?e:t.get(\"ANGLE_instanced_arrays\"))[i.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](n,r),o[n]=r}}function disableUnusedAttributes(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function vertexAttribPointer(t,n,r,a,s,o){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,s,o):e.vertexAttribIPointer(t,n,r,s,o)}function reset(){resetDefaultState(),c!==l&&bindVertexArrayObject((c=l).object)}function resetDefaultState(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function setup(r,l,u,h,d){let p=!1;if(s){const t=function getBindingState(t,n,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];return void 0===u&&(u=createBindingState(function createVertexArrayObject(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}()),c[s]=u),u}(h,u,l);c!==t&&bindVertexArrayObject((c=t).object),(p=function needsUpdate(e,t){const n=c.attributes,i=e.attributes;let r=0;for(const e in i){const t=n[e],a=i[e];if(void 0===t)return!0;if(t.attribute!==a)return!0;if(t.data!==a.data)return!0;r++}return c.attributesNum!==r||c.index!==t}(h,d))&&function saveCache(e,t){const n={},i=e.attributes;let r=0;for(const e in i){const t=i[e],a={};a.attribute=t,t.data&&(a.data=t.data),n[e]=a,r++}c.attributes=n,c.attributesNum=r,c.index=t}(h,d)}else{const e=!0===l.wireframe;c.geometry===h.id&&c.program===u.id&&c.wireframe===e||(c.geometry=h.id,c.program=u.id,c.wireframe=e,p=!0)}!0===r.isInstancedMesh&&(p=!0),null!==d&&n.update(d,34963),p&&(function setupVertexAttributes(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get(\"ANGLE_instanced_arrays\"))return;initAttributes();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const i=c[t];if(i>=0){const a=l[t];if(void 0!==a){const t=a.normalized,r=a.itemSize,s=n.get(a);if(void 0===s)continue;const l=s.buffer,c=s.type,u=s.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,s=n.stride,h=a.offset;n&&n.isInstancedInterleavedBuffer?(enableAttributeAndDivisor(i,n.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)):enableAttribute(i),e.bindBuffer(34962,l),vertexAttribPointer(i,r,c,t,s*u,h*u)}else a.isInstancedBufferAttribute?(enableAttributeAndDivisor(i,a.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)):enableAttribute(i),e.bindBuffer(34962,l),vertexAttribPointer(i,r,c,t,0,0)}else if(\"instanceMatrix\"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const a=t.buffer,s=t.type;enableAttributeAndDivisor(i+0,1),enableAttributeAndDivisor(i+1,1),enableAttributeAndDivisor(i+2,1),enableAttributeAndDivisor(i+3,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i+0,4,s,!1,64,0),e.vertexAttribPointer(i+1,4,s,!1,64,16),e.vertexAttribPointer(i+2,4,s,!1,64,32),e.vertexAttribPointer(i+3,4,s,!1,64,48)}else if(\"instanceColor\"===t){const t=n.get(r.instanceColor);if(void 0===t)continue;const a=t.buffer,s=t.type;enableAttributeAndDivisor(i,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i,3,s,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}disableUnusedAttributes()}(r,l,u,h),null!==d&&e.bindBuffer(34963,n.get(d).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function dispose(){reset();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)deleteVertexArrayObject(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function releaseStatesOfGeometry(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)deleteVertexArrayObject(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function releaseStatesOfProgram(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)deleteVertexArrayObject(i[e].object),delete i[e];delete n[e.id]}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function numericalSort(e,t){return e[0]-t[0]}function absNumericalSort(e,t){return Math.abs(t[1])-Math.abs(e[1])}Ji.physical={uniforms:mergeUniforms([Ji.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:$i.meshphysical_vert,fragmentShader:$i.meshphysical_frag};class DataTexture2DArray extends Texture{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=ue,this.minFilter=ue,this.wrapR=le,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}DataTexture2DArray.prototype.isDataTexture2DArray=!0;class DataTexture3D extends Texture{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=ue,this.minFilter=ue,this.wrapR=le,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}DataTexture3D.prototype.isDataTexture3D=!0;const Ki=new Texture,Qi=new DataTexture2DArray,er=new DataTexture3D,tr=new CubeTexture,nr=[],ir=[],rr=new Float32Array(16),ar=new Float32Array(9),sr=new Float32Array(4);function flatten(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=nr[r];if(void 0===a&&(a=new Float32Array(r),nr[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function arraysEqual(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function copyArray(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function allocTexUnits(e,t){let n=ir[t];void 0===n&&(n=new Int32Array(t),ir[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function setValueV1f(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function setValueV2f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2fv(this.addr,t),copyArray(n,t)}}function setValueV3f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(arraysEqual(n,t))return;e.uniform3fv(this.addr,t),copyArray(n,t)}}function setValueV4f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4fv(this.addr,t),copyArray(n,t)}}function setValueM2(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;sr.set(i),e.uniformMatrix2fv(this.addr,!1,sr),copyArray(n,i)}}function setValueM3(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;ar.set(i),e.uniformMatrix3fv(this.addr,!1,ar),copyArray(n,i)}}function setValueM4(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;rr.set(i),e.uniformMatrix4fv(this.addr,!1,rr),copyArray(n,i)}}function setValueT1(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Ki,r)}function setValueT2DArray1(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Qi,r)}function setValueT3D1(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||er,r)}function setValueT6(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||tr,r)}function setValueV1i(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function setValueV2i(e,t){const n=this.cache;arraysEqual(n,t)||(e.uniform2iv(this.addr,t),copyArray(n,t))}function setValueV3i(e,t){const n=this.cache;arraysEqual(n,t)||(e.uniform3iv(this.addr,t),copyArray(n,t))}function setValueV4i(e,t){const n=this.cache;arraysEqual(n,t)||(e.uniform4iv(this.addr,t),copyArray(n,t))}function setValueV1ui(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function setValueV1fArray(e,t){e.uniform1fv(this.addr,t)}function setValueV1iArray(e,t){e.uniform1iv(this.addr,t)}function setValueV2iArray(e,t){e.uniform2iv(this.addr,t)}function setValueV3iArray(e,t){e.uniform3iv(this.addr,t)}function setValueV4iArray(e,t){e.uniform4iv(this.addr,t)}function setValueV2fArray(e,t){const n=flatten(t,this.size,2);e.uniform2fv(this.addr,n)}function setValueV3fArray(e,t){const n=flatten(t,this.size,3);e.uniform3fv(this.addr,n)}function setValueV4fArray(e,t){const n=flatten(t,this.size,4);e.uniform4fv(this.addr,n)}function setValueM2Array(e,t){const n=flatten(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function setValueM3Array(e,t){const n=flatten(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function setValueM4Array(e,t){const n=flatten(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function setValueT1Array(e,t,n){const i=t.length,r=allocTexUnits(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||Ki,r[e])}function setValueT6Array(e,t,n){const i=t.length,r=allocTexUnits(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||tr,r[e])}function SingleUniform(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function getSingularSetter(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(t.type)}function PureArrayUniform(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function getPureArraySetter(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}(t.type)}function StructuredUniform(e){this.id=e,this.seq=[],this.map={}}PureArrayUniform.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),copyArray(t,e)},StructuredUniform.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}};const or=/(\\w+)(\\])?(\\[|\\.)?/g;function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,n){const i=e.name,r=i.length;for(or.lastIndex=0;;){const a=or.exec(i),s=or.lastIndex;let o=a[1];const l=\"]\"===a[2],c=a[3];if(l&&(o|=0),void 0===c||\"[\"===c&&s+2===r){addUniform(n,void 0===c?new SingleUniform(o,e,t):new PureArrayUniform(o,e,t));break}{let e=n.map[o];void 0===e&&addUniform(n,e=new StructuredUniform(o)),n=e}}}function WebGLUniforms(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);parseUniform(n,e.getUniformLocation(t,n.name),this)}}function WebGLShader(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}WebGLUniforms.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},WebGLUniforms.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},WebGLUniforms.upload=function(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},WebGLUniforms.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let lr=0;function getEncodingComponents(e){switch(e){case Vt:return[\"Linear\",\"( value )\"];case zt:return[\"sRGB\",\"( value )\"];case Ht:return[\"RGBE\",\"( value )\"];case jt:return[\"RGBM\",\"( value, 7.0 )\"];case Gt:return[\"RGBM\",\"( value, 16.0 )\"];case Wt:return[\"RGBD\",\"( value, 256.0 )\"];case Ft:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];case Ut:return[\"LogLuv\",\"( value )\"];default:return console.warn(\"THREE.WebGLProgram: Unsupported encoding:\",e),[\"Linear\",\"( value )\"]}}function getShaderErrors(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&\"\"===r?\"\":\"THREE.WebGLShader: gl.getShaderInfoLog() \"+n+\"\\n\"+r+function addLineNumbers(e){const t=e.split(\"\\n\");for(let e=0;e<t.length;e++)t[e]=e+1+\": \"+t[e];return t.join(\"\\n\")}(e.getShaderSource(t))}function getTexelDecodingFunction(e,t){const n=getEncodingComponents(t);return\"vec4 \"+e+\"( vec4 value ) { return \"+n[0]+\"ToLinear\"+n[1]+\"; }\"}function filterEmptyLine(e){return\"\"!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const cr=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function resolveIncludes(e){return e.replace(cr,includeReplacer)}function includeReplacer(e,t){const n=$i[t];if(void 0===n)throw new Error(\"Can not resolve #include <\"+t+\">\");return resolveIncludes(n)}const ur=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,hr=/#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(hr,loopReplacer).replace(ur,deprecatedLoopReplacer)}function deprecatedLoopReplacer(e,t,n,i){return console.warn(\"WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.\"),loopReplacer(e,t,n,i)}function loopReplacer(e,t,n,i){let r=\"\";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\\[\\s*i\\s*\\]/g,\"[ \"+e+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function generatePrecision(e){let t=\"precision \"+e.precision+\" float;\\nprecision \"+e.precision+\" int;\";return\"highp\"===e.precision?t+=\"\\n#define HIGH_PRECISION\":\"mediump\"===e.precision?t+=\"\\n#define MEDIUM_PRECISION\":\"lowp\"===e.precision&&(t+=\"\\n#define LOW_PRECISION\"),t}function WebGLProgram(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const h=function generateShadowMapTypeDefine(e){let t=\"SHADOWMAP_TYPE_BASIC\";return e.shadowMapType===l?t=\"SHADOWMAP_TYPE_PCF\":e.shadowMapType===c?t=\"SHADOWMAP_TYPE_PCF_SOFT\":e.shadowMapType===u&&(t=\"SHADOWMAP_TYPE_VSM\"),t}(n),d=function generateEnvMapTypeDefine(e){let t=\"ENVMAP_TYPE_CUBE\";if(e.envMap)switch(e.envMapMode){case te:case ne:t=\"ENVMAP_TYPE_CUBE\";break;case ae:case se:t=\"ENVMAP_TYPE_CUBE_UV\"}return t}(n),p=function generateEnvMapModeDefine(e){let t=\"ENVMAP_MODE_REFLECTION\";if(e.envMap)switch(e.envMapMode){case ne:case se:t=\"ENVMAP_MODE_REFRACTION\"}return t}(n),f=function generateEnvMapBlendingDefine(e){let t=\"ENVMAP_BLENDING_NONE\";if(e.envMap)switch(e.combine){case W:t=\"ENVMAP_BLENDING_MULTIPLY\";break;case q:t=\"ENVMAP_BLENDING_MIX\";break;case X:t=\"ENVMAP_BLENDING_ADD\"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?\"\":function generateExtensions(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||\"physical\"===e.shaderID?\"#extension GL_OES_standard_derivatives : enable\":\"\",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?\"#extension GL_EXT_frag_depth : enable\":\"\",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?\"#extension GL_EXT_draw_buffers : require\":\"\",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(filterEmptyLine).join(\"\\n\")}(n),y=function generateDefines(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push(\"#define \"+n+\" \"+i)}return t.join(\"\\n\")}(a),v=r.createProgram();let b,x,_=n.glslVersion?\"#version \"+n.glslVersion+\"\\n\":\"\";n.isRawShaderMaterial?((b=[y].filter(filterEmptyLine).join(\"\\n\")).length>0&&(b+=\"\\n\"),(x=[g,y].filter(filterEmptyLine).join(\"\\n\")).length>0&&(x+=\"\\n\")):(b=[generatePrecision(n),\"#define SHADER_NAME \"+n.shaderName,y,n.instancing?\"#define USE_INSTANCING\":\"\",n.instancingColor?\"#define USE_INSTANCING_COLOR\":\"\",n.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+m,\"#define MAX_BONES \"+n.maxBones,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+p:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.displacementMap&&n.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors?\"#define USE_COLOR\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.skinning?\"#define USE_SKINNING\":\"\",n.useVertexTexture?\"#define BONE_TEXTURE\":\"\",n.morphTargets?\"#define USE_MORPHTARGETS\":\"\",n.morphNormals&&!1===n.flatShading?\"#define USE_MORPHNORMALS\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+h:\"\",n.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\"\\tattribute mat4 instanceMatrix;\",\"#endif\",\"#ifdef USE_INSTANCING_COLOR\",\"\\tattribute vec3 instanceColor;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(filterEmptyLine).join(\"\\n\"),x=[g,generatePrecision(n),\"#define SHADER_NAME \"+n.shaderName,y,n.alphaTest?\"#define ALPHATEST \"+n.alphaTest+(n.alphaTest%1?\"\":\".0\"):\"\",\"#define GAMMA_FACTOR \"+m,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.matcap?\"#define USE_MATCAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+d:\"\",n.envMap?\"#define \"+p:\"\",n.envMap?\"#define \"+f:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.sheen?\"#define USE_SHEEN\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors||n.instancingColor?\"#define USE_COLOR\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.gradientMap?\"#define USE_GRADIENTMAP\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+h:\"\",n.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",n.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",n.toneMapping!==Y?\"#define TONE_MAPPING\":\"\",n.toneMapping!==Y?$i.tonemapping_pars_fragment:\"\",n.toneMapping!==Y?function getToneMappingFunction(e,t){let n;switch(t){case $:n=\"Linear\";break;case Z:n=\"Reinhard\";break;case J:n=\"OptimizedCineon\";break;case K:n=\"ACESFilmic\";break;case Q:n=\"Custom\";break;default:console.warn(\"THREE.WebGLProgram: Unsupported toneMapping:\",t),n=\"Linear\"}return\"vec3 \"+e+\"( vec3 color ) { return \"+n+\"ToneMapping( color ); }\"}(\"toneMapping\",n.toneMapping):\"\",n.dithering?\"#define DITHERING\":\"\",$i.encodings_pars_fragment,n.map?getTexelDecodingFunction(\"mapTexelToLinear\",n.mapEncoding):\"\",n.matcap?getTexelDecodingFunction(\"matcapTexelToLinear\",n.matcapEncoding):\"\",n.envMap?getTexelDecodingFunction(\"envMapTexelToLinear\",n.envMapEncoding):\"\",n.emissiveMap?getTexelDecodingFunction(\"emissiveMapTexelToLinear\",n.emissiveMapEncoding):\"\",n.lightMap?getTexelDecodingFunction(\"lightMapTexelToLinear\",n.lightMapEncoding):\"\",function getTexelEncodingFunction(e,t){const n=getEncodingComponents(t);return\"vec4 \"+e+\"( vec4 value ) { return LinearTo\"+n[0]+n[1]+\"; }\"}(\"linearToOutputTexel\",n.outputEncoding),n.depthPacking?\"#define DEPTH_PACKING \"+n.depthPacking:\"\",\"\\n\"].filter(filterEmptyLine).join(\"\\n\")),s=replaceClippingPlaneNums(s=replaceLightNums(s=resolveIncludes(s),n),n),o=replaceClippingPlaneNums(o=replaceLightNums(o=resolveIncludes(o),n),n),s=unrollLoops(s),o=unrollLoops(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_=\"#version 300 es\\n\",b=[\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+b,x=[\"#define varying in\",n.glslVersion===en?\"\":\"out highp vec4 pc_fragColor;\",n.glslVersion===en?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+x);const w=_+x+o,T=WebGLShader(r,35633,_+b+s),M=WebGLShader(r,35632,w);if(r.attachShader(v,T),r.attachShader(v,M),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(v,0,\"position\"),r.linkProgram(v),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(v).trim(),t=r.getShaderInfoLog(T).trim(),n=r.getShaderInfoLog(M).trim();let i=!0,a=!0;if(!1===r.getProgramParameter(v,35714)){i=!1;const t=getShaderErrors(r,T,\"vertex\"),n=getShaderErrors(r,M,\"fragment\");console.error(\"THREE.WebGLProgram: shader error: \",r.getError(),\"35715\",r.getProgramParameter(v,35715),\"gl.getProgramInfoLog\",e,t,n)}else\"\"!==e?console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",e):\"\"!==t&&\"\"!==n||(a=!1);a&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:x}})}let S,E;return r.deleteShader(T),r.deleteShader(M),this.getUniforms=function(){return void 0===S&&(S=new WebGLUniforms(r,v)),S},this.getAttributes=function(){return void 0===E&&(E=function fetchAttributeLocations(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,v)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=lr++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=M,this}function WebGLPrograms(e,t,n,i,r,a){const s=[],o=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"},g=[\"precision\",\"isWebGL2\",\"supportsVertexTextures\",\"outputEncoding\",\"instancing\",\"instancingColor\",\"map\",\"mapEncoding\",\"matcap\",\"matcapEncoding\",\"envMap\",\"envMapMode\",\"envMapEncoding\",\"envMapCubeUV\",\"lightMap\",\"lightMapEncoding\",\"aoMap\",\"emissiveMap\",\"emissiveMapEncoding\",\"bumpMap\",\"normalMap\",\"objectSpaceNormalMap\",\"tangentSpaceNormalMap\",\"clearcoatMap\",\"clearcoatRoughnessMap\",\"clearcoatNormalMap\",\"displacementMap\",\"specularMap\",\"roughnessMap\",\"metalnessMap\",\"gradientMap\",\"alphaMap\",\"combine\",\"vertexColors\",\"vertexTangents\",\"vertexUvs\",\"uvsVertexOnly\",\"fog\",\"useFog\",\"fogExp2\",\"flatShading\",\"sizeAttenuation\",\"logarithmicDepthBuffer\",\"skinning\",\"maxBones\",\"useVertexTexture\",\"morphTargets\",\"morphNormals\",\"maxMorphTargets\",\"maxMorphNormals\",\"premultipliedAlpha\",\"numDirLights\",\"numPointLights\",\"numSpotLights\",\"numHemiLights\",\"numRectAreaLights\",\"numDirLightShadows\",\"numPointLightShadows\",\"numSpotLightShadows\",\"shadowMapEnabled\",\"shadowMapType\",\"toneMapping\",\"physicallyCorrectLights\",\"alphaTest\",\"doubleSided\",\"flipSided\",\"numClippingPlanes\",\"numClipIntersection\",\"depthPacking\",\"dithering\",\"sheen\",\"transmissionMap\"];function getTextureEncodingFromMap(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),t=e.texture.encoding):t=Vt,t}return{getParameters:function getParameters(r,s,g,y,v){const b=y.fog,x=r.isMeshStandardMaterial?y.environment:null,_=t.get(r.envMap||x),w=m[r.type],T=v.isSkinnedMesh?function getMaxBones(e){const t=e.skeleton.bones;if(c)return 1024;{const e=u,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+t.length+\" bones. This GPU supports \"+i+\".\"),0):i}}(v):0;let M,S;if(null!==r.precision&&(f=i.getMaxPrecision(r.precision))!==r.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",r.precision,\"not supported, using\",f,\"instead.\"),w){const e=Ji[w];M=e.vertexShader,S=e.fragmentShader}else M=r.vertexShader,S=r.fragmentShader;const E=e.getRenderTarget();return{isWebGL2:o,shaderID:w,shaderName:r.type,vertexShader:M,fragmentShader:S,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:f,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==E?getTextureEncodingFromMap(E.texture):e.outputEncoding,map:!!r.map,mapEncoding:getTextureEncodingFromMap(r.map),matcap:!!r.matcap,matcapEncoding:getTextureEncodingFromMap(r.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:getTextureEncodingFromMap(_),envMapCubeUV:!!_&&(_.mapping===ae||_.mapping===se),lightMap:!!r.lightMap,lightMapEncoding:getTextureEncodingFromMap(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===$t,tangentSpaceNormalMap:r.normalMapType===Yt,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!b,useFog:r.fog,fogExp2:b&&b.isFogExp2,flatShading:!!r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&T>0,maxBones:T,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&g.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:Y,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===p,flipSided:r.side===d,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||n.has(\"EXT_frag_depth\"),rendererExtensionDrawBuffers:o||n.has(\"WEBGL_draw_buffers\"),rendererExtensionShaderTextureLod:o||n.has(\"EXT_shader_texture_lod\"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function getProgramCacheKey(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<g.length;e++)n.push(t[g[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function getUniforms(e){const t=m[e.type];let n;if(t){const e=Ji[t];n=Ui.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function acquireProgram(t,n){let i;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===n){++(i=t).usedTimes;break}}return void 0===i&&(i=new WebGLProgram(e,n,t,r),s.push(i)),i},releaseProgram:function releaseProgram(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function painterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(e){const t=[];let n=0;const i=[],r=[],a={id:-1};function getNextRenderItem(i,r,s,o,l,c){let u=t[n];const h=e.get(s);return void 0===u?(u={id:i.id,object:i,geometry:r,material:s,program:h.program||a,groupOrder:o,renderOrder:i.renderOrder,z:l,group:c},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=s,u.program=h.program||a,u.groupOrder=o,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function init(){n=0,i.length=0,r.length=0},push:function push(e,t,n,a,s,o){const l=getNextRenderItem(e,t,n,a,s,o);(!0===n.transparent?r:i).push(l)},unshift:function unshift(e,t,n,a,s,o){const l=getNextRenderItem(e,t,n,a,s,o);(!0===n.transparent?r:i).unshift(l)},finish:function finish(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function sort(e,t){i.length>1&&i.sort(e||painterSortStable),r.length>1&&r.sort(t||reversePainterSortStable)}}}let dr=0;function shadowCastingLightsFirst(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function WebGLLights(e,t){const n=new function UniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case\"DirectionalLight\":n={direction:new Vector3,color:new Color};break;case\"SpotLight\":n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":n={position:new Vector3,color:new Color,distance:0,decay:0};break;case\"HemisphereLight\":n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case\"RectAreaLight\":n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return e[t.id]=n,n}}},i=function ShadowUniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case\"DirectionalLight\":case\"SpotLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case\"PointLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new Vector3);const a=new Vector3,s=new Matrix4,o=new Matrix4;return{setup:function setup(a){let s=0,o=0,l=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0;a.sort(shadowCastingLightsFirst);for(let e=0,t=a.length;e<t;e++){const t=a[e],y=t.color,v=t.intensity,b=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=y.r*v,o+=y.g*v,l+=y.b*v;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],v);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=x,r.directionalShadowMatrix[c]=t.shadow.matrix,f++}r.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(y).multiplyScalar(v),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[h]=n,r.spotShadowMap[h]=x,r.spotShadowMatrix[h]=t.shadow.matrix,g++}r.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(y).multiplyScalar(v),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=x,r.pointShadowMatrix[u]=t.shadow.matrix,m++}r.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(v),e.groundColor.copy(t.groundColor).multiplyScalar(v),r.hemi[p]=e,p++}}d>0&&(t.isWebGL2?(r.rectAreaLTC1=Zi.LTC_FLOAT_1,r.rectAreaLTC2=Zi.LTC_FLOAT_2):!0===e.has(\"OES_texture_float_linear\")?(r.rectAreaLTC1=Zi.LTC_FLOAT_1,r.rectAreaLTC2=Zi.LTC_FLOAT_2):!0===e.has(\"OES_texture_half_float_linear\")?(r.rectAreaLTC1=Zi.LTC_HALF_1,r.rectAreaLTC2=Zi.LTC_HALF_2):console.error(\"THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.\")),r.ambient[0]=s,r.ambient[1]=o,r.ambient[2]=l;const y=r.hash;y.directionalLength===c&&y.pointLength===u&&y.spotLength===h&&y.rectAreaLength===d&&y.hemiLength===p&&y.numDirectionalShadows===f&&y.numPointShadows===m&&y.numSpotShadows===g||(r.directional.length=c,r.spot.length=h,r.rectArea.length=d,r.point.length=u,r.hemi.length=p,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=m,r.spotShadowMatrix.length=g,y.directionalLength=c,y.pointLength=u,y.spotLength=h,y.rectAreaLength=d,y.hemiLength=p,y.numDirectionalShadows=f,y.numPointShadows=m,y.numSpotShadows=g,r.version=dr++)},setupView:function setupView(e,t){let n=0,i=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),i++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:r}}function WebGLRenderState(e,t){const n=new WebGLLights(e,t),i=[],r=[];return{init:function init(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function setupLights(){n.setup(i)},setupLightsView:function setupLightsView(e){n.setupView(i,e)},pushLight:function pushLight(e){i.push(e)},pushShadow:function pushShadow(e){r.push(e)}}}class MeshDepthMaterial extends Material{constructor(e){super(),this.type=\"MeshDepthMaterial\",this.depthPacking=qt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;class MeshDistanceMaterial extends Material{constructor(e){super(),this.type=\"MeshDistanceMaterial\",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;var pr=\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean * HALF_SAMPLE_RATE;\\n\\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\",fr=\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";function WebGLShadowMap(e,t,n){let i=new Frustum;const r=new Vector2,a=new Vector2,s=new Vector4,o=[],c=[],m={},g={0:d,1:h,2:p},y=new ShaderMaterial({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:fr,fragmentShader:pr}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const b=new BufferGeometry;b.setAttribute(\"position\",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Mesh(b,y),_=this;function VSMPass(n,i){const r=t.update(x);y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,y,x,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,v,x,null)}function getDepthMaterialVariant(e,t,n){const i=e<<0|t<<1|n<<2;let r=o[i];return void 0===r&&(r=new MeshDepthMaterial({depthPacking:Xt,morphTargets:e,skinning:t}),o[i]=r),r}function getDistanceMaterialVariant(e,t,n){const i=e<<0|t<<1|n<<2;let r=c[i];return void 0===r&&(r=new MeshDistanceMaterial({morphTargets:e,skinning:t}),c[i]=r),r}function getDepthMaterial(t,n,i,r,a,s,o){let l=null,c=getDepthMaterialVariant,h=t.customDepthMaterial;if(!0===r.isPointLight&&(c=getDistanceMaterialVariant,h=t.customDistanceMaterial),void 0===h){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",t)),l=c(e,r,!0===t.isInstancedMesh)}else l=h;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=l.uuid,t=i.uuid;let n=m[e];void 0===n&&(n={},m[e]=n);let r=n[t];void 0===r&&(r=l.clone(),n[t]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=o===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:g[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=s),l}function renderObject(n,r,a,s,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===u)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=getDepthMaterial(n,i,u,s,a.near,a.far,o);e.renderBufferDirect(a,null,i,t,n,c)}}}else if(r.visible){const t=getDepthMaterial(n,i,r,s,a.near,a.far,o);e.renderBufferDirect(a,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)renderObject(l[e],r,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=l,this.render=function(t,o,l){if(!1===_.enabled)return;if(!1===_.autoUpdate&&!1===_.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.state;p.setBlending(f),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let c=0,h=t.length;c<h;c++){const h=t[c],d=h.shadow;if(void 0===d){console.warn(\"THREE.WebGLShadowMap:\",h,\"has no shadow.\");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;r.copy(d.mapSize);const f=d.getFrameExtents();if(r.multiply(f),a.copy(d.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(a.x=Math.floor(n/f.x),r.x=a.x*f.x,d.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/f.y),r.y=a.y*f.y,d.mapSize.y=a.y)),null===d.map&&!d.isPointLightShadow&&this.type===u){const e={minFilter:pe,magFilter:pe,format:Pe};d.map=new WebGLRenderTarget(r.x,r.y,e),d.map.texture.name=h.name+\".shadowMap\",d.mapPass=new WebGLRenderTarget(r.x,r.y,e),d.camera.updateProjectionMatrix()}if(null===d.map){const e={minFilter:ue,magFilter:ue,format:Pe};d.map=new WebGLRenderTarget(r.x,r.y,e),d.map.texture.name=h.name+\".shadowMap\",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const m=d.getViewportCount();for(let e=0;e<m;e++){const t=d.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),p.viewport(s),d.updateMatrices(h,e),i=d.getFrustum(),renderObject(o,l,d.camera,h,this.type)}d.isPointLightShadow||this.type!==u||VSMPass(d,l),d.needsUpdate=!1}_.needsUpdate=!1,e.setRenderTarget(c,h,d)}}function WebGLTextures(e,t,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f=\"undefined\"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext(\"2d\")}catch(e){}function createCanvas(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")}function resizeImage(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if(\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?rn.floorPowerOfTwo:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===p&&(p=createCanvas(a,s));const o=n?createCanvas(a,s):p;return o.width=a,o.height=s,o.getContext(\"2d\").drawImage(e,0,0,a,s),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+e.width+\"x\"+e.height+\") to (\"+a+\"x\"+s+\").\"),o}return\"data\"in e&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+e.width+\"x\"+e.height+\").\"),e}return e}function isPowerOfTwo(e){return rn.isPowerOfTwo(e.width)&&rn.isPowerOfTwo(e.height)}function textureNeedsGenerateMipmaps(e,t){return e.generateMipmaps&&t&&e.minFilter!==ue&&e.minFilter!==pe}function generateMipmap(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log2(Math.max(r,a))}function getInternalFormat(n,i,r){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn(\"THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '\"+n+\"'\")}let a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get(\"EXT_color_buffer_float\"),a}function filterFallback(e){return e===ue||e===he||e===de?9728:9729}function onTextureDispose(t){const n=t.target;n.removeEventListener(\"dispose\",onTextureDispose),function deallocateTexture(t){const n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&d.delete(n),s.memory.textures--}function onRenderTargetDispose(t){const n=t.target;n.removeEventListener(\"dispose\",onRenderTargetDispose),function deallocateRenderTarget(t){const n=t.texture,r=i.get(t),a=i.get(n);if(!t)return;void 0!==a.__webglTexture&&e.deleteTexture(a.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);i.remove(n),i.remove(t)}(n),s.memory.textures--}let m=0;function setTexture2D(e,t){const r=i.get(e);if(e.isVideoTexture&&function updateVideoTexture(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else{if(!1!==n.complete)return void uploadTexture(r,e,t);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function setTextureCube(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?function uploadCubeTexture(t,i,r){if(6!==i.image.length)return;initTexture(t,i),n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=s||l?l?i.image[e].image:i.image[e]:resizeImage(i.image[e],!1,!0,c);const h=u[0],d=isPowerOfTwo(h)||o,p=a.convert(i.format),f=a.convert(i.type),m=getInternalFormat(i.internalFormat,p,f);let g;if(setTextureParameters(34067,i,d),s){for(let e=0;e<6;e++){g=u[e].mipmaps;for(let t=0;t<g.length;t++){const r=g[t];i.format!==Pe&&i.format!==Le?null!==p?n.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):n.texImage2D(34069+e,t,m,r.width,r.height,0,p,f,r.data)}}t.__maxMipLevel=g.length-1}else{g=i.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<g.length;t++){const i=g[t],r=i.image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<g.length;t++){const i=g[t];n.texImage2D(34069+e,t+1,m,p,f,i.image[e])}}t.__maxMipLevel=g.length}textureNeedsGenerateMipmaps(i,d)&&generateMipmap(34067,i,h.width,h.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(s,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}const g={[oe]:10497,[le]:33071,[ce]:33648},y={[ue]:9728,[he]:9984,[de]:9986,[pe]:9729,[fe]:9985,[me]:9987};function setTextureParameters(n,a,s){if(s?(e.texParameteri(n,10242,g[a.wrapS]),e.texParameteri(n,10243,g[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,g[a.wrapR]),e.texParameteri(n,10240,y[a.magFilter]),e.texParameteri(n,10241,y[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===le&&a.wrapT===le||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),e.texParameteri(n,10240,filterFallback(a.magFilter)),e.texParameteri(n,10241,filterFallback(a.minFilter)),a.minFilter!==ue&&a.minFilter!==pe&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\")),!0===t.has(\"EXT_texture_filter_anisotropic\")){const s=t.get(\"EXT_texture_filter_anisotropic\");if(a.type===we&&!1===t.has(\"OES_texture_float_linear\"))return;if(!1===o&&a.type===Te&&!1===t.has(\"OES_texture_half_float_linear\"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function initTexture(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener(\"dispose\",onTextureDispose),t.__webglTexture=e.createTexture(),s.memory.textures++)}function uploadTexture(t,i,r){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),initTexture(t,i),n.activeTexture(33984+r),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const l=function textureNeedsPowerOfTwo(e){return!o&&(e.wrapS!==le||e.wrapT!==le||e.minFilter!==ue&&e.minFilter!==pe)}(i)&&!1===isPowerOfTwo(i.image),c=resizeImage(i.image,l,!1,u),h=isPowerOfTwo(c)||o,d=a.convert(i.format);let p,f=a.convert(i.type),m=getInternalFormat(i.internalFormat,d,f);setTextureParameters(s,i,h);const g=i.mipmaps;if(i.isDepthTexture)m=6402,o?m=i.type===we?36012:i.type===_e?33190:i.type===Ae?35056:33189:i.type===we&&console.error(\"WebGLRenderer: Floating point depth texture requires WebGL2.\"),i.format===Oe&&6402===m&&i.type!==be&&i.type!==_e&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),i.type=be,f=a.convert(i.type)),i.format===ke&&6402===m&&(m=34041,i.type!==Ae&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),i.type=Ae,f=a.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(i.isDataTexture)if(g.length>0&&h){for(let e=0,t=g.length;e<t;e++)p=g[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);i.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=g.length;e<t;e++)p=g[e],i.format!==Pe&&i.format!==Le?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=g.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(g.length>0&&h){for(let e=0,t=g.length;e<t;e++)p=g[e],n.texImage2D(3553,e,m,d,f,p);i.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;textureNeedsGenerateMipmaps(i,h)&&generateMipmap(s,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function setupFrameBufferTexture(t,r,s,o){const l=r.texture,c=a.convert(l.format),u=a.convert(l.type),h=getInternalFormat(l.internalFormat,c,u);32879===o||35866===o?n.texImage3D(o,0,h,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(o,0,h,r.width,r.height,0,c,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,o,i.get(l).__webglTexture,0),e.bindFramebuffer(36160,null)}function setupRenderBufferStorage(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===we?r=36012:t.type===_e&&(r=33190));const i=getRenderTargetSamples(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=getRenderTargetSamples(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=n.texture,r=a.convert(t.format),s=a.convert(t.type),o=getInternalFormat(t.internalFormat,r,s);if(i){const t=getRenderTargetSamples(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function setupDepthRenderbuffer(t){const n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error(\"target.depthTexture not supported in Cube render targets\");!function setupDepthTexture(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),setTexture2D(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Oe)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==ke)throw new Error(\"Unknown depthTexture format\");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function getRenderTargetSamples(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let v=!1,b=!1;this.allocateTextureUnit=function allocateTextureUnit(){const e=m;return e>=l&&console.warn(\"THREE.WebGLTextures: Trying to use \"+e+\" texture units while this GPU supports only \"+l),m+=1,e},this.resetTextureUnits=function resetTextureUnits(){m=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function setTexture2DArray(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?uploadTexture(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function setTexture3D(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?uploadTexture(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=setTextureCube,this.setupRenderTarget=function setupRenderTarget(t){const r=t.texture,l=i.get(t),c=i.get(r);t.addEventListener(\"dispose\",onRenderTargetDispose),c.__webglTexture=e.createTexture(),s.memory.textures++;const u=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultisampleRenderTarget,d=r.isDataTexture3D||r.isDataTexture2DArray,p=isPowerOfTwo(t)||o;if(!o||r.format!==Le||r.type!==we&&r.type!==Te||(r.format=Pe,console.warn(\"THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.\")),u){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),h)if(o){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const n=a.convert(r.format),i=a.convert(r.type),s=getInternalFormat(r.internalFormat,n,i),o=getRenderTargetSamples(t);e.renderbufferStorageMultisample(36161,o,s,t.width,t.height),e.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),setupRenderBufferStorage(l.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\");if(u){n.bindTexture(34067,c.__webglTexture),setTextureParameters(34067,r,p);for(let e=0;e<6;e++)setupFrameBufferTexture(l.__webglFramebuffer[e],t,36064,34069+e);textureNeedsGenerateMipmaps(r,p)&&generateMipmap(34067,r,t.width,t.height),n.bindTexture(34067,null)}else{let e=3553;d&&(o?e=r.isDataTexture3D?32879:35866:console.warn(\"THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.\")),n.bindTexture(e,c.__webglTexture),setTextureParameters(e,r,p),setupFrameBufferTexture(l.__webglFramebuffer,t,36064,e),textureNeedsGenerateMipmaps(r,p)&&generateMipmap(3553,r,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&setupDepthRenderbuffer(t)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(e){const t=e.texture;if(textureNeedsGenerateMipmaps(t,isPowerOfTwo(e)||o)){const r=e.isWebGLCubeRenderTarget?34067:3553,a=i.get(t).__webglTexture;n.bindTexture(r,a),generateMipmap(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function updateMultisampleRenderTarget(t){if(t.isWebGLMultisampleRenderTarget)if(o){const n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const r=t.width,a=t.height;let s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,r,a,0,0,r,a,s,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\")},this.safeSetTexture2D=function safeSetTexture2D(e,t){e&&e.isWebGLRenderTarget&&(!1===v&&(console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\"),v=!0),e=e.texture),setTexture2D(e,t)},this.safeSetTextureCube=function safeSetTextureCube(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===b&&(console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),b=!0),e=e.texture),setTextureCube(e,t)}}function ArrayCamera(e=[]){PerspectiveCamera.call(this),this.cameras=e}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});class Group extends Object3D{constructor(){super(),this.type=\"Group\"}}function WebXRController(){this._targetRay=null,this._grip=null,this._hand=null}function WebXRManager(e,t){const n=this;let i=null,r=1,a=null,s=\"local-floor\",o=null;const l=[],c=new Map,u=new PerspectiveCamera;u.layers.enable(1),u.viewport=new Vector4;const h=new PerspectiveCamera;h.layers.enable(2),h.viewport=new Vector4;const d=[u,h],p=new ArrayCamera;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function onSessionEvent(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function onSessionEnd(){c.forEach(function(e,t){e.disconnect(t)}),c.clear(),f=null,m=null,e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),b.stop(),n.isPresenting=!1,n.dispatchEvent({type:\"sessionend\"})}function onInputSourcesChange(e){const t=i.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=c.get(n);i&&(i.dispatchEvent({type:\"disconnected\",data:n}),c.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=c.get(n);i&&i.dispatchEvent({type:\"connected\",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new WebXRController,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new WebXRController,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new WebXRController,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change framebuffer scale while presenting.\")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change reference space type while presenting.\")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(e){if(null!==(i=e)){i.addEventListener(\"select\",onSessionEvent),i.addEventListener(\"selectstart\",onSessionEvent),i.addEventListener(\"selectend\",onSessionEvent),i.addEventListener(\"squeeze\",onSessionEvent),i.addEventListener(\"squeezestart\",onSessionEvent),i.addEventListener(\"squeezeend\",onSessionEvent),i.addEventListener(\"end\",onSessionEnd),i.addEventListener(\"inputsourceschange\",onInputSourcesChange);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const o={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},l=new XRWebGLLayer(i,t,o);i.updateRenderState({baseLayer:l}),a=await i.requestReferenceSpace(s),b.setContext(i),b.start(),n.isPresenting=!0,n.dispatchEvent({type:\"sessionstart\"})}};const g=new Vector3,y=new Vector3;function updateCamera(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){p.near=h.near=u.near=e.near,p.far=h.far=u.far=e.far,f===p.near&&m===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const t=e.parent,n=p.cameras;updateCamera(p,t);for(let e=0;e<n.length;e++)updateCamera(n[e],t);e.matrixWorld.copy(p.matrixWorld),e.matrix.copy(p.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===n.length?function setProjectionFromUnion(e,t,n){g.setFromMatrixPosition(t.matrixWorld),y.setFromMatrixPosition(n.matrixWorld);const i=g.distanceTo(y),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=s*u,p=s*h,f=i/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=s+f,b=o+f,x=d-m,_=p+(i-m),w=l*o/b*v,T=c*o/b*v;e.projectionMatrix.makePerspective(x,_,w,T,v,b)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let v=null;const b=new WebGLAnimation;b.setAnimationLoop(function onAnimationFrame(t,n){if(null!==(o=n.getViewerPose(a))){const t=o.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==p.cameras.length&&(p.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],a=n.getViewport(i),s=d[e];s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===e&&p.matrix.copy(s.matrix),!0===r&&p.cameras.push(s)}}const r=i.inputSources;for(let e=0;e<l.length;e++){const t=l[e],i=r[e];t.update(i,n,a)}v&&v(t,n)}),this.setAnimationLoop=function(e){v=e},this.dispose=function(){}}function WebGLMaterials(e){function refreshUniformsCommon(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function refreshUniformsStandard(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===d&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===d&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function refreshFogUniforms(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function refreshMaterialUniforms(e,t,n,i){t.isMeshBasicMaterial?refreshUniformsCommon(e,t):t.isMeshLambertMaterial?(refreshUniformsCommon(e,t),function refreshUniformsLambert(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,t)):t.isMeshToonMaterial?(refreshUniformsCommon(e,t),function refreshUniformsToon(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,t)):t.isMeshPhongMaterial?(refreshUniformsCommon(e,t),function refreshUniformsPhong(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,t)):t.isMeshStandardMaterial?(refreshUniformsCommon(e,t),t.isMeshPhysicalMaterial?function refreshUniformsPhysical(e,t){refreshUniformsStandard(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===d&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,t):refreshUniformsStandard(e,t)):t.isMeshMatcapMaterial?(refreshUniformsCommon(e,t),function refreshUniformsMatcap(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,t)):t.isMeshDepthMaterial?(refreshUniformsCommon(e,t),function refreshUniformsDepth(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,t)):t.isMeshDistanceMaterial?(refreshUniformsCommon(e,t),function refreshUniformsDistance(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,t)):t.isMeshNormalMaterial?(refreshUniformsCommon(e,t),function refreshUniformsNormal(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,t)):t.isLineBasicMaterial?(function refreshUniformsLine(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,t),t.isLineDashedMaterial&&function refreshUniformsDash(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,t)):t.isPointsMaterial?function refreshUniformsPoints(e,t,n,i){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,t,n,i):t.isSpriteMaterial?function refreshUniformsSprites(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function WebGLRenderer(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function createCanvasElement(){const e=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");return e.style.display=\"block\",e}(),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,l=void 0===e.stencil||e.stencil,c=void 0!==e.antialias&&e.antialias,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,v=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,W=void 0!==e.powerPreference?e.powerPreference:\"default\",q=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let X=null,$=null;const Z=[],J=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Vt,this.physicallyCorrectLights=!1,this.toneMapping=Y,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const K=this;let Q=!1,ee=null,se=0,oe=0,le=null,ce=null,ue=-1,he=null;const de=new Vector4,pe=new Vector4;let fe=null,me=t.width,At=t.height,Ct=1,Lt=null,Pt=null;const Rt=new Vector4(0,0,me,At),Dt=new Vector4(0,0,me,At);let Ot=!1;const kt=new Frustum;let It=!1,Nt=!1;const Bt=new Matrix4,zt=new Vector3,Ft={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===le?Ct:1}let Ht,Ut,jt,Gt,Wt,qt,Xt,Yt,$t,Zt,Jt,Kt,Qt,en,tn,nn,an,sn,on,ln,cn,un=n;function getContext(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:i,depth:r,stencil:l,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:v,powerPreference:W,failIfMajorPerformanceCaveat:q};if(t.addEventListener(\"webglcontextlost\",onContextLost,!1),t.addEventListener(\"webglcontextrestored\",onContextRestore,!1),null===un){const t=[\"webgl2\",\"webgl\",\"experimental-webgl\"];if(!0===K.isWebGL1Renderer&&t.shift(),null===(un=getContext(t,e)))throw getContext(t)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}void 0===un.getShaderPrecisionFormat&&(un.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error(\"THREE.WebGLRenderer: \"+e.message),e}function initGLContext(){Ht=new function WebGLExtensions(e){const t={};function getExtension(n){if(void 0!==t[n])return t[n];let i;switch(n){case\"WEBGL_depth_texture\":i=e.getExtension(\"WEBGL_depth_texture\")||e.getExtension(\"MOZ_WEBGL_depth_texture\")||e.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":i=e.getExtension(\"EXT_texture_filter_anisotropic\")||e.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||e.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":i=e.getExtension(\"WEBGL_compressed_texture_s3tc\")||e.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":i=e.getExtension(\"WEBGL_compressed_texture_pvrtc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==getExtension(e)},init:function(e){e.isWebGL2?getExtension(\"EXT_color_buffer_float\"):(getExtension(\"WEBGL_depth_texture\"),getExtension(\"OES_texture_float\"),getExtension(\"OES_texture_half_float\"),getExtension(\"OES_texture_half_float_linear\"),getExtension(\"OES_standard_derivatives\"),getExtension(\"OES_element_index_uint\"),getExtension(\"OES_vertex_array_object\"),getExtension(\"ANGLE_instanced_arrays\")),getExtension(\"OES_texture_float_linear\"),getExtension(\"EXT_color_buffer_half_float\")},get:function(e){const t=getExtension(e);return null===t&&console.warn(\"THREE.WebGLRenderer: \"+e+\" extension not supported.\"),t}}}(un),Ut=new function WebGLCapabilities(e,t,n){let i;function getMaxPrecision(t){if(\"highp\"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return\"highp\";t=\"mediump\"}return\"mediump\"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?\"mediump\":\"lowp\"}const r=\"undefined\"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||\"undefined\"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:\"highp\";const s=getMaxPrecision(a);s!==a&&(console.warn(\"THREE.WebGLRenderer:\",a,\"not supported, using\",s,\"instead.\"),a=s);const o=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),c=e.getParameter(35660),u=e.getParameter(3379),h=e.getParameter(34076),d=e.getParameter(34921),p=e.getParameter(36347),f=e.getParameter(36348),m=e.getParameter(36349),g=c>0,y=r||t.has(\"OES_texture_float\");return{isWebGL2:r,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==i)return i;if(!0===t.has(\"EXT_texture_filter_anisotropic\")){const n=t.get(\"EXT_texture_filter_anisotropic\");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:getMaxPrecision,precision:a,logarithmicDepthBuffer:o,maxTextures:l,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:r?e.getParameter(36183):0}}(un,Ht,e),Ht.init(Ut),ln=new function WebGLUtils(e,t,n){const i=n.isWebGL2;return{convert:function convert(e){let n;if(e===ge)return 5121;if(e===Me)return 32819;if(e===Se)return 32820;if(e===Ee)return 33635;if(e===ye)return 5120;if(e===ve)return 5122;if(e===be)return 5123;if(e===xe)return 5124;if(e===_e)return 5125;if(e===we)return 5126;if(e===Te)return i?5131:null!==(n=t.get(\"OES_texture_half_float\"))?n.HALF_FLOAT_OES:null;if(e===Ce)return 6406;if(e===Le)return 6407;if(e===Pe)return 6408;if(e===Re)return 6409;if(e===De)return 6410;if(e===Oe)return 6402;if(e===ke)return 34041;if(e===Ie)return 6403;if(e===Ne)return 36244;if(e===Be)return 33319;if(e===Ve)return 33320;if(e===ze)return 36248;if(e===Fe)return 36249;if(e===He||e===Ue||e===je||e===Ge){if(null===(n=t.get(\"WEBGL_compressed_texture_s3tc\")))return null;if(e===He)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ue)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===je)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ge)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===We||e===qe||e===Xe||e===Ye){if(null===(n=t.get(\"WEBGL_compressed_texture_pvrtc\")))return null;if(e===We)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===qe)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Xe)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ye)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===$e)return null!==(n=t.get(\"WEBGL_compressed_texture_etc1\"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Ze||e===Je)&&null!==(n=t.get(\"WEBGL_compressed_texture_etc\"))){if(e===Ze)return n.COMPRESSED_RGB8_ETC2;if(e===Je)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Ke||e===Qe||e===et||e===tt||e===nt||e===it||e===rt||e===at||e===st||e===ot||e===lt||e===ct||e===ut||e===ht||e===pt||e===ft||e===mt||e===gt||e===yt||e===vt||e===bt||e===xt||e===_t||e===wt||e===Tt||e===Mt||e===St||e===Et?null!==(n=t.get(\"WEBGL_compressed_texture_astc\"))?e:null:e===dt?null!==(n=t.get(\"EXT_texture_compression_bptc\"))?e:null:e===Ae?i?34042:null!==(n=t.get(\"WEBGL_depth_texture\"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}(un,Ht,Ut),(jt=new function WebGLState(e,t,n){const i=n.isWebGL2,r=new function ColorBuffer(){let t=!1;const n=new Vector4;let i=null;const r=new Vector4(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},l=new function DepthBuffer(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?enable(2929):disable(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case B:e.depthFunc(512);break;case V:e.depthFunc(519);break;case z:e.depthFunc(513);break;case F:e.depthFunc(515);break;case H:e.depthFunc(514);break;case U:e.depthFunc(518);break;case j:e.depthFunc(516);break;case G:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},c=new function StencilBuffer(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?enable(2960):disable(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}};let u={},h=null,v=!1,W=null,q=null,X=null,Y=null,$=null,Z=null,J=null,K=!1,Q=null,ee=null,te=null,ne=null,ie=null;const re=e.getParameter(35661);let ae=!1,se=0;const oe=e.getParameter(7938);-1!==oe.indexOf(\"WebGL\")?(se=parseFloat(/^WebGL (\\d)/.exec(oe)[1]),ae=se>=1):-1!==oe.indexOf(\"OpenGL ES\")&&(se=parseFloat(/^OpenGL ES (\\d)/.exec(oe)[1]),ae=se>=2);let le=null,ce={};const ue=new Vector4,he=new Vector4;function createTexture(t,n,i){const r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return a}const de={};function enable(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function disable(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}de[3553]=createTexture(3553,3553,1),de[34067]=createTexture(34067,34069,6),r.setClear(0,0,0,1),l.setClear(1),c.setClear(0),enable(2929),l.setFunc(F),setFlipSided(!1),setCullFace(s),enable(2884),setBlending(f);const pe={[_]:32774,[w]:32778,[T]:32779};if(i)pe[M]=32775,pe[S]=32776;else{const e=t.get(\"EXT_blend_minmax\");null!==e&&(pe[M]=e.MIN_EXT,pe[S]=e.MAX_EXT)}const fe={[E]:0,[A]:1,[C]:768,[P]:770,[N]:776,[k]:774,[D]:772,[L]:769,[R]:771,[I]:775,[O]:773};function setBlending(t,n,i,r,a,s,o,l){if(t!==f){if(!1===v&&(enable(3042),v=!0),t===x)a=a||n,s=s||i,o=o||r,n===q&&a===$||(e.blendEquationSeparate(pe[n],pe[a]),q=n,$=a),i===X&&r===Y&&s===Z&&o===J||(e.blendFuncSeparate(fe[i],fe[r],fe[s],fe[o]),X=i,Y=r,Z=s,J=o),W=t,K=null;else if(t!==W||l!==K){if(q===_&&$===_||(e.blendEquation(32774),q=_,$=_),l)switch(t){case m:e.blendFuncSeparate(1,771,1,771);break;case g:e.blendFunc(1,1);break;case y:e.blendFuncSeparate(0,0,769,771);break;case b:e.blendFuncSeparate(0,768,0,770);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",t)}else switch(t){case m:e.blendFuncSeparate(770,771,1,771);break;case g:e.blendFunc(770,1);break;case y:e.blendFunc(0,769);break;case b:e.blendFunc(0,768);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",t)}X=null,Y=null,Z=null,J=null,W=t,K=l}}else!0===v&&(disable(3042),v=!1)}function setFlipSided(t){Q!==t&&(t?e.frontFace(2304):e.frontFace(2305),Q=t)}function setCullFace(t){t!==a?(enable(2884),t!==ee&&(t===s?e.cullFace(1029):t===o?e.cullFace(1028):e.cullFace(1032))):disable(2884),ee=t}function setPolygonOffset(t,n,i){t?(enable(32823),ne===n&&ie===i||(e.polygonOffset(n,i),ne=n,ie=i)):disable(32823)}function activeTexture(t){void 0===t&&(t=33984+re-1),le!==t&&(e.activeTexture(t),le=t)}return{buffers:{color:r,depth:l,stencil:c},enable:enable,disable:disable,useProgram:function useProgram(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:setBlending,setMaterial:function setMaterial(e,t){e.side===p?disable(2884):enable(2884);let n=e.side===d;t&&(n=!n),setFlipSided(n),e.blending===m&&!1===e.transparent?setBlending(f):setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),l.setFunc(e.depthFunc),l.setTest(e.depthTest),l.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;c.setTest(i),i&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function setLineWidth(t){t!==te&&(ae&&e.lineWidth(t),te=t)},setPolygonOffset:setPolygonOffset,setScissorTest:function setScissorTest(e){e?enable(3089):disable(3089)},activeTexture:activeTexture,bindTexture:function bindTexture(t,n){null===le&&activeTexture();let i=ce[le];void 0===i&&(i={type:void 0,texture:void 0},ce[le]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||de[t]),i.type=t,i.texture=n)},unbindTexture:function unbindTexture(){const t=ce[le];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage2D:function texImage2D(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage3D:function texImage3D(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},scissor:function scissor(t){!1===ue.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ue.copy(t))},viewport:function viewport(t){!1===he.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),he.copy(t))},reset:function reset(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},le=null,ce={},h=null,v=!1,W=null,q=null,X=null,Y=null,$=null,Z=null,J=null,K=!1,Q=null,ee=null,te=null,ne=null,ie=null,r.reset(),l.reset(),c.reset()}}}(un,Ht,Ut)).scissor(pe.copy(Dt).multiplyScalar(Ct).floor()),jt.viewport(de.copy(Rt).multiplyScalar(Ct).floor()),Gt=new function WebGLInfo(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function reset(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function update(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",n)}}}}(un),Wt=new function WebGLProperties(){let e=new WeakMap;return{get:function get(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function remove(t){e.delete(t)},update:function update(t,n,i){e.get(t)[n]=i},dispose:function dispose(){e=new WeakMap}}},qt=new WebGLTextures(un,Ht,jt,Wt,Ut,ln,Gt),Xt=new function WebGLCubeMaps(e){let t=new WeakMap;function mapTextureMapping(e,t){return t===ie?e.mapping=te:t===re&&(e.mapping=ne),e}function onTextureDispose(e){const n=e.target;n.removeEventListener(\"dispose\",onTextureDispose);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function get(n){if(n&&n.isTexture){const i=n.mapping;if(i===ie||i===re){if(t.has(n))return mapTextureMapping(t.get(n).texture,n.mapping);{const i=n.image;if(i&&i.height>0){const r=e.getRenderTarget(),a=new WebGLCubeRenderTarget(i.height/2);return a.fromEquirectangularTexture(e,n),t.set(n,a),e.setRenderTarget(r),n.addEventListener(\"dispose\",onTextureDispose),mapTextureMapping(a.texture,n.mapping)}return null}}}return n},dispose:function dispose(){t=new WeakMap}}}(K),Yt=new WebGLAttributes(un,Ut),cn=new WebGLBindingStates(un,Ht,Yt,Ut),$t=new function WebGLGeometries(e,t,n,i){const r={},a=new WeakMap;function onGeometryDispose(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener(\"dispose\",onGeometryDispose),delete r[s.id];const o=a.get(s);o&&(t.remove(o),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function updateWireframeAttribute(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const o=new(arrayMax(n)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function get(e,t){return!0===r[t.id]?t:(t.addEventListener(\"dispose\",onGeometryDispose),r[t.id]=!0,n.memory.geometries++,t)},update:function update(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function getWireframeAttribute(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&updateWireframeAttribute(e)}else updateWireframeAttribute(e);return a.get(e)}}}(un,Yt,Gt,cn),Zt=new function WebGLObjects(e,t,n,i){let r=new WeakMap;function onInstancedMeshDispose(e){const t=e.target;t.removeEventListener(\"dispose\",onInstancedMeshDispose),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function update(e){const a=i.render.frame,s=e.geometry,o=t.get(e,s);return r.get(o)!==a&&(t.update(o),r.set(o,a)),e.isInstancedMesh&&(!1===e.hasEventListener(\"dispose\",onInstancedMeshDispose)&&e.addEventListener(\"dispose\",onInstancedMeshDispose),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),o},dispose:function dispose(){r=new WeakMap}}}(un,$t,Yt,Gt),an=new function WebGLMorphtargets(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function update(r,a,s,o){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[a.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[a.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(absNumericalSort);for(let e=0;e<8;e++)e<c&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(numericalSort);const h=s.morphTargets&&a.morphAttributes.position,d=s.morphNormals&&a.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],s=t[1];r!==Number.MAX_SAFE_INTEGER&&s?(h&&a.getAttribute(\"morphTarget\"+e)!==h[r]&&a.setAttribute(\"morphTarget\"+e,h[r]),d&&a.getAttribute(\"morphNormal\"+e)!==d[r]&&a.setAttribute(\"morphNormal\"+e,d[r]),n[e]=s,p+=s):(h&&!0===a.hasAttribute(\"morphTarget\"+e)&&a.deleteAttribute(\"morphTarget\"+e),d&&!0===a.hasAttribute(\"morphNormal\"+e)&&a.deleteAttribute(\"morphNormal\"+e),n[e]=0)}const f=a.morphTargetsRelative?1:1-p;o.getUniforms().setValue(e,\"morphTargetBaseInfluence\",f),o.getUniforms().setValue(e,\"morphTargetInfluences\",n)}}}(un),tn=new function WebGLClipping(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new Plane,o=new Matrix3,l={value:null,needsUpdate:!1};function resetGlobalState(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function projectPlanes(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const s=0!==e.length||t||0!==i||r;return r=t,n=projectPlanes(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,projectPlanes(null)},this.endShadows=function(){a=!1,resetGlobalState()},this.setState=function(t,s,o){const c=t.clippingPlanes,u=t.clipIntersection,h=t.clipShadows,d=e.get(t);if(!r||null===c||0===c.length||a&&!h)a?projectPlanes(null):resetGlobalState();else{const e=a?0:i,t=4*e;let r=d.clippingState||null;l.value=r,r=projectPlanes(c,s,t,o);for(let e=0;e!==t;++e)r[e]=n[e];d.clippingState=r,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=e}}}(Wt),Jt=new WebGLPrograms(K,Xt,Ht,Ut,cn,tn),Kt=new WebGLMaterials(Wt),Qt=new function WebGLRenderLists(e){let t=new WeakMap;return{get:function get(n,i){let r;return!1===t.has(n)?(r=new WebGLRenderList(e),t.set(n,[r])):i>=t.get(n).length?(r=new WebGLRenderList(e),t.get(n).push(r)):r=t.get(n)[i],r},dispose:function dispose(){t=new WeakMap}}}(Wt),en=new function WebGLRenderStates(e,t){let n=new WeakMap;return{get:function get(i,r=0){let a;return!1===n.has(i)?(a=new WebGLRenderState(e,t),n.set(i,[a])):r>=n.get(i).length?(a=new WebGLRenderState(e,t),n.get(i).push(a)):a=n.get(i)[r],a},dispose:function dispose(){n=new WeakMap}}}(Ht,Ut),nn=new function WebGLBackground(e,t,n,i,r){const a=new Color(0);let s,o,l=0,c=null,u=0,p=null;function setClear(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),setClear(a,l=t)},getClearAlpha:function(){return l},setClearAlpha:function(e){setClear(a,l=e)},render:function render(n,r,f,m){let g=!0===r.isScene?r.background:null;g&&g.isTexture&&(g=t.get(g));const y=e.xr,v=y.getSession&&y.getSession();v&&\"additive\"===v.environmentBlendMode&&(g=null),null===g?setClear(a,l):g&&g.isColor&&(setClear(g,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===ae)?(void 0===o&&((o=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:\"BackgroundCubeMaterial\",uniforms:cloneUniforms(Ji.cube.uniforms),vertexShader:Ji.cube.vertexShader,fragmentShader:Ji.cube.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),o.geometry.deleteAttribute(\"uv\"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),i.update(o)),g.isWebGLCubeRenderTarget&&(g=g.texture),o.material.uniforms.envMap.value=g,o.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,c===g&&u===g.version&&p===e.toneMapping||(o.material.needsUpdate=!0,c=g,u=g.version,p=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):g&&g.isTexture&&(void 0===s&&((s=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:\"BackgroundMaterial\",uniforms:cloneUniforms(Ji.background.uniforms),vertexShader:Ji.background.vertexShader,fragmentShader:Ji.background.fragmentShader,side:h,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),Object.defineProperty(s.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),s.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&u===g.version&&p===e.toneMapping||(s.material.needsUpdate=!0,c=g,u=g.version,p=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}(K,Xt,jt,Zt,u),sn=new function WebGLBufferRenderer(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function setMode(e){a=e},this.render=function render(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function renderInstances(i,s,o){if(0===o)return;let l,c;if(r)l=e,c=\"drawArraysInstanced\";else if(c=\"drawArraysInstancedANGLE\",null===(l=t.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");l[c](a,i,s,o),n.update(s,a,o)}}(un,Ht,Gt,Ut),on=new function WebGLIndexedBufferRenderer(e,t,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function setMode(e){a=e},this.setIndex=function setIndex(e){s=e.type,o=e.bytesPerElement},this.render=function render(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)},this.renderInstances=function renderInstances(i,l,c){if(0===c)return;let u,h;if(r)u=e,h=\"drawElementsInstanced\";else if(h=\"drawElementsInstancedANGLE\",null===(u=t.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");u[h](a,l,s,i*o,c),n.update(l,a,c)}}(un,Ht,Gt,Ut),Gt.programs=Jt.programs,K.capabilities=Ut,K.extensions=Ht,K.properties=Wt,K.renderLists=Qt,K.state=jt,K.info=Gt}initGLContext();const hn=new WebXRManager(K,un);this.xr=hn;const dn=new WebGLShadowMap(K,Zt,Ut.maxTextureSize);function onContextLost(e){e.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),Q=!0}function onContextRestore(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),Q=!1,initGLContext()}function onMaterialDispose(e){const t=e.target;t.removeEventListener(\"dispose\",onMaterialDispose),function deallocateMaterial(e){releaseMaterialProgramReference(e),Wt.remove(e)}(t)}function releaseMaterialProgramReference(e){const t=Wt.get(e).program;void 0!==t&&Jt.releaseProgram(t)}this.shadowMap=dn,this.getContext=function(){return un},this.getContextAttributes=function(){return un.getContextAttributes()},this.forceContextLoss=function(){const e=Ht.get(\"WEBGL_lose_context\");e&&e.loseContext()},this.forceContextRestore=function(){const e=Ht.get(\"WEBGL_lose_context\");e&&e.restoreContext()},this.getPixelRatio=function(){return Ct},this.setPixelRatio=function(e){void 0!==e&&(Ct=e,this.setSize(me,At,!1))},this.getSize=function(e){return void 0===e&&(console.warn(\"WebGLRenderer: .getsize() now requires a Vector2 as an argument\"),e=new Vector2),e.set(me,At)},this.setSize=function(e,n,i){hn.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(me=e,At=n,t.width=Math.floor(e*Ct),t.height=Math.floor(n*Ct),!1!==i&&(t.style.width=e+\"px\",t.style.height=n+\"px\"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn(\"WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument\"),e=new Vector2),e.set(me*Ct,At*Ct).floor()},this.setDrawingBufferSize=function(e,n,i){me=e,At=n,Ct=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn(\"WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument\"),e=new Vector4),e.copy(de)},this.getViewport=function(e){return e.copy(Rt)},this.setViewport=function(e,t,n,i){e.isVector4?Rt.set(e.x,e.y,e.z,e.w):Rt.set(e,t,n,i),jt.viewport(de.copy(Rt).multiplyScalar(Ct).floor())},this.getScissor=function(e){return e.copy(Dt)},this.setScissor=function(e,t,n,i){e.isVector4?Dt.set(e.x,e.y,e.z,e.w):Dt.set(e,t,n,i),jt.scissor(pe.copy(Dt).multiplyScalar(Ct).floor())},this.getScissorTest=function(){return Ot},this.setScissorTest=function(e){jt.setScissorTest(Ot=e)},this.setOpaqueSort=function(e){Lt=e},this.setTransparentSort=function(e){Pt=e},this.getClearColor=function(e){return void 0===e&&(console.warn(\"WebGLRenderer: .getClearColor() now requires a Color as an argument\"),e=new Color),e.copy(nn.getClearColor())},this.setClearColor=function(){nn.setClearColor.apply(nn,arguments)},this.getClearAlpha=function(){return nn.getClearAlpha()},this.setClearAlpha=function(){nn.setClearAlpha.apply(nn,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),un.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener(\"webglcontextlost\",onContextLost,!1),t.removeEventListener(\"webglcontextrestored\",onContextRestore,!1),Qt.dispose(),en.dispose(),Wt.dispose(),Xt.dispose(),Zt.dispose(),cn.dispose(),hn.dispose(),fn.stop()},this.renderBufferImmediate=function(e,t){cn.initAttributes();const n=Wt.get(e);e.hasPositions&&!n.position&&(n.position=un.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=un.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=un.createBuffer()),e.hasColors&&!n.color&&(n.color=un.createBuffer());const i=t.getAttributes();e.hasPositions&&(un.bindBuffer(34962,n.position),un.bufferData(34962,e.positionArray,35048),cn.enableAttribute(i.position),un.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(un.bindBuffer(34962,n.normal),un.bufferData(34962,e.normalArray,35048),cn.enableAttribute(i.normal),un.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(un.bindBuffer(34962,n.uv),un.bufferData(34962,e.uvArray,35048),cn.enableAttribute(i.uv),un.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(un.bindBuffer(34962,n.color),un.bufferData(34962,e.colorArray,35048),cn.enableAttribute(i.color),un.vertexAttribPointer(i.color,3,5126,!1,0,0)),cn.disableUnusedAttributes(),un.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=Ft);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=setProgram(e,t,i,r);jt.setMaterial(i,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=$t.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&an.update(r,n,i,o),cn.setup(r,i,o,n,l);let d=sn;null!==l&&(u=Yt.get(l),(d=on).setIndex(u));const p=null!==l?l.count:c.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==a?a.start*h:0,y=null!==a?a.count*h:1/0,v=Math.max(f,g),b=Math.min(p,f+m,g+y)-1,x=Math.max(0,b-v+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(jt.setLineWidth(i.wireframeLinewidth*getTargetPixelRatio()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),jt.setLineWidth(e*getTargetPixelRatio()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(v,x,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,x,e)}else d.render(v,x)}},this.compile=function(e,t){($=en.get(e)).init(),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&($.pushLight(e),e.castShadow&&$.pushShadow(e))}),$.setupLights();const n=new WeakMap;e.traverse(function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];!1===n.has(a)&&(initMaterial(a,e,t),n.set(a))}else!1===n.has(i)&&(initMaterial(i,e,t),n.set(i))})};let pn=null;const fn=new WebGLAnimation;function renderObjects(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];s.layers.test(i.layers)&&(jt.viewport(de.copy(i.viewport)),$.setupLightsView(i),renderObject(s,t,i,o,l,c))}}else renderObject(s,t,n,o,l,c)}}function renderObject(e,t,n,i,r,a){if(e.onBeforeRender(K,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=setProgram(n,t,r,e);jt.setMaterial(r),cn.reset(),function renderObjectImmediate(e,t){e.render(function(e){K.renderBufferImmediate(e,t)})}(e,i)}else K.renderBufferDirect(n,t,i,r,e,a);e.onAfterRender(K,t,n,i,r,a)}function initMaterial(e,t,n){!0!==t.isScene&&(t=Ft);const i=Wt.get(e),r=$.state.lights,a=$.state.shadowsArray,s=r.state.version,o=Jt.getParameters(e,r.state,a,t,n),l=Jt.getProgramCacheKey(o);let c=i.program,u=!0;if(i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=Xt.get(e.envMap||i.environment),void 0===c)e.addEventListener(\"dispose\",onMaterialDispose);else if(c.cacheKey!==l)releaseMaterialProgramReference(e);else if(i.lightsStateVersion!==s)u=!1;else{if(void 0!==o.shaderID)return;u=!1}u&&(o.uniforms=Jt.getUniforms(e),e.onBeforeCompile(o,K),c=Jt.acquireProgram(o,l),i.program=c,i.uniforms=o.uniforms,i.outputEncoding=o.outputEncoding);const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=tn.numPlanes,i.numIntersection=tn.numIntersection,h.clippingPlanes=tn.uniform),i.needsLights=function materialNeedsLights(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=i.program.getUniforms(),p=WebGLUniforms.seqWithValue(d.seq,h);i.uniformsList=p}function setProgram(e,t,n,i){!0!==t.isScene&&(t=Ft),qt.resetTextureUnits();const r=t.fog,a=n.isMeshStandardMaterial?t.environment:null,s=null===le?K.outputEncoding:le.texture.encoding,o=Xt.get(n.envMap||a),l=Wt.get(n),c=$.state.lights;if(!0===It&&(!0===Nt||e!==he)){const t=e===he&&n.id===ue;tn.setState(n,e,t)}n.version===l.__version?n.fog&&l.fog!==r?initMaterial(n,t,i):l.environment!==a?initMaterial(n,t,i):l.needsLights&&l.lightsStateVersion!==c.state.version?initMaterial(n,t,i):void 0===l.numClippingPlanes||l.numClippingPlanes===tn.numPlanes&&l.numIntersection===tn.numIntersection?l.outputEncoding!==s?initMaterial(n,t,i):l.envMap!==o&&initMaterial(n,t,i):initMaterial(n,t,i):(initMaterial(n,t,i),l.__version=n.version);let u=!1,h=!1,d=!1;const p=l.program,f=p.getUniforms(),m=l.uniforms;if(jt.useProgram(p.program)&&(u=!0,h=!0,d=!0),n.id!==ue&&(ue=n.id,h=!0),u||he!==e){if(f.setValue(un,\"projectionMatrix\",e.projectionMatrix),Ut.logarithmicDepthBuffer&&f.setValue(un,\"logDepthBufFC\",2/(Math.log(e.far+1)/Math.LN2)),he!==e&&(he=e,h=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=f.map.cameraPosition;void 0!==t&&t.setValue(un,zt.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&f.setValue(un,\"isOrthographic\",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&f.setValue(un,\"viewMatrix\",e.matrixWorldInverse)}if(n.skinning){f.setOptional(un,i,\"bindMatrix\"),f.setOptional(un,i,\"bindMatrixInverse\");const e=i.skeleton;if(e){const t=e.bones;if(Ut.floatVertexTextures){if(null===e.boneTexture){let n=Math.sqrt(4*t.length);n=rn.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new DataTexture(i,n,n,Pe,we);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}f.setValue(un,\"boneTexture\",e.boneTexture,qt),f.setValue(un,\"boneTextureSize\",e.boneTextureSize)}else f.setOptional(un,e,\"boneMatrices\")}}return(h||l.receiveShadow!==i.receiveShadow)&&(l.receiveShadow=i.receiveShadow,f.setValue(un,\"receiveShadow\",i.receiveShadow)),h&&(f.setValue(un,\"toneMappingExposure\",K.toneMappingExposure),l.needsLights&&function markUniformsLightsNeedsUpdate(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(m,d),r&&n.fog&&Kt.refreshFogUniforms(m,r),Kt.refreshMaterialUniforms(m,n,Ct,At),WebGLUniforms.upload(un,l.uniformsList,m,qt)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(WebGLUniforms.upload(un,l.uniformsList,m,qt),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&f.setValue(un,\"center\",i.center),f.setValue(un,\"modelViewMatrix\",i.modelViewMatrix),f.setValue(un,\"normalMatrix\",i.normalMatrix),f.setValue(un,\"modelMatrix\",i.matrixWorld),p}fn.setAnimationLoop(function onAnimationFrame(e){hn.isPresenting||pn&&pn(e)}),\"undefined\"!=typeof window&&fn.setContext(window),this.setAnimationLoop=function(e){pn=e,hn.setAnimationLoop(e),null===e?fn.stop():fn.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn(\"THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.\"),n=arguments[2]),void 0!==arguments[3]&&(console.warn(\"THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.\"),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");if(!0===Q)return;cn.resetDefaultState(),ue=-1,he=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===hn.enabled&&!0===hn.isPresenting&&(t=hn.getCamera(t)),!0===e.isScene&&e.onBeforeRender(K,e,t,n||le),($=en.get(e,J.length)).init(),J.push($),Bt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),kt.setFromProjectionMatrix(Bt),Nt=this.localClippingEnabled,It=tn.init(this.clippingPlanes,Nt,t),(X=Qt.get(e,Z.length)).init(),Z.push(X),function projectObject(e,t,n,i){if(!1===e.visible)return;const r=e.layers.test(t.layers);if(r)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)$.pushLight(e),e.castShadow&&$.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||kt.intersectsSprite(e)){i&&zt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Bt);const t=Zt.update(e),r=e.material;r.visible&&X.push(e,t,r,n,zt.z,null)}}else if(e.isImmediateRenderObject)i&&zt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Bt),X.push(e,null,e.material,n,zt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Gt.render.frame&&(e.skeleton.update(),e.skeleton.frame=Gt.render.frame),!e.frustumCulled||kt.intersectsObject(e))){i&&zt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Bt);const t=Zt.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&X.push(e,t,o,n,zt.z,s)}}else r.visible&&X.push(e,t,r,n,zt.z,null)}const a=e.children;for(let e=0,r=a.length;e<r;e++)projectObject(a[e],t,n,i)}(e,t,0,K.sortObjects),X.finish(),!0===K.sortObjects&&X.sort(Lt,Pt),!0===It&&tn.beginShadows();const r=$.state.shadowsArray;dn.render(r,e,t),$.setupLights(),$.setupLightsView(t),!0===It&&tn.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),nn.render(X,e,t,i);const a=X.opaque,s=X.transparent;a.length>0&&renderObjects(a,e,t),s.length>0&&renderObjects(s,e,t),!0===e.isScene&&e.onAfterRender(K,e,t),null!==le&&(qt.updateRenderTargetMipmap(le),qt.updateMultisampleRenderTarget(le)),jt.buffers.depth.setTest(!0),jt.buffers.depth.setMask(!0),jt.buffers.color.setMask(!0),jt.setPolygonOffset(!1),J.pop(),$=J.length>0?J[J.length-1]:null,Z.pop(),X=Z.length>0?Z[Z.length-1]:null},this.setFramebuffer=function(e){ee!==e&&null===le&&un.bindFramebuffer(36160,e),ee=e},this.getActiveCubeFace=function(){return se},this.getActiveMipmapLevel=function(){return oe},this.getRenderTarget=function(){return le},this.setRenderTarget=function(e,t=0,n=0){le=e,se=t,oe=n,e&&void 0===Wt.get(e).__webglFramebuffer&&qt.setupRenderTarget(e);let i=ee,r=!1,a=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const s=Wt.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=s[t],r=!0):i=e.isWebGLMultisampleRenderTarget?Wt.get(e).__webglMultisampledFramebuffer:s,de.copy(e.viewport),pe.copy(e.scissor),fe=e.scissorTest}else de.copy(Rt).multiplyScalar(Ct).floor(),pe.copy(Dt).multiplyScalar(Ct).floor(),fe=Ot;if(ce!==i&&(un.bindFramebuffer(36160,i),ce=i),jt.viewport(de),jt.scissor(pe),jt.setScissorTest(fe),r){const i=Wt.get(e.texture);un.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(a){const i=Wt.get(e.texture),r=t||0;un.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");let o=Wt.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){let s=!1;o!==ce&&(un.bindFramebuffer(36160,o),s=!0);try{const o=e.texture,l=o.format,c=o.type;if(l!==Pe&&ln.convert(l)!==un.getParameter(35739))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");const u=c===Te&&(Ht.has(\"EXT_color_buffer_half_float\")||Ut.isWebGL2&&Ht.has(\"EXT_color_buffer_float\"));if(!(c===ge||ln.convert(c)===un.getParameter(35738)||c===we&&(Ut.isWebGL2||Ht.has(\"OES_texture_float\")||Ht.has(\"WEBGL_color_buffer_float\"))||u))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");36053===un.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&un.readPixels(t,n,i,r,ln.convert(l),ln.convert(c),a):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\")}finally{s&&un.bindFramebuffer(36160,ce)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i),s=ln.convert(t.format);qt.setTexture2D(t,0),un.copyTexImage2D(3553,n,s,e.x,e.y,r,a,0),jt.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,a=t.image.height,s=ln.convert(n.format),o=ln.convert(n.type);qt.setTexture2D(n,0),un.pixelStorei(37440,n.flipY),un.pixelStorei(37441,n.premultiplyAlpha),un.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?un.texSubImage2D(3553,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?un.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):un.texSubImage2D(3553,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&un.generateMipmap(3553),jt.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(K.isWebGL1Renderer)return void console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.\");const{width:a,height:s,data:o}=n.image,l=ln.convert(i.format),c=ln.convert(i.type);let u;if(i.isDataTexture3D)qt.setTexture3D(i,0),u=32879;else{if(!i.isDataTexture2DArray)return void console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.\");qt.setTexture2DArray(i,0),u=35866}un.pixelStorei(37440,i.flipY),un.pixelStorei(37441,i.premultiplyAlpha),un.pixelStorei(3317,i.unpackAlignment);const h=un.getParameter(3314),d=un.getParameter(32878),p=un.getParameter(3316),f=un.getParameter(3315),m=un.getParameter(32877);un.pixelStorei(3314,a),un.pixelStorei(32878,s),un.pixelStorei(3316,e.min.x),un.pixelStorei(3315,e.min.y),un.pixelStorei(32877,e.min.z),un.texSubImage3D(u,r,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,l,c,o),un.pixelStorei(3314,h),un.pixelStorei(32878,d),un.pixelStorei(3316,p),un.pixelStorei(3315,f),un.pixelStorei(32877,m),0===r&&i.generateMipmaps&&un.generateMipmap(u),jt.unbindTexture()},this.initTexture=function(e){qt.setTexture2D(e,0),jt.unbindTexture()},this.resetState=function(){jt.reset(),cn.reset()},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}Group.prototype.isGroup=!0,Object.assign(WebXRController.prototype,{constructor:WebXRController,getHandSpace:function(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:\"disconnected\",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&\"visible-blurred\"!==t.session.visibilityState)if(l&&e.hand){a=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const e=new Group;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[i.jointName]=e,l.add(e)}const r=l.joints[i.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints[\"index-finger-tip\"],r=l.joints[\"thumb-tip\"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:e.handedness,target:this}))}else null!==s&&null!==(i=t.getPose(e.targetRaySpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)),null!==o&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale));return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}}),Object.assign(WebXRManager.prototype,EventDispatcher.prototype);(class WebGL1Renderer extends WebGLRenderer{}).prototype.isWebGL1Renderer=!0;class FogExp2{constructor(e,t){this.name=\"\",this.color=new Color(e),this.density=void 0!==t?t:25e-5}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}FogExp2.prototype.isFogExp2=!0;class Fog{constructor(e,t,n){this.name=\"\",this.color=new Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}Fog.prototype.isFog=!0;class Scene extends Object3D{constructor(){super(),this.type=\"Scene\",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function InterleavedBuffer(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Kt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=rn.generateUUID()}Scene.prototype.isScene=!0,Object.defineProperty(InterleavedBuffer.prototype,\"needsUpdate\",{set:function(e){!0===e&&this.version++}}),Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new InterleavedBuffer(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const mr=new Vector3;function InterleavedBufferAttribute(e,t,n,i){this.name=\"\",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)mr.x=this.getX(t),mr.y=this.getY(t),mr.z=this.getZ(t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log(\"THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.\");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new BufferAttribute(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log(\"THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.\");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class SpriteMaterial extends Material{constructor(e){super(),this.type=\"SpriteMaterial\",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let gr;SpriteMaterial.prototype.isSpriteMaterial=!0;const yr=new Vector3,vr=new Vector3,br=new Vector3,xr=new Vector2,_r=new Vector2,wr=new Matrix4,Tr=new Vector3,Mr=new Vector3,Sr=new Vector3,Er=new Vector2,Ar=new Vector2,Cr=new Vector2;class Sprite extends Object3D{constructor(e){if(super(),this.type=\"Sprite\",void 0===gr){gr=new BufferGeometry;const e=new InterleavedBuffer(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);gr.setIndex([0,1,2,0,2,3]),gr.setAttribute(\"position\",new InterleavedBufferAttribute(e,3,0,!1)),gr.setAttribute(\"uv\",new InterleavedBufferAttribute(e,2,3,!1))}this.geometry=gr,this.material=void 0!==e?e:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),vr.setFromMatrixScale(this.matrixWorld),wr.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),br.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&vr.multiplyScalar(-br.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;transformVertex(Tr.set(-.5,-.5,0),br,a,vr,i,r),transformVertex(Mr.set(.5,-.5,0),br,a,vr,i,r),transformVertex(Sr.set(.5,.5,0),br,a,vr,i,r),Er.set(0,0),Ar.set(1,0),Cr.set(1,1);let s=e.ray.intersectTriangle(Tr,Mr,Sr,!1,yr);if(null===s&&(transformVertex(Mr.set(-.5,.5,0),br,a,vr,i,r),Ar.set(0,1),null===(s=e.ray.intersectTriangle(Tr,Sr,Mr,!1,yr))))return;const o=e.ray.origin.distanceTo(yr);o<e.near||o>e.far||t.push({distance:o,point:yr.clone(),uv:Triangle.getUV(yr,Tr,Mr,Sr,Er,Ar,Cr,new Vector2),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function transformVertex(e,t,n,i,r,a){xr.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(_r.x=a*xr.x-r*xr.y,_r.y=r*xr.x+a*xr.y):_r.copy(xr),e.copy(t),e.x+=_r.x,e.y+=_r.y,e.applyMatrix4(wr)}Sprite.prototype.isSprite=!0;const Lr=new Vector3,Pr=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Lr.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Lr);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Lr.setFromMatrixPosition(e.matrixWorld),Pr.setFromMatrixPosition(this.matrixWorld);const n=Lr.distanceTo(Pr)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}const Rr=new Vector3,Dr=new Vector4,Or=new Vector4,kr=new Vector3,Ir=new Matrix4;function SkinnedMesh(e,t){Mesh.call(this,e,t),this.type=\"SkinnedMesh\",this.bindMode=\"attached\",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}function Bone(){Object3D.call(this),this.type=\"Bone\"}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,copy:function(e){return Mesh.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Vector4,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,e),\"attached\"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():\"detached\"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,i=this.geometry;Dr.fromBufferAttribute(i.attributes.skinIndex,e),Or.fromBufferAttribute(i.attributes.skinWeight,e),Rr.fromBufferAttribute(i.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const i=Or.getComponent(e);if(0!==i){const r=Dr.getComponent(e);Ir.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(kr.copy(Rr).applyMatrix4(Ir),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});const Nr=new Matrix4,Br=new Matrix4;class Skeleton{constructor(e=[],t=[]){this.uuid=rn.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn(\"THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.\"),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Matrix4;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:Br;Nr.multiplyMatrices(r,t[i]),Nr.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn(\"THREE.Skeleton: No bone found with UUID:\",i),r=new Bone),this.bones.push(r),this.boneInverses.push((new Matrix4).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:\"Skeleton\",generator:\"Skeleton.toJSON\"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}const Vr=new Matrix4,zr=new Matrix4,Fr=[],Hr=new Mesh;function InstancedMesh(e,t,n){Mesh.call(this,e,t),this.instanceMatrix=new BufferAttribute(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,copy:function(e){return Mesh.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(Hr.geometry=this.geometry,Hr.material=this.material,void 0!==Hr.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Vr),zr.multiplyMatrices(n,Vr),Hr.matrixWorld=zr,Hr.raycast(e,Fr);for(let e=0,n=Fr.length;e<n;e++){const n=Fr[e];n.instanceId=r,n.object=this,t.push(n)}Fr.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new BufferAttribute(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});class LineBasicMaterial extends Material{constructor(e){super(),this.type=\"LineBasicMaterial\",this.color=new Color(16777215),this.linewidth=1,this.linecap=\"round\",this.linejoin=\"round\",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;const Ur=new Vector3,jr=new Vector3,Gr=new Matrix4,Wr=new Ray,qr=new Sphere;function Line(e=new BufferGeometry,t=new LineBasicMaterial){Object3D.call(this),this.type=\"Line\",this.geometry=e,this.material=t,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Ur.fromBufferAttribute(t,e-1),jr.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Ur.distanceTo(jr);e.setAttribute(\"lineDistance\",new Float32BufferAttribute(n,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),qr.copy(n.boundingSphere),qr.applyMatrix4(i),qr.radius+=r,!1===e.ray.intersectsSphere(qr))return;Gr.copy(i).invert(),Wr.copy(e.ray).applyMatrix4(Gr);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,o=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,a=n.length-1;i<a;i+=h){const a=n[i],h=n[i+1];if(o.fromBufferAttribute(r,a),l.fromBufferAttribute(r,h),Wr.distanceSqToSegment(o,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.count-1;n<i;n+=h){if(o.fromBufferAttribute(r,n),l.fromBufferAttribute(r,n+1),Wr.distanceSqToSegment(o,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error(\"THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error(\"THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}});const Xr=new Vector3,Yr=new Vector3;function LineSegments(e,t){Line.call(this,e,t),this.type=\"LineSegments\"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Xr.fromBufferAttribute(t,e),Yr.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Xr.distanceTo(Yr);e.setAttribute(\"lineDistance\",new Float32BufferAttribute(n,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this}});class LineLoop extends Line{constructor(e,t){super(e,t),this.type=\"LineLoop\"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends Material{constructor(e){super(),this.type=\"PointsMaterial\",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}PointsMaterial.prototype.isPointsMaterial=!0;const $r=new Matrix4,Zr=new Ray,Jr=new Sphere,Kr=new Vector3;function Points(e=new BufferGeometry,t=new PointsMaterial){Object3D.call(this),this.type=\"Points\",this.geometry=e,this.material=t,this.updateMorphTargets()}function testPoint(e,t,n,i,r,a,s){const o=Zr.distanceSqToPoint(e);if(o<n){const n=new Vector3;Zr.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jr.copy(n.boundingSphere),Jr.applyMatrix4(i),Jr.radius+=r,!1===e.ray.intersectsSphere(Jr))return;$r.copy(i).invert(),Zr.copy(e.ray).applyMatrix4($r);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,o=n.length;r<o;r++){const o=n[r];Kr.fromBufferAttribute(a,o),testPoint(Kr,o,s,i,e,t,this)}}else for(let n=0,r=a.count;n<r;n++)Kr.fromBufferAttribute(a,n),testPoint(Kr,n,s,i,e,t,this)}else console.error(\"THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error(\"THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}});(class VideoTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.format=void 0!==s?s:Le,this.minFilter=void 0!==a?a:pe,this.magFilter=void 0!==r?r:pe,this.generateMipmaps=!1;const c=this;\"requestVideoFrameCallback\"in e&&e.requestVideoFrameCallback(function updateVideo(){c.needsUpdate=!0,e.requestVideoFrameCallback(updateVideo)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==\"requestVideoFrameCallback\"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class CompressedTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l,c,u,h){super(null,a,s,o,l,c,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;(class CanvasTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class DepthTexture extends Texture{constructor(e,t,n,i,r,a,s,o,l,c){if((c=void 0!==c?c:Oe)!==Oe&&c!==ke)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===n&&c===Oe&&(n=be),void 0===n&&c===ke&&(n=Ae),super(null,i,r,a,s,o,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:ue,this.minFilter=void 0!==o?o:ue,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0;new Vector3,new Vector3,new Vector3,new Triangle;const Qr=function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let a=linkedList(e,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,h,d,p;if(i&&(a=function eliminateHoles(e,t,n,i){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*i,l=a<s-1?t[a+1]*i:e.length,(c=linkedList(e,o,l,i,!1))===c.next&&(c.steiner=!0),r.push(getLeftmost(c));for(r.sort(compareX),a=0;a<r.length;a++)eliminateHole(r[a],n),n=filterPoints(n,n.next);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=0!==(p=Math.max(c-o,u-l))?1/p:0}return earcutLinked(a,s,n,o,l,p),s};function linkedList(e,t,n,i,r){let a,s;if(r===function signedArea(e,t,n,i){let r=0;for(let a=t,s=n-i;a<n;a+=i)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)s=insertNode(a,e[a],e[a+1],s);else for(a=n-i;a>=t;a-=i)s=insertNode(a,e[a],e[a+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!equals(i,i.next)&&0!==three_module_area(i.prev,i,i.next))i=i.next;else{if(removeNode(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function earcutLinked(e,t,n,i,r,a,s){if(!e)return;!s&&a&&function indexCurve(e,t,n,i){let r=e;do{null===r.z&&(r.z=zOrder(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function sortLinked(e){let t,n,i,r,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(s>1);return e}(r)}(e,i,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?isEarHashed(e,i,r,a):isEar(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),removeNode(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?earcutLinked(e=cureLocalIntersections(filterPoints(e),t,n),t,n,i,r,a,2):2===s&&splitEarcut(e,t,n,i,r,a):earcutLinked(filterPoints(e),t,n,i,r,a,1);break}}function isEar(e){const t=e.prev,n=e,i=e.next;if(three_module_area(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(pointInTriangle(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&three_module_area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function isEarHashed(e,t,n,i){const r=e.prev,a=e,s=e.next;if(three_module_area(r,a,s)>=0)return!1;const o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,l=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,c=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,u=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,h=zOrder(o,l,t,n,i),d=zOrder(c,u,t,n,i);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&three_module_area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&three_module_area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&three_module_area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&three_module_area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function cureLocalIntersections(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!equals(r,a)&&intersects(r,i,i.next,a)&&locallyInside(r,a)&&locallyInside(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),removeNode(i),removeNode(i.next),i=e=a),i=i.next}while(i!==e);return filterPoints(i)}function splitEarcut(e,t,n,i,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&isValidDiagonal(s,e)){let o=splitPolygon(s,e);return s=filterPoints(s,s.next),o=filterPoints(o,o.next),earcutLinked(s,t,n,i,r,a),void earcutLinked(o,t,n,i,r,a)}e=e.next}s=s.next}while(s!==e)}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=function findHoleBridge(e,t){let n=t;const i=e.x,r=e.y;let a,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s){if(s=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(i===s)return a;const o=a,l=a.x,c=a.y;let u,h=1/0;n=a;do{i>=n.x&&n.x>=l&&i!==n.x&&pointInTriangle(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),locallyInside(n,e)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&sectorContainsSector(a,n)))&&(a=n,h=u)),n=n.next}while(n!==o);return a}(e,t)){const n=splitPolygon(t,e);filterPoints(t,t.next),filterPoints(n,n.next)}}function sectorContainsSector(e,t){return three_module_area(e.prev,e,t.prev)<0&&three_module_area(t.next,e,e.next)<0}function zOrder(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function pointInTriangle(e,t,n,i,r,a,s,o){return(r-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(r-s)*(i-o)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function intersectsPolygon(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&intersects(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&function middleInside(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(three_module_area(e.prev,e,t.prev)||three_module_area(e,t.prev,t))||equals(e,t)&&three_module_area(e.prev,e,e.next)>0&&three_module_area(t.prev,t,t.next)>0)}function three_module_area(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,n,i){const r=sign(three_module_area(e,t,n)),a=sign(three_module_area(e,t,i)),s=sign(three_module_area(n,i,e)),o=sign(three_module_area(n,i,t));return r!==a&&s!==o||(!(0!==r||!onSegment(e,n,t))||(!(0!==a||!onSegment(e,i,t))||(!(0!==s||!onSegment(n,e,i))||!(0!==o||!onSegment(n,t,i)))))}function onSegment(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function sign(e){return e>0?1:e<0?-1:0}function locallyInside(e,t){return three_module_area(e.prev,e,e.next)<0?three_module_area(e,t,e.next)>=0&&three_module_area(e,e.prev,t)>=0:three_module_area(e,t,e.prev)<0||three_module_area(e,e.next,t)<0}function splitPolygon(e,t){const n=new Node(e.i,e.x,e.y),i=new Node(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function insertNode(e,t,n,i){const r=new Node(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const ea={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return ea.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];removeDupEndPts(e),addContour(n,e);let a=e.length;t.forEach(removeDupEndPts);for(let e=0;e<t.length;e++)i.push(a),a+=t[e].length,addContour(n,t[e]);const s=Qr(n,i);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}};function removeDupEndPts(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function addContour(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class ExtrudeGeometry extends BufferGeometry{constructor(e,t){super(),this.type=\"ExtrudeGeometry\",this.parameters={shapes:e,options:t};const n=this,i=[],r=[];for(let t=0,n=(e=Array.isArray(e)?e:[e]).length;t<n;t++){addShape(e[t])}function addShape(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:ta;void 0!==t.amount&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),l=t.amount);let g,y,b,x,_,w=!1;f&&(g=f.getSpacedPoints(o),w=!0,c=!1,y=f.computeFrenetFrames(o,!1),b=new Vector3,x=new Vector3,_=new Vector3),c||(p=0,u=0,h=0,d=0);const T=e.extractPoints(s);let M=T.shape;const S=T.holes;if(!ea.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];ea.isClockWise(t)&&(S[e]=t.reverse())}}const E=ea.triangulateShape(M,S),A=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function scalePt2(e,t,n){return t||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),t.clone().multiplyScalar(n).add(e)}const C=M.length,L=E.length;function getBevelVec(e,t,n){let i,r,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,h=s*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-o/h,f=t.y+s/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(s*c-o*l),g=(i=p+s*m-e.x)*i+(r=f+o*m-e.y)*r;if(g<=2)return new Vector2(i,r);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=s,a=Math.sqrt(u)):(i=s,r=o,a=Math.sqrt(u/2))}return new Vector2(i/a,r/a)}const P=[];for(let e=0,t=A.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),P[e]=getBevelVec(A[e],A[n],A[i]);const R=[];let D,O=P.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];D=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),D[e]=getBevelVec(t[e],t[i],t[r]);R.push(D),O=O.concat(D)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=A.length;e<t;e++){const t=scalePt2(A[e],P[e],i);v(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=R[e];for(let e=0,r=t.length;e<r;e++){const r=scalePt2(t[e],D[e],i);v(r.x,r.y,-n)}}}const k=h+d;for(let e=0;e<C;e++){const t=c?scalePt2(M[e],O[e],k):M[e];w?(x.copy(y.normals[0]).multiplyScalar(t.x),b.copy(y.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(x).add(b),v(_.x,_.y,_.z)):v(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<C;t++){const n=c?scalePt2(M[t],O[t],k):M[t];w?(x.copy(y.normals[e]).multiplyScalar(n.x),b.copy(y.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(x).add(b),v(_.x,_.y,_.z)):v(n.x,n.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=A.length;e<t;e++){const t=scalePt2(A[e],P[e],i);v(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=R[e];for(let e=0,r=t.length;e<r;e++){const r=scalePt2(t[e],D[e],i);w?v(r.x,r.y+g[o-1].y,g[o-1].x+n):v(r.x,r.y,l+n)}}}function sidewalls(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=C*e,a=C*(e+1);f4(t+i+n,t+r+n,t+r+a,t+i+a)}}}function v(e,t,n){a.push(e),a.push(t),a.push(n)}function f3(e,t,r){addVertex(e),addVertex(t),addVertex(r);const a=i.length/3,s=m.generateTopUV(n,i,a-3,a-2,a-1);addUV(s[0]),addUV(s[1]),addUV(s[2])}function f4(e,t,r,a){addVertex(e),addVertex(t),addVertex(a),addVertex(t),addVertex(r),addVertex(a);const s=i.length/3,o=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);addUV(o[0]),addUV(o[1]),addUV(o[3]),addUV(o[1]),addUV(o[2]),addUV(o[3])}function addVertex(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function addUV(e){r.push(e.x),r.push(e.y)}!function buildLidFaces(){const e=i.length/3;if(c){let e=0,t=C*e;for(let e=0;e<L;e++){const n=E[e];f3(n[2]+t,n[1]+t,n[0]+t)}t=C*(e=o+2*p);for(let e=0;e<L;e++){const n=E[e];f3(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<L;e++){const t=E[e];f3(t[2],t[1],t[0])}for(let e=0;e<L;e++){const t=E[e];f3(t[0]+C*o,t[1]+C*o,t[2]+C*o)}}n.addGroup(e,i.length/3-e,0)}(),function buildSideFaces(){const e=i.length/3;let t=0;sidewalls(A,t),t+=A.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];sidewalls(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute(\"position\",new Float32BufferAttribute(i,3)),this.setAttribute(\"uv\",new Float32BufferAttribute(r,2)),this.computeVertexNormals()}toJSON(){const e=BufferGeometry.prototype.toJSON.call(this);return function toJSON(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const ta={generateTopUV:function(e,t,n,i,r){const a=t[3*n],s=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Vector2(a,s),new Vector2(o,l),new Vector2(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],y=t[3*a+2];return Math.abs(o-u)<.01?[new Vector2(s,1-l),new Vector2(c,1-h),new Vector2(d,1-f),new Vector2(m,1-y)]:[new Vector2(o,1-l),new Vector2(u,1-h),new Vector2(p,1-f),new Vector2(g,1-y)]}};function ParametricGeometry(e,t,n){BufferGeometry.call(this),this.type=\"ParametricGeometry\",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],a=[],s=[],o=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3,h=new Vector3;e.length<3&&console.error(\"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.\");const d=t+1;for(let i=0;i<=n;i++){const d=i/n;for(let n=0;n<=t;n++){const i=n/t;e(i,d,l),r.push(l.x,l.y,l.z),i-1e-5>=0?(e(i-1e-5,d,c),u.subVectors(l,c)):(e(i+1e-5,d,c),u.subVectors(c,l)),d-1e-5>=0?(e(i,d-1e-5,c),h.subVectors(l,c)):(e(i,d+1e-5,c),h.subVectors(c,l)),o.crossVectors(u,h).normalize(),a.push(o.x,o.y,o.z),s.push(i,d)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*d+n,r=e*d+n+1,a=(e+1)*d+n+1,s=(e+1)*d+n;i.push(t,r,s),i.push(r,a,s)}this.setIndex(i),this.setAttribute(\"position\",new Float32BufferAttribute(r,3)),this.setAttribute(\"normal\",new Float32BufferAttribute(a,3)),this.setAttribute(\"uv\",new Float32BufferAttribute(s,2))}ParametricGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry;class ShapeGeometry extends BufferGeometry{constructor(e,t=12){super(),this.type=\"ShapeGeometry\",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))addShape(e);else for(let t=0;t<e.length;t++)addShape(e[t]),this.addGroup(s,o,t),s+=o,o=0;function addShape(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===ea.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===ea.isClockWise(t)&&(u[e]=t.reverse())}const h=ea.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+s,r=t[1]+s,a=t[2]+s;n.push(i,r,a),o+=3}}this.setIndex(n),this.setAttribute(\"position\",new Float32BufferAttribute(i,3)),this.setAttribute(\"normal\",new Float32BufferAttribute(r,3)),this.setAttribute(\"uv\",new Float32BufferAttribute(a,2))}toJSON(){const e=BufferGeometry.prototype.toJSON.call(this);return function toJSON$1(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class ShadowMaterial extends Material{constructor(e){super(),this.type=\"ShadowMaterial\",this.color=new Color(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class RawShaderMaterial extends ShaderMaterial{constructor(e){super(e),this.type=\"RawShaderMaterial\"}}function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:\"\"},this.type=\"MeshStandardMaterial\",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yt,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,\"ior\",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=rn.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}RawShaderMaterial.prototype.isRawShaderMaterial=!0,MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:\"\"},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Color).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};class MeshPhongMaterial extends Material{constructor(e){super(),this.type=\"MeshPhongMaterial\",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yt,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends Material{constructor(e){super(),this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yt,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends Material{constructor(e){super(),this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yt,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends Material{constructor(e){super(),this.type=\"MeshLambertMaterial\",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;class MeshMatcapMaterial extends Material{constructor(e){super(),this.defines={MATCAP:\"\"},this.type=\"MeshMatcapMaterial\",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yt,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:\"\"},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(e){super(),this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;const na={arraySlice:function(e,t,n){return na.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:\"number\"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function compareTime(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[i])&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[i])&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(s=a[i])&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)},subclip:function(e,t,n,i,r=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<n||a>=i)){l.push(t.times[e]);for(let n=0;n<o;++n)c.push(t.values[e*o+n])}}0!==l.length&&(t.times=na.convertArray(l,t.times.constructor),t.values=na.convertArray(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,a=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if(\"bool\"===r||\"string\"===r)continue;const s=e.tracks.find(function(e){return e.name===i.name&&e.ValueTypeName===r});if(void 0===s)continue;let o=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=i.times.length-1;let d;if(a<=i.times[0]){const e=o,t=l-o;d=na.arraySlice(i.values,e,t)}else if(a>=i.times[h]){const e=h*l+o,t=e+l-o;d=na.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=o,n=l-o;e.evaluate(a),d=na.arraySlice(e.resultBuffer,t,n)}if(\"quaternion\"===r){(new Quaternion).fromArray(d).normalize().conjugate().toArray(d)}const p=s.times.length;for(let e=0;e<p;++e){const t=e*u+c;if(\"quaternion\"===r)Quaternion.multiplyQuaternionsFlat(s.values,t,d,0,s.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)s.values[t+n]-=d[n]}}}return e.blendMode=Bt,e}};function Interpolant(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function CubicInterpolant(e,t,n,i){Interpolant.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(e,t,n,i){Interpolant.call(this,e,t,n,i)}function DiscreteInterpolant(e,t,n,i){Interpolant.call(this,e,t,n,i)}Object.assign(Interpolant.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t},interpolate_:function(){throw new Error(\"call to abstract method\")},intervalChanged_:function(){}}),Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:Ot,endingEnd:Ot},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case kt:r=e,s=2*t-n;break;case It:s=t+i[r=i.length-2]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case kt:a=e,o=2*n-t;break;case It:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let e=0;e!==s;++e)r[e]=g*a[c+e]+y*a[l+e]+v*a[o+e]+b*a[u+e];return r}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),u=1-c;for(let e=0;e!==s;++e)r[e]=a[l+e]*u+a[o+e]*c;return r}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e){return this.copySampleValue_(e-1)}});class KeyframeTrack{constructor(e,t,n,i){if(void 0===e)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===t||0===t.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+e);this.name=e,this.times=na.convertArray(t,this.TimeBufferType),this.values=na.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:na.convertArray(e.times,Array),values:na.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pt:t=this.InterpolantFactoryMethodDiscrete;break;case Rt:t=this.InterpolantFactoryMethodLinear;break;case Dt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pt;case this.InterpolantFactoryMethodLinear:return Rt;case this.InterpolantFactoryMethodSmooth:return Dt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);const e=this.getValueSize();this.times=na.arraySlice(n,r,a),this.values=na.arraySlice(this.values,r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),e=!1);let a=null;for(let t=0;t!==r;t++){const i=n[t];if(\"number\"==typeof i&&isNaN(i)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,t,i),e=!1;break}if(null!==a&&a>i){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&na.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,t,n),e=!1;break}}return e}optimize(){const e=na.arraySlice(this.times),t=na.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Dt,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=na.arraySlice(e,0,a),this.values=na.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=na.arraySlice(this.times,0),t=na.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=Rt;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName=\"bool\",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=Pt,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName=\"color\";class NumberKeyframeTrack extends KeyframeTrack{}function QuaternionLinearInterpolant(e,t,n,i){Interpolant.call(this,e,t,n,i)}NumberKeyframeTrack.prototype.ValueTypeName=\"number\",QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let e=l+s;l!==e;l+=4)Quaternion.slerpFlat(r,0,a,l-s,a,l,o);return r}});class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName=\"quaternion\",QuaternionKeyframeTrack.prototype.DefaultInterpolation=Rt,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName=\"string\",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=Pt,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName=\"vector\";class AnimationClip{constructor(e,t=-1,n,i=Nt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=rn.generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(parseKeyframeTrack(n[e]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(KeyframeTrack.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let e=0;e<r;e++){let s=[],o=[];s.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=na.getKeyframeOrder(s);s=na.sortedArray(s,1,l),o=na.sortedArray(o,1,l),i||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new NumberKeyframeTrack(\".morphTargetInfluences[\"+t[e].name+\"]\",s,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\\w-]*?)([\\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(r);if(a&&a.length>1){const e=a[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const a=[];for(const e in i)a.push(this.CreateFromMorphTargetSequence(e,i[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],s=[];na.flattenJSON(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||\"default\",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new NumberKeyframeTrack(\".morphTargetInfluence[\"+n+\"]\",e,a))}o=e.length*(a||1)}else{const a=\".bones[\"+t[e].name+\"]\";n(VectorKeyframeTrack,a+\".position\",r,\"pos\",i),n(QuaternionKeyframeTrack,a+\".quaternion\",r,\"rot\",i),n(VectorKeyframeTrack,a+\".scale\",r,\"scl\",i)}}return 0===i.length?null:new this(r,o,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function parseKeyframeTrack(e){if(void 0===e.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");const t=function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return NumberKeyframeTrack;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return VectorKeyframeTrack;case\"color\":return ColorKeyframeTrack;case\"quaternion\":return QuaternionKeyframeTrack;case\"bool\":case\"boolean\":return BooleanKeyframeTrack;case\"string\":return StringKeyframeTrack}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+e)}(e.type);if(void 0===e.times){const t=[],n=[];na.flattenJSON(e.keys,t,n,\"value\"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const ia={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function LoadingManager(e,t,n){const i=this;let r=!1,a=0,s=0,o=void 0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}const ra=new LoadingManager;function Loader(e){this.manager=void 0!==e?e:ra,this.crossOrigin=\"anonymous\",this.withCredentials=!1,this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const aa={};function FileLoader(e){Loader.call(this,e)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(e,t,n,i){void 0===e&&(e=\"\"),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ia.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(void 0!==aa[e])return void aa[e].push({onLoad:t,onProgress:n,onError:i});const s=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(s){const n=s[1],a=!!s[2];let o=s[3];o=decodeURIComponent(o),a&&(o=atob(o));try{let a;const s=(this.responseType||\"\").toLowerCase();switch(s){case\"arraybuffer\":case\"blob\":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);a=\"blob\"===s?new Blob([e.buffer],{type:n}):e.buffer;break;case\"document\":const t=new DOMParser;a=t.parseFromString(o,n);break;case\"json\":a=JSON.parse(o);break;default:a=o}setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{aa[e]=[],aa[e].push({onLoad:t,onProgress:n,onError:i}),(o=new XMLHttpRequest).open(\"GET\",e,!0),o.addEventListener(\"load\",function(t){const n=this.response,i=aa[e];if(delete aa[e],200===this.status||0===this.status){0===this.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),ia.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),o.addEventListener(\"progress\",function(t){const n=aa[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}},!1),o.addEventListener(\"error\",function(t){const n=aa[e];delete aa[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),o.addEventListener(\"abort\",function(t){const n=aa[e];delete aa[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return r.manager.itemStart(e),o},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}});function CompressedTextureLoader(e){Loader.call(this,e)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(e,t,n,i){const r=this,a=[],s=new CompressedTexture,o=new FileLoader(this.manager);o.setPath(this.path),o.setResponseType(\"arraybuffer\"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function loadTexture(c){o.load(e[c],function(e){const n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(s.minFilter=pe),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)loadTexture(t);else o.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=pe),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}});class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ia.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");function onImageLoad(){s.removeEventListener(\"load\",onImageLoad,!1),s.removeEventListener(\"error\",onImageError,!1),ia.add(e,this),t&&t(this),r.manager.itemEnd(e)}function onImageError(t){s.removeEventListener(\"load\",onImageLoad,!1),s.removeEventListener(\"error\",onImageError,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener(\"load\",onImageLoad,!1),s.addEventListener(\"error\",onImageError,!1),\"data:\"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}function DataTextureLoader(e){Loader.call(this,e)}function TextureLoader(e){Loader.call(this,e)}function Curve(){this.type=\"Curve\",this.arcLengthDivisions=200}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(e,t,n,i){const r=this,a=new DataTexture,s=new FileLoader(this.manager);return s.setResponseType(\"arraybuffer\"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){const n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:le,a.wrapT=void 0!==n.wrapT?n.wrapT:le,a.magFilter=void 0!==n.magFilter?n.magFilter:pe,a.minFilter=void 0!==n.minFilter?n.minFilter:pe,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=me),1===n.mipmapCount&&(a.minFilter=pe),a.needsUpdate=!0,t&&t(a,n))},n,i),a}}),TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(e,t,n,i){const r=new Texture,a=new ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){r.image=n;const i=e.search(/\\.jpe?g($|\\?)/i)>0||0===e.search(/^data\\:image\\/jpeg/);r.format=i?Le:Pe,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}),Object.assign(Curve.prototype,{getPoint:function(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)r+=(n=this.getPoint(a/e)).distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let s,o=0,l=r-1;for(;o<=l;)if((s=n[i=Math.floor(o+(l-o)/2)]-a)<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(n[i=l]===a)return i/(r-1);const c=n[i];return(i+(a-c)/(n[i+1]-c))/(r-1)},getTangent:function(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),a=this.getPoint(i),s=t||(r.isVector2?new Vector2:new Vector3);return s.copy(a).sub(r).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Vector3,i=[],r=[],a=[],s=new Vector3,o=new Matrix4;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new Vector3),i[t].normalize()}r[0]=new Vector3,a[0]=new Vector3;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(i[t-1],i[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(rn.clamp(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(rn.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});class EllipseCurve extends Curve{constructor(e=0,t=0,n=1,i=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.type=\"EllipseCurve\",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new Vector2,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.type=\"ArcCurve\"}}function CubicPoly(){let e=0,t=0,n=0,i=0;function init(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,r){init(t,n,r*(n-e),r*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,r,a,s){let o=(t-e)/r-(n-e)/(r+a)+(n-t)/a,l=(n-t)/a-(i-t)/(a+s)+(i-n)/s;init(t,n,o*=a,l*=a)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}ArcCurve.prototype.isArcCurve=!0;const sa=new Vector3,oa=new CubicPoly,la=new CubicPoly,ca=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(e=[],t=!1,n=\"centripetal\",i=.5){super(),this.type=\"CatmullRomCurve3\",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Vector3){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(sa.subVectors(i[0],i[1]).add(i[0]),s=sa);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(sa.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=sa),\"centripetal\"===this.curveType||\"chordal\"===this.curveType){const e=\"chordal\"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),oa.initNonuniformCatmullRom(s.x,u.x,h.x,o.x,t,n,i),la.initNonuniformCatmullRom(s.y,u.y,h.y,o.y,t,n,i),ca.initNonuniformCatmullRom(s.z,u.z,h.z,o.z,t,n,i)}else\"catmullrom\"===this.curveType&&(oa.initCatmullRom(s.x,u.x,h.x,o.x,this.tension),la.initCatmullRom(s.y,u.y,h.y,o.y,this.tension),ca.initCatmullRom(s.z,u.z,h.z,o.z,this.tension));return n.set(oa.calc(c),la.calc(c),ca.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vector3).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CatmullRom(e,t,n,i,r){const a=.5*(i-t),s=.5*(r-n),o=e*e;return(2*n-2*i+a+s)*(e*o)+(-3*n+3*i-2*a-s)*o+a*e+n}function QuadraticBezier(e,t,n,i){return function QuadraticBezierP0(e,t){const n=1-e;return n*n*t}(e,t)+function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}(e,n)+function QuadraticBezierP2(e,t){return e*e*t}(e,i)}function CubicBezier(e,t,n,i,r){return function CubicBezierP0(e,t){const n=1-e;return n*n*n*t}(e,t)+function CubicBezierP1(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}(e,i)+function CubicBezierP3(e,t){return e*e*e*t}(e,r)}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;class CubicBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,n=new Vector2,i=new Vector2){super(),this.type=\"CubicBezierCurve\",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Vector2){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(CubicBezier(e,i.x,r.x,a.x,s.x),CubicBezier(e,i.y,r.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,n=new Vector3,i=new Vector3){super(),this.type=\"CubicBezierCurve3\",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Vector3){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(CubicBezier(e,i.x,r.x,a.x,s.x),CubicBezier(e,i.y,r.y,a.y,s.y),CubicBezier(e,i.z,r.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(e=new Vector2,t=new Vector2){super(),this.type=\"LineCurve\",this.v1=e,this.v2=t}getPoint(e,t=new Vector2){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Vector2;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}LineCurve.prototype.isLineCurve=!0;class QuadraticBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,n=new Vector2){super(),this.type=\"QuadraticBezierCurve\",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Vector2){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(QuadraticBezier(e,i.x,r.x,a.x),QuadraticBezier(e,i.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,n=new Vector3){super(),this.type=\"QuadraticBezierCurve3\",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Vector3){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(QuadraticBezier(e,i.x,r.x,a.x),QuadraticBezier(e,i.y,r.y,a.y),QuadraticBezier(e,i.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(e=[]){super(),this.type=\"SplineCurve\",this.points=e}getPoint(e,t=new Vector2){const n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),s=r-a,o=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(CatmullRom(s,o.x,l.x,c.x,u.x),CatmullRom(s,o.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vector2).fromArray(n))}return this}}SplineCurve.prototype.isSplineCurve=!0;var ua=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:class LineCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3){super(),this.type=\"LineCurve3\",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Vector3){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],a=r.getLength(),s=0===a?0:1-e/a;return r.getPointAt(s)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new ua[n.type]).fromJSON(n))}return this}}class Path extends CurvePath{constructor(e){super(),this.type=\"Path\",this.currentPoint=new Vector2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const s=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,i),new Vector2(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new SplineCurve(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,s,o),this}absellipse(e,t,n,i,r,a,s,o){const l=new EllipseCurve(e,t,n,i,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Shape extends Path{constructor(e){super(e),this.uuid=rn.generateUUID(),this.type=\"Shape\",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Path).fromJSON(n))}return this}}class Light extends Object3D{constructor(e,t=1){super(),this.type=\"Light\",this.color=new Color(e),this.intensity=t}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(e,t,n){super(e,n),this.type=\"HemisphereLight\",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}copy(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const ha=new Matrix4,da=new Vector3,pa=new Vector3;class LightShadow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;da.setFromMatrixPosition(e.matrixWorld),t.position.copy(da),pa.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pa),t.updateMatrixWorld(),ha.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ha),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*rn.RAD2DEG*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(e,t,n=0,i=Math.PI/3,r=0,a=1){super(e,t),this.type=\"SpotLight\",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const fa=new Matrix4,ma=new Vector3,ga=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix;ma.setFromMatrixPosition(e.matrixWorld),n.position.copy(ma),ga.copy(n.position),ga.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ga),n.updateMatrixWorld(),i.makeTranslation(-ma.x,-ma.y,-ma.z),fa.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fa)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(e,t,n=0,i=1){super(e,t),this.type=\"PointLight\",this.distance=n,this.decay=i,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class OrthographicCamera extends Camera{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=e*this.view.offsetX)+e*this.view.width,o=(s-=t*this.view.offsetY)-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}OrthographicCamera.prototype.isOrthographicCamera=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(e,t){super(e,t),this.type=\"DirectionalLight\",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(e,t){super(e,t),this.type=\"AmbientLight\"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(e,t,n=10,i=10){super(e,t),this.type=\"RectAreaLight\",this.width=n,this.height=i}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vector3)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(e=new SphericalHarmonics3,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}LightProbe.prototype.isLightProbe=!0;const ya={decodeText:function(e){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t=\"\";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf(\"/\");return-1===t?\"./\":e.substr(0,t+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type=\"InstancedBufferGeometry\",this.instanceCount=1/0}function InstancedBufferAttribute(e,t,n,i){\"number\"==typeof n&&(i=n,n=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\")),BufferAttribute.call(this,e,t,n),this.meshPerAttribute=i||1}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(e){return BufferGeometry.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=BufferGeometry.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=BufferAttribute.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function ImageBitmapLoader(e){\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),Loader.call(this,e),this.options={premultiplyAlpha:\"none\"}}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,isImageBitmapLoader:!0,setOptions:function setOptions(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=\"\"),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ia.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s={};s.credentials=\"anonymous\"===this.crossOrigin?\"same-origin\":\"include\",s.headers=this.requestHeader,fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:\"none\"}))}).then(function(n){ia.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}});class ShapePath{constructor(){this.type=\"ShapePath\",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function toShapesNoHoles(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Shape;r.curves=i.curves,t.push(r)}return t}function isPointInsidePolygon(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const n=ea.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return toShapesNoHoles(i);let r,a,s;const o=[];if(1===i.length)return a=i[0],(s=new Shape).curves=a.curves,o.push(s),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,s=i.length;t<s;t++)r=n(h=(a=i[t]).getPoints()),(r=e?!r:r)?(!l&&u[f]&&f++,u[f]={s:new Shape,p:h},u[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:h[0]});if(!u[0])return toShapesNoHoles(i);if(u.length>1){let e=!1;const t=[];for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let n=0,i=u.length;n<i;n++){const i=p[n];for(let r=0;r<i.length;r++){const a=i[r];let s=!0;for(let i=0;i<u.length;i++)isPointInsidePolygon(a.p,u[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:r}),s?(s=!1,c[i].push(a)):e=!0);s&&c[n].push(a)}}t.length>0&&(e||(p=c))}for(let e=0,t=u.length;e<t;e++){s=u[e].s,o.push(s);for(let t=0,n=(d=p[e]).length;t<n;t++)s.holes.push(d[t].h)}return o}}class Font{constructor(e){this.type=\"Font\",this.data=e}generateShapes(e,t=100){const n=[],i=function createPaths(e,t,n){const i=Array.from(e),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[];let o=0,l=0;for(let e=0;e<i.length;e++){const t=i[e];if(\"\\n\"===t)o=0,l-=a;else{const e=createPath(t,r,o,l,n);o+=e.offsetX,s.push(e.path)}}return s}(e,t,this.data);for(let e=0,t=i.length;e<t;e++)Array.prototype.push.apply(n,i[e].toShapes());return n}}function createPath(e,t,n,i,r){const a=r.glyphs[e]||r.glyphs[\"?\"];if(!a)return void console.error('THREE.Font: character \"'+e+'\" does not exists in font family '+r.familyName+\".\");const s=new ShapePath;let o,l,c,u,h,d,p,f;if(a.o){const e=a._cachedOutline||(a._cachedOutline=a.o.split(\" \"));for(let r=0,a=e.length;r<a;){switch(e[r++]){case\"m\":o=e[r++]*t+n,l=e[r++]*t+i,s.moveTo(o,l);break;case\"l\":o=e[r++]*t+n,l=e[r++]*t+i,s.lineTo(o,l);break;case\"q\":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,s.quadraticCurveTo(h,d,c,u);break;case\"b\":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,p=e[r++]*t+n,f=e[r++]*t+i,s.bezierCurveTo(h,d,p,f,c,u)}}}return{offsetX:a.ha*t,path:s}}Font.prototype.isFont=!0;let va;const ba={getContext:function(){return void 0===va&&(va=new(window.AudioContext||window.webkitAudioContext)),va},setContext:function(e){va=e}};(class HemisphereLightProbe extends LightProbe{constructor(e,t,n=1){super(void 0,n);const i=(new Color).set(e),r=(new Color).set(t),a=new Vector3(i.r,i.g,i.b),s=new Vector3(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class AmbientLightProbe extends LightProbe{constructor(e,t=1){super(void 0,t);const n=(new Color).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;new Matrix4,new Matrix4;class Clock{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function now(){return(\"undefined\"==typeof performance?Date:performance).now()}class Audio extends Object3D{constructor(e){super(),this.type=\"Audio\",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=\"empty\",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType=\"buffer\",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn(\"THREE.Audio: Audio is already playing.\");if(!1===this.hasPlaybackControl)return void console.warn(\"THREE.Audio: this Audio has no playback control.\");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class PropertyMixer{constructor(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case\"quaternion\":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case\"string\":case\"bool\":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{const e=t/(a+=t);this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]}_slerp(e,t,n,i){Quaternion.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;Quaternion.multiplyQuaternionsFlat(e,a,e,t,e,n),Quaternion.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}}const xa=new RegExp(\"[\\\\[\\\\]\\\\.:\\\\/]\",\"g\"),_a=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",wa=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),Ta=/(WCOD+)?/.source.replace(\"WCOD\",_a),Ma=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),Sa=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),Ea=new RegExp(\"^\"+wa+Ta+Ma+Sa+\"$\"),Aa=[\"material\",\"materials\",\"bones\"];function Composite(e,t,n){const i=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function PropertyBinding(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Composite.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(PropertyBinding,{Composite:Composite,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\\s/g,\"_\").replace(xa,\"\")},parseTrackName:function(e){const t=Ea.exec(e);if(!t)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(\".\");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Aa.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+e);return n},findNode:function(e,t){if(!t||\"\"===t||\".\"===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(e,t){e[t]=this.node[this.propertyName]},function getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]},function setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)},function setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue_unbound(e,t){this.bind(),this.getValue(e,t)},setValue:function getValue_unbound(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\");if(n){let i=t.objectIndex;switch(n){case\"materials\":if(!e.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!e.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);e=e.material.materials;break;case\"bones\":if(!e.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+n+\".\"+i+\" but it wasn't found.\",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if(\"morphTargetInfluences\"===i){if(!e.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(!e.geometry.isBufferGeometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.\",this);if(!e.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});(class AnimationObjectGroup{constructor(){this.uuid=rn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let s=void 0,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new PropertyBinding(u,n[e],i[e]))}else if(d<l){s=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[o];let s=t[d];t[d]=a,void 0===s&&(s=new PropertyBinding(u,n[e],i[e])),t[o]=s}}else e[d]!==s&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[l];t[l]=i,t[a]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const s=--r,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[c];t[l]=i,t[s]=r,t.pop()}}else{const r=--a,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),s.push(t),r.push(u);for(let n=c,i=o.length;n!==i;++n){const i=o[n];u[n]=new PropertyBinding(i,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}).prototype.isAnimationObjectGroup=!0;class AnimationAction{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Ot,endingEnd:Ot};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ct,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case Bt:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);break;case Nt:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===Lt;if(0===e)return-1===r?i:a&&1==(1&r)?t-i:i;if(n===At){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=kt,i.endingEnd=kt):(i.endingStart=e?this.zeroSlopeAtStart?kt:Ot:It,i.endingEnd=t?this.zeroSlopeAtEnd?kt:Ot:It)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}(class AnimationMixer extends EventDispatcher{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=i[e],l=r.name;let u=c[l];if(void 0!==u)a[e]=u;else{if(void 0!==(u=a[e])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;++(u=new PropertyMixer(PropertyBinding.create(n,l,i),r.ValueTypeName,r.getValueSize())).referenceCount,this._addInactiveBinding(u,o,l),a[e]=u}s[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&((n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a=\"string\"==typeof e?AnimationClip.findByName(i,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:Nt),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new AnimationAction(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r=\"string\"==typeof e?AnimationClip.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==n;++s)t[s]._update(i,e,r,a);const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Uniform{constructor(e){\"string\"==typeof e&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),e=arguments[1]),this.value=e}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}function InstancedInterleavedBuffer(e,t,n){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1}function GLBufferAttribute(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function Raycaster(e,t,n=0,i=1/0){this.ray=new Ray(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\"),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)intersectObject(i[e],t,n,!0)}}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=InterleavedBuffer.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=InterleavedBuffer.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(GLBufferAttribute.prototype,\"needsUpdate\",{set:function(e){!0===e&&this.version++}}),Object.assign(GLBufferAttribute.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Raycaster.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(\"THREE.Raycaster: Unsupported camera type: \"+t.type)},intersectObject:function(e,t=!1,n=[]){return intersectObject(e,this,n,t),n.sort(ascSort),n},intersectObjects:function(e,t=!1,n=[]){for(let i=0,r=e.length;i<r;i++)intersectObject(e[i],this,n,t);return n.sort(ascSort),n}});class Spherical{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(rn.clamp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Ca=new Vector2;class Box2{constructor(e=new Vector2(1/0,1/0),t=new Vector2(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ca.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn(\"THREE.Box2: .getCenter() target is now required\"),e=new Vector2),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn(\"THREE.Box2: .getSize() target is now required\"),e=new Vector2),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn(\"THREE.Box2: .getParameter() target is now required\"),t=new Vector2),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn(\"THREE.Box2: .clampPoint() target is now required\"),t=new Vector2),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ca.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box2.prototype.isBox2=!0;const La=new Vector3,Pa=new Vector3;function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0;const Ra=new Vector3,Da=new Matrix4,Oa=new Matrix4;class AxesHelper extends LineSegments{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new BufferGeometry;n.setAttribute(\"position\",new Float32BufferAttribute(t,3)),n.setAttribute(\"color\",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type=\"AxesHelper\"}}const ka=new Float32Array(1),Ia=(new Int32Array(ka.buffer),4),Na=8,Ba=(Math.pow(2,Na),[.125,.215,.35,.446,.526,.582]),Va=Na-Ia+1+Ba.length,za=new MeshBasicMaterial({side:d,depthWrite:!1,depthTest:!1}),{_lodPlanes:Fa,_sizeLods:Ha,_sigmas:Ua}=function _createPlanes(){const e=[],t=[],n=[];let i=Na;for(let r=0;r<Va;r++){const a=Math.pow(2,i);t.push(a);let s=1/a;r>Na-Ia?s=Ba[r-Na+Ia-1]:0==r&&(s=0),n.push(s);const o=1/(a-1),l=-o/2,c=1+o/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),y=new Float32Array(f*d*h),v=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,p*d*e),y.set(u,f*d*e);const r=[e,e,e,e,e,e];v.set(r,m*d*e)}const b=new BufferGeometry;b.setAttribute(\"position\",new BufferAttribute(g,p)),b.setAttribute(\"uv\",new BufferAttribute(y,f)),b.setAttribute(\"faceIndex\",new BufferAttribute(v,m)),e.push(b),i>Ia&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}();new Mesh(new BoxGeometry,za);Math.sqrt(5);Curve.create=function(e,t){return console.log(\"THREE.Curve.create() has been deprecated\"),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Path.prototype.fromPoints=function(e){return console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(e)},class GridHelper extends LineSegments{constructor(e=10,t=10,n=4473924,i=8947848){n=new Color(n),i=new Color(i);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,u=-s;e<=t;e++,u+=a){o.push(-s,0,u,s,0,u),o.push(u,0,-s,u,0,s);const t=e===r?n:i;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new BufferGeometry;c.setAttribute(\"position\",new Float32BufferAttribute(o,3)),c.setAttribute(\"color\",new Float32BufferAttribute(l,3)),super(c,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type=\"GridHelper\"}}.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},class SkeletonHelper extends LineSegments{constructor(e){const t=function getBoneList(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,getBoneList(e.children[n]));return t}(e),n=new BufferGeometry,i=[],r=[],a=new Color(0,0,1),s=new Color(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.setAttribute(\"position\",new Float32BufferAttribute(i,3)),n.setAttribute(\"color\",new Float32BufferAttribute(r,3)),super(n,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type=\"SkeletonHelper\",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute(\"position\");Oa.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Da.multiplyMatrices(Oa,r.matrixWorld),Ra.setFromMatrixPosition(Da),i.setXYZ(n,Ra.x,Ra.y,Ra.z),Da.multiplyMatrices(Oa,r.parent.matrixWorld),Ra.setFromMatrixPosition(Da),i.setXYZ(n+1,Ra.x,Ra.y,Ra.z),n+=2)}n.getAttribute(\"position\").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},Loader.prototype.extractUrlBase=function(e){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),ya.extractUrlBase(e)},Loader.Handlers={add:function(){console.error(\"THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.\")},get:function(){console.error(\"THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.\")}},Box2.prototype.center=function(e){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(e)},Box2.prototype.empty=function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Box2.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},Box2.prototype.size=function(e){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(e)},Box3.prototype.center=function(e){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(e)},Box3.prototype.empty=function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Box3.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},Box3.prototype.isIntersectionSphere=function(e){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(e)},Box3.prototype.size=function(e){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(e)},Sphere.prototype.empty=function(){return console.warn(\"THREE.Sphere: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Frustum.prototype.setFromMatrix=function(e){return console.warn(\"THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().\"),this.setFromProjectionMatrix(e)},class Line3{constructor(e=new Vector3,t=new Vector3){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn(\"THREE.Line3: .getCenter() target is now required\"),e=new Vector3),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn(\"THREE.Line3: .delta() target is now required\"),e=new Vector3),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn(\"THREE.Line3: .at() target is now required\"),t=new Vector3),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){La.subVectors(e,this.start),Pa.subVectors(this.end,this.start);const n=Pa.dot(Pa);let i=Pa.dot(La)/n;return t&&(i=rn.clamp(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn(\"THREE.Line3: .closestPointToPoint() target is now required\"),n=new Vector3),this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}.prototype.center=function(e){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(e)},rn.random16=function(){return console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\"),Math.random()},rn.nearestPowerOfTwo=function(e){return console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\"),rn.floorPowerOfTwo(e)},rn.nextPowerOfTwo=function(e){return console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\"),rn.ceilPowerOfTwo(e)},Matrix3.prototype.flattenToArrayOffset=function(e,t){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(e,t)},Matrix3.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),e.applyMatrix3(this)},Matrix3.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},Matrix3.prototype.applyToBufferAttribute=function(e){return console.warn(\"THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.\"),e.applyMatrix3(this)},Matrix3.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")},Matrix3.prototype.getInverse=function(e){return console.warn(\"THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(e).invert()},Matrix4.prototype.extractPosition=function(e){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(e)},Matrix4.prototype.flattenToArrayOffset=function(e,t){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(e,t)},Matrix4.prototype.getPosition=function(){return console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),(new Vector3).setFromMatrixColumn(this,3)},Matrix4.prototype.setRotationFromQuaternion=function(e){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(e)},Matrix4.prototype.multiplyToArray=function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},Matrix4.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Matrix4.prototype.multiplyVector4=function(e){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Matrix4.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},Matrix4.prototype.rotateAxis=function(e){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),e.transformDirection(this)},Matrix4.prototype.crossVector=function(e){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Matrix4.prototype.translate=function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},Matrix4.prototype.rotateX=function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},Matrix4.prototype.rotateY=function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},Matrix4.prototype.rotateZ=function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},Matrix4.prototype.rotateByAxis=function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},Matrix4.prototype.applyToBufferAttribute=function(e){return console.warn(\"THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Matrix4.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},Matrix4.prototype.makeFrustum=function(e,t,n,i,r,a){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(e,t,i,n,r,a)},Matrix4.prototype.getInverse=function(e){return console.warn(\"THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(e).invert()},Plane.prototype.isIntersectionLine=function(e){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(e)},Quaternion.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),e.applyQuaternion(this)},Quaternion.prototype.inverse=function(){return console.warn(\"THREE.Quaternion: .inverse() has been renamed to invert().\"),this.invert()},Ray.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},Ray.prototype.isIntersectionPlane=function(e){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(e)},Ray.prototype.isIntersectionSphere=function(e){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(e)},Triangle.prototype.area=function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},Triangle.prototype.barycoordFromPoint=function(e,t){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(e,t)},Triangle.prototype.midpoint=function(e){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(e)},Triangle.prototypenormal=function(e){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(e)},Triangle.prototype.plane=function(e){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(e)},Triangle.barycoordFromPoint=function(e,t,n,i,r){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),Triangle.getBarycoord(e,t,n,i,r)},Triangle.normal=function(e,t,n,i){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),Triangle.getNormal(e,t,n,i)},Shape.prototype.extractAllPoints=function(e){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(e)},Shape.prototype.extrude=function(e){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new ExtrudeGeometry(this,e)},Shape.prototype.makeGeometry=function(e){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new ShapeGeometry(this,e)},Vector2.prototype.fromAttribute=function(e,t,n){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,n)},Vector2.prototype.distanceToManhattan=function(e){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(e)},Vector2.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},Vector3.prototype.setEulerFromRotationMatrix=function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},Vector3.prototype.setEulerFromQuaternion=function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},Vector3.prototype.getPositionFromMatrix=function(e){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(e)},Vector3.prototype.getScaleFromMatrix=function(e){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(e)},Vector3.prototype.getColumnFromMatrix=function(e,t){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(t,e)},Vector3.prototype.applyProjection=function(e){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(e)},Vector3.prototype.fromAttribute=function(e,t,n){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,n)},Vector3.prototype.distanceToManhattan=function(e){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(e)},Vector3.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},Vector4.prototype.fromAttribute=function(e,t,n){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,n)},Vector4.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},Object3D.prototype.getChildByName=function(e){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(e)},Object3D.prototype.renderDepth=function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},Object3D.prototype.translate=function(e,t){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(t,e)},Object3D.prototype.getWorldRotation=function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")},Object3D.prototype.applyMatrix=function(e){return console.warn(\"THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(e)},Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(e){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=e}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),Mesh.prototype.setDrawMode=function(){console.error(\"THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")},Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.\"),0},set:function(){console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")}}}),Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn(\"THREE.LOD: .objects has been renamed to .levels.\"),this.levels}}}),Object.defineProperty(Skeleton.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}}),SkinnedMesh.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")},Object.defineProperty(Curve.prototype,\"__arcLengthDivisions\",{get:function(){return console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions},set:function(e){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions=e}}),PerspectiveCamera.prototype.setLens=function(e,t){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(e){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(e){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(e){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=e}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},dynamic:{get:function(){return console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.usage===Qt},set:function(){console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.setUsage(Qt)}}}),BufferAttribute.prototype.setDynamic=function(e){return console.warn(\"THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===e?Qt:Kt),this},BufferAttribute.prototype.copyIndicesArray=function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")},BufferAttribute.prototype.setArray=function(){console.error(\"THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},BufferGeometry.prototype.addIndex=function(e){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(e)},BufferGeometry.prototype.addAttribute=function(e,t){return console.warn(\"THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().\"),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?\"index\"===e?(console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(t),this):this.setAttribute(e,t):(console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.setAttribute(e,new BufferAttribute(arguments[1],arguments[2])))},BufferGeometry.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(e,t)},BufferGeometry.prototype.clearDrawCalls=function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},BufferGeometry.prototype.computeOffsets=function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")},BufferGeometry.prototype.removeAttribute=function(e){return console.warn(\"THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().\"),this.deleteAttribute(e)},BufferGeometry.prototype.applyMatrix=function(e){return console.warn(\"THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(e)},Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn(\"THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.\"),this.instanceCount},set:function(e){console.warn(\"THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.\"),this.instanceCount=e}}}),Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn(\"THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.\"),this.params.Line.threshold},set:function(e){console.warn(\"THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.\"),this.params.Line.threshold=e}}}),Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn(\"THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.\"),this.usage===Qt},set:function(e){console.warn(\"THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.\"),this.setUsage(e)}}}),InterleavedBuffer.prototype.setDynamic=function(e){return console.warn(\"THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===e?Qt:Kt),this},InterleavedBuffer.prototype.setArray=function(){console.error(\"THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},ExtrudeGeometry.prototype.getArrays=function(){console.error(\"THREE.ExtrudeGeometry: .getArrays() has been removed.\")},ExtrudeGeometry.prototype.addShapeList=function(){console.error(\"THREE.ExtrudeGeometry: .addShapeList() has been removed.\")},ExtrudeGeometry.prototype.addShape=function(){console.error(\"THREE.ExtrudeGeometry: .addShape() has been removed.\")},Scene.prototype.dispose=function(){console.error(\"THREE.Scene: .dispose() has been removed.\")},Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},set:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new Color}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(e){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask},set:function(e){console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask=e}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\"),!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}}),Object.defineProperties(MeshPhysicalMaterial.prototype,{transparency:{get:function(){return console.warn(\"THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.\"),this.transmission},set:function(e){console.warn(\"THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.\"),this.transmission=e}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(e){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=e}}}),WebGLRenderer.prototype.clearTarget=function(e,t,n,i){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\"),this.setRenderTarget(e),this.clear(t,n,i)},WebGLRenderer.prototype.animate=function(e){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\"),this.setAnimationLoop(e)},WebGLRenderer.prototype.getCurrentRenderTarget=function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},WebGLRenderer.prototype.getMaxAnisotropy=function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},WebGLRenderer.prototype.getPrecision=function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},WebGLRenderer.prototype.resetGLState=function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},WebGLRenderer.prototype.supportsFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},WebGLRenderer.prototype.supportsHalfFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},WebGLRenderer.prototype.supportsStandardDerivatives=function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},WebGLRenderer.prototype.supportsCompressedTextureS3TC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},WebGLRenderer.prototype.supportsCompressedTexturePVRTC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},WebGLRenderer.prototype.supportsBlendMinMax=function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},WebGLRenderer.prototype.supportsVertexTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},WebGLRenderer.prototype.supportsInstancedArrays=function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},WebGLRenderer.prototype.enableScissorTest=function(e){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(e)},WebGLRenderer.prototype.initMaterial=function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},WebGLRenderer.prototype.addPrePlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},WebGLRenderer.prototype.addPostPlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},WebGLRenderer.prototype.updateShadowMap=function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},WebGLRenderer.prototype.setFaceCulling=function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")},WebGLRenderer.prototype.allocTextureUnit=function(){console.warn(\"THREE.WebGLRenderer: .allocTextureUnit() has been removed.\")},WebGLRenderer.prototype.setTexture=function(){console.warn(\"THREE.WebGLRenderer: .setTexture() has been removed.\")},WebGLRenderer.prototype.setTexture2D=function(){console.warn(\"THREE.WebGLRenderer: .setTexture2D() has been removed.\")},WebGLRenderer.prototype.setTextureCube=function(){console.warn(\"THREE.WebGLRenderer: .setTextureCube() has been removed.\")},WebGLRenderer.prototype.getActiveMipMapLevel=function(){return console.warn(\"THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().\"),this.getActiveMipmapLevel()},Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}},context:{get:function(){return console.warn(\"THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.\"),this.getContext()}},vr:{get:function(){return console.warn(\"THREE.WebGLRenderer: .vr has been renamed to .xr\"),this.xr}},gammaInput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\"),!1},set:function(){console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\")}},gammaOutput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),!1},set:function(e){console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),this.outputEncoding=!0===e?zt:Vt}},toneMappingWhitePoint:{get:function(){return console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\"),1},set:function(){console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\")}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=e}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=e}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=e}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=e}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=e}}}),Object.defineProperties(Audio.prototype,{load:{value:function(e){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");const t=this;return(new class AudioLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new FileLoader(this.manager);a.setResponseType(\"arraybuffer\"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{const a=n.slice(0);ba.getContext().decodeAudioData(a,function(e){t(e)})}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},n,i)}}).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn(\"THREE.Audio: .startTime is now .play( delay ).\")}}}),class AudioAnalyser{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(e,t){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(e,t)},CubeCamera.prototype.clear=function(e,t,n,i){return console.warn(\"THREE.CubeCamera: .clear() is now .renderTarget.clear().\"),this.renderTarget.clear(e,t,n,i)},sn.crossOrigin=void 0,sn.loadTexture=function(e,t,n,i){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");const r=new TextureLoader;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},sn.loadTextureCube=function(e,t,n,i){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");const r=new class CubeTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){const r=new CubeTexture,a=new ImageLoader(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function loadTexture(n){a.load(e[n],function(e){r.images[n]=e,6==++s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let t=0;t<e.length;++t)loadTexture(t);return r}};r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},sn.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},sn.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")};\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:\"126\"}})),\"undefined\"!=typeof window&&(window.__THREE__?console.warn(\"WARNING: Multiple instances of Three.js being imported.\"):window.__THREE__=\"126\");var ja=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.touches={ONE:r.ROTATE,TWO:r.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.listenToKeyEvents=function(e){e.addEventListener(\"keydown\",onKeyDown),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),c=l.NONE},this.update=function(){var t=new Vector3,i=(new Quaternion).setFromUnitVectors(e.up,new Vector3(0,1,0)),r=i.clone().invert(),s=new Vector3,o=new Quaternion,g=2*Math.PI;return function update(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&c===l.NONE&&rotateLeft(function getAutoRotationAngle(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(h.theta+=d.theta*n.dampingFactor,h.phi+=d.phi*n.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);var y=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(y)&&isFinite(v)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),h.theta=y<=v?Math.max(y,Math.min(v,h.theta)):h.theta>(y+v)/2?Math.max(y,h.theta):Math.min(v,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=p,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),t.setFromSpherical(h),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),f.set(0,0,0)),p=1,!!(m||s.distanceToSquared(n.object.position)>u||8*(1-o.dot(n.object.quaternion))>u)&&(n.dispatchEvent(a),s.copy(n.object.position),o.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener(\"contextmenu\",onContextMenu),n.domElement.removeEventListener(\"pointerdown\",onPointerDown),n.domElement.removeEventListener(\"wheel\",onMouseWheel),n.domElement.removeEventListener(\"touchstart\",onTouchStart),n.domElement.removeEventListener(\"touchend\",onTouchEnd),n.domElement.removeEventListener(\"touchmove\",onTouchMove),n.domElement.ownerDocument.removeEventListener(\"pointermove\",onPointerMove),n.domElement.ownerDocument.removeEventListener(\"pointerup\",onPointerUp),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener(\"keydown\",onKeyDown)};var n=this,a={type:\"change\"},s={type:\"start\"},o={type:\"end\"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=l.NONE,u=1e-6,h=new Spherical,d=new Spherical,p=1,f=new Vector3,m=!1,g=new Vector2,y=new Vector2,v=new Vector2,b=new Vector2,x=new Vector2,_=new Vector2,w=new Vector2,T=new Vector2,M=new Vector2;function getZoomScale(){return Math.pow(.95,n.zoomSpeed)}function rotateLeft(e){d.theta-=e}function rotateUp(e){d.phi-=e}var S=function(){var e=new Vector3;return function panLeft(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),E=function(){var e=new Vector3;return function panUp(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),A=function(){var e=new Vector3;return function pan(t,i){var r=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),S(2*t*s/r.clientHeight,n.object.matrix),E(2*i*s/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(S(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),E(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"),n.enablePan=!1)}}();function dollyOut(e){n.object.isPerspectiveCamera?p/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),n.enableZoom=!1)}function dollyIn(e){n.object.isPerspectiveCamera?p*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),n.enableZoom=!1)}function handleMouseDownRotate(e){g.set(e.clientX,e.clientY)}function handleMouseDownPan(e){b.set(e.clientX,e.clientY)}function handleTouchStartRotate(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}}function handleTouchStartPan(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function handleTouchStartDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);w.set(0,i)}function handleTouchMoveRotate(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,i)}v.subVectors(y,g).multiplyScalar(n.rotateSpeed);var r=n.domElement;rotateLeft(2*Math.PI*v.x/r.clientHeight),rotateUp(2*Math.PI*v.y/r.clientHeight),g.copy(y)}function handleTouchMovePan(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,i)}_.subVectors(x,b).multiplyScalar(n.panSpeed),A(_.x,_.y),b.copy(x)}function handleTouchMoveDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);T.set(0,r),M.set(0,Math.pow(T.y/w.y,n.zoomSpeed)),dollyOut(M.y),w.copy(T)}function onPointerDown(e){if(!1!==n.enabled)switch(e.pointerType){case\"mouse\":case\"pen\":!function onMouseDown(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.DOLLY:if(!1===n.enableZoom)return;!function handleMouseDownDolly(e){w.set(e.clientX,e.clientY)}(e),c=l.DOLLY;break;case i.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;handleMouseDownPan(e),c=l.PAN}else{if(!1===n.enableRotate)return;handleMouseDownRotate(e),c=l.ROTATE}break;case i.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;handleMouseDownRotate(e),c=l.ROTATE}else{if(!1===n.enablePan)return;handleMouseDownPan(e),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&(n.domElement.ownerDocument.addEventListener(\"pointermove\",onPointerMove),n.domElement.ownerDocument.addEventListener(\"pointerup\",onPointerUp),n.dispatchEvent(s))}(e)}}function onPointerMove(e){if(!1!==n.enabled)switch(e.pointerType){case\"mouse\":case\"pen\":!function onMouseMove(e){if(!1===n.enabled)return;switch(e.preventDefault(),c){case l.ROTATE:if(!1===n.enableRotate)return;!function handleMouseMoveRotate(e){y.set(e.clientX,e.clientY),v.subVectors(y,g).multiplyScalar(n.rotateSpeed);var t=n.domElement;rotateLeft(2*Math.PI*v.x/t.clientHeight),rotateUp(2*Math.PI*v.y/t.clientHeight),g.copy(y),n.update()}(e);break;case l.DOLLY:if(!1===n.enableZoom)return;!function handleMouseMoveDolly(e){T.set(e.clientX,e.clientY),M.subVectors(T,w),M.y>0?dollyOut(getZoomScale()):M.y<0&&dollyIn(getZoomScale()),w.copy(T),n.update()}(e);break;case l.PAN:if(!1===n.enablePan)return;!function handleMouseMovePan(e){x.set(e.clientX,e.clientY),_.subVectors(x,b).multiplyScalar(n.panSpeed),A(_.x,_.y),b.copy(x),n.update()}(e)}}(e)}}function onPointerUp(e){switch(e.pointerType){case\"mouse\":case\"pen\":!function onMouseUp(e){if(n.domElement.ownerDocument.removeEventListener(\"pointermove\",onPointerMove),n.domElement.ownerDocument.removeEventListener(\"pointerup\",onPointerUp),!1===n.enabled)return;n.dispatchEvent(o),c=l.NONE}()}}function onMouseWheel(e){!1===n.enabled||!1===n.enableZoom||c!==l.NONE&&c!==l.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(s),function handleMouseWheel(e){e.deltaY<0?dollyIn(getZoomScale()):e.deltaY>0&&dollyOut(getZoomScale()),n.update()}(e),n.dispatchEvent(o))}function onKeyDown(e){!1!==n.enabled&&!1!==n.enablePan&&function handleKeyDown(e){var t=!1;switch(e.keyCode){case n.keys.UP:A(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:A(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:A(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:A(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function onTouchStart(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case r.ROTATE:if(!1===n.enableRotate)return;handleTouchStartRotate(e),c=l.TOUCH_ROTATE;break;case r.PAN:if(!1===n.enablePan)return;handleTouchStartPan(e),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case r.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function handleTouchStartDollyPan(e){n.enableZoom&&handleTouchStartDolly(e),n.enablePan&&handleTouchStartPan(e)}(e),c=l.TOUCH_DOLLY_PAN;break;case r.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function handleTouchStartDollyRotate(e){n.enableZoom&&handleTouchStartDolly(e),n.enableRotate&&handleTouchStartRotate(e)}(e),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}}function onTouchMove(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),c){case l.TOUCH_ROTATE:if(!1===n.enableRotate)return;handleTouchMoveRotate(e),n.update();break;case l.TOUCH_PAN:if(!1===n.enablePan)return;handleTouchMovePan(e),n.update();break;case l.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function handleTouchMoveDollyPan(e){n.enableZoom&&handleTouchMoveDolly(e),n.enablePan&&handleTouchMovePan(e)}(e),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function handleTouchMoveDollyRotate(e){n.enableZoom&&handleTouchMoveDolly(e),n.enableRotate&&handleTouchMoveRotate(e)}(e),n.update();break;default:c=l.NONE}}function onTouchEnd(e){!1!==n.enabled&&(n.dispatchEvent(o),c=l.NONE)}function onContextMenu(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener(\"contextmenu\",onContextMenu),n.domElement.addEventListener(\"pointerdown\",onPointerDown),n.domElement.addEventListener(\"wheel\",onMouseWheel),n.domElement.addEventListener(\"touchstart\",onTouchStart),n.domElement.addEventListener(\"touchend\",onTouchEnd),n.domElement.addEventListener(\"touchmove\",onTouchMove),this.update()};(ja.prototype=Object.create(EventDispatcher.prototype)).constructor=ja;var Ga=function(e,t){ja.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=i.PAN,this.mouseButtons.RIGHT=i.ROTATE,this.touches.ONE=r.PAN,this.touches.TWO=r.DOLLY_ROTATE};(Ga.prototype=Object.create(EventDispatcher.prototype)).constructor=Ga;var Wa=n(31),qa=n.n(Wa),Xa=n(32),Ya=n.n(Xa);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $a=function(){function Sketch(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Sketch),this.container=e.dom,this.clock=new Clock,this.scene=new Scene,this.sizes={width:window.innerWidth,height:window.innerHeight},this.cursor={x:0,y:0},this.aspectRadio=this.sizes.width/this.sizes.height,this.init()}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Sketch,[{key:\"init\",value:function init(){this.setupCamera(),this.initRendererScene(),this.appendCanvas(),this.rendererScene(),this.addelt(),this.initOrbitControls(),this.renderloop(),this.resize(),this.setupResize()}},{key:\"appendCanvas\",value:function appendCanvas(){this.container.appendChild(this.renderer.domElement),this.canvas=this.renderer.domElement}},{key:\"addelt\",value:function addelt(){var e=new Mesh(new BoxGeometry(1,1,1,10,10,10),new ShaderMaterial({extensions:{derivatives:\"#extension GL_OES_standard_derivatives : enable\"},side:p,uniforms:{time:{value:0},resolution:{value:new Vector4}},vertexShader:Ya.a,fragmentShader:qa.a}));this.plane=e,this.scene.add(e)}},{key:\"addObjects\",value:function addObjects(){this.material=new ShaderMaterial({extensions:{derivatives:\"#extension GL_OES_standard_derivatives : enable\"},side:p,uniforms:{time:{value:0},resolution:{value:new Vector4}},vertexShader:Ya.a,fragmentShader:qa.a}),this.geometry=new PlaneGeometry(1,1,1,1),this.plane=new Mesh(this.geometry,this.material),this.scene.add(this.plane)}},{key:\"setupCamera\",value:function setupCamera(){var e=new PerspectiveCamera(100,this.sizes.width/this.sizes.height);e.position.z=21,this.camera=e,this.scene.add(this.camera)}},{key:\"initRendererScene\",value:function initRendererScene(){var e=new WebGLRenderer({alpha:!0,canvas:this.canvas});this.renderer=e}},{key:\"rendererScene\",value:function rendererScene(){this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.render(this.scene,this.camera),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}},{key:\"setupResize\",value:function setupResize(){window.addEventListener(\"resize\",this.resize.bind(this))}},{key:\"resize\",value:function resize(){this.setSize(),this.setCameraAspect(),this.rendererScene()}},{key:\"setCameraAspect\",value:function setCameraAspect(){this.camera.aspect=this.sizes.width/this.sizes.height,this.camera.updateProjectionMatrix()}},{key:\"setSize\",value:function setSize(){this.sizes.width=window.innerWidth,this.sizes.height=window.innerHeight}},{key:\"initOrbitControls\",value:function initOrbitControls(){this.controls=new ja(this.camera,this.canvas),this.controls.enableDamping=!0}},{key:\"renderloop\",value:function renderloop(){this.clock.getElapsedTime();this.controls.update(),this.camera.lookAt(this.plane.position),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(this.renderloop.bind(this))}},{key:\"addHelper\",value:function addHelper(){var e=new AxesHelper(20);this.scene.add(e)}}]),Sketch}();t.a=$a},function(e,t,n){n(55),e.exports=n(56)},function(e,t,n){},function(e,t,n){\"use strict\";n.r(t),function(e){var t=n(19),i=n(29),r=n.n(i),a=n(28),s=n(44),o=n(33),l=n(43),c=n.n(l),u=n(45),h=(n(57),n(53)),d=n(46),p=n(47),f=n(23),m=n(48),g=n(49),y=n(50),v=n(51),b=n(52);t.a.registerPlugin(a.a),t.a.registerPlugin(r.a),t.a.registerPlugin(s.a),new p.a([{file:m.a,dependencies:[f,d.a,t.a,o.a,a.a,r.a,c.a,u.a]},{file:g.a,dependencies:[f,h.a],resolve:\"#page-home\"},{file:y.a,dependencies:[f],resolve:\"#archive-news\"},{file:v.a,dependencies:[f,t.a,a.a],resolve:\"#single-article\"},{file:b.a,dependencies:[f,t.a],resolve:\"#page-contact\"}]).load()}.call(this,n(13))},function(e,t,n){\"use strict\";(function(e){}).call(this,n(13))}]);","extractedComments":[]}